define(["require", "exports", "game/citydialog", "game/world", "game/airplanedialog", "game/icons", "game/product", "game/diagramdialog", "game/savedialog"], function (require, exports, citydialog_1, world_1, airplanedialog_1, icons_1, product_1, diagramdialog_1, savedialog_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.test = exports.Game = exports.Parameter = void 0;
    window.onbeforeunload = function () {
        return "Do you want to exit?";
    };
    class Statistic {
        constructor() {
            this.today = {};
            this.yesterday = {};
        }
    }
    class Parameter {
        constructor() {
            this.ratePurchase = 1.125;
            this.rateSelling = 1.25;
            this.ratePriceMin = 0.66;
            this.ratePriceMax = 1.33;
            this.rateBuyAirplane = 1;
            this.rateBuyBuilding = 1;
            this.rateBuyBuildingGrowFactor = 5000;
            this.rateCostsAirplaine = 1;
            this.rateCostShop = 100;
            this.rateCostsShopMany = 1000;
            this.workerInCompany = 20;
            this.neutralStartPeople = 200;
            this.neutralProductionRate = 2;
            this.newAirportRate = 1.05;
            this.capacityShop = 5000;
            this.daysBuildBuilding = 4;
            this.costsAdvertising = 2000;
            this.numberBuildWithOneClick = 1;
            this.allAirplaneTypes = [
                { typeid: 0, model: "Airplane A", speed: 200, capacity: 200, costs: 60, buildDays: 20, buildingCosts: 20000, buildingMaterial: [0, 0, 0, 10, 0, 10, 0, 10, 0, 10, 0, 0, 0, 0, 10] },
                { typeid: 1, model: "Airplane B", speed: 210, capacity: 300, costs: 90, buildDays: 25, buildingCosts: 40000, buildingMaterial: [0, 0, 0, 20, 0, 20, 0, 20, 0, 20, 0, 0, 0, 0, 20] },
                { typeid: 2, model: "Airplane C", speed: 220, capacity: 400, costs: 150, buildDays: 35, buildingCosts: 60000, buildingMaterial: [0, 0, 0, 30, 0, 30, 0, 30, 0, 30, 0, 0, 0, 0, 30] },
                { typeid: 3, model: "Airplane D", speed: 240, capacity: 700, costs: 180, buildDays: 40, buildingCosts: 80000, buildingMaterial: [0, 0, 0, 40, 0, 40, 0, 40, 0, 40, 0, 0, 0, 0, 40] },
                { typeid: 4, model: "Airplane E", speed: 260, capacity: 1500, costs: 270, buildDays: 50, buildingCosts: 200000, buildingMaterial: [0, 0, 0, 50, 0, 50, 0, 50, 0, 50, 0, 0, 0, 0, 50] },
                { typeid: 5, model: "Airplane F", speed: 300, capacity: 3000, costs: 700, buildDays: 80, buildingCosts: 350000, buildingMaterial: [0, 0, 0, 100, 0, 100, 0, 100, 0, 100, 0, 0, 0, 0, 100] },
            ];
        }
    }
    exports.Parameter = Parameter;
    window.parameter = new Parameter();
    globalThis.parameter = new Parameter();
    parameter.allProducts = [
        new product_1.Product({ id: 0, name: "Stein", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 5 }),
        new product_1.Product({ id: 1, name: "Holz", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 4.5 }),
        new product_1.Product({ id: 2, name: "Getreide", dailyProduce: 7, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 23, distribution: 3, amountForPeople: 4 }),
        new product_1.Product({ id: 3, name: "Eisen", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 3 }),
        new product_1.Product({ id: 4, name: "Wolle", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 2.5 }),
        new product_1.Product({ id: 5, name: "Öl", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 3 }),
        new product_1.Product({ id: 6, name: "Brot", dailyProduce: 6, input1: 2, input1Amount: 2, input2: undefined, input2Amount: 0, priceProduction: 49, distribution: 2, amountForPeople: 5 }),
        new product_1.Product({ id: 7, name: "Plaste", dailyProduce: 6, input1: 5, input1Amount: 2, input2: undefined, input2Amount: 0, priceProduction: 57, distribution: 2, amountForPeople: 5 }),
        new product_1.Product({ id: 8, name: "Fleisch", dailyProduce: 2, input1: 2, input1Amount: 1, input2: undefined, input2Amount: 0, priceProduction: 109, distribution: 2, amountForPeople: 2 }),
        new product_1.Product({ id: 9, name: "Möbel", dailyProduce: 2, input1: 1, input1Amount: 0.5, input2: 3, input2Amount: 1, priceProduction: 117, distribution: 2, amountForPeople: 2 }),
        new product_1.Product({ id: 10, name: "Kleidung", dailyProduce: 1, input1: 4, input1Amount: 2, input2: undefined, input2Amount: 0, priceProduction: 286, distribution: 2, amountForPeople: 1 }),
        new product_1.Product({ id: 11, name: "Fisch", dailyProduce: 3, input1: undefined, input1Amount: undefined, input2: undefined, input2Amount: 0, priceProduction: 60, distribution: 2, amountForPeople: 2 }),
        new product_1.Product({ id: 12, name: "Apfel", dailyProduce: 4, input1: undefined, input1Amount: undefined, input2: undefined, input2Amount: 0, priceProduction: 45, distribution: 2, amountForPeople: 3 }),
        new product_1.Product({ id: 13, name: "Saft", dailyProduce: 3, input1: 12, input1Amount: 1, input2: undefined, input2Amount: 0, priceProduction: 85, distribution: 8, amountForPeople: 3 }),
        new product_1.Product({ id: 14, name: "Gold", dailyProduce: 2, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 100, distribution: 1, amountForPeople: 1 }),
        new product_1.Product({ id: 15, name: "Schmuck", dailyProduce: 2, input1: 14, input1Amount: 1, input2: undefined, input2Amount: 0, priceProduction: 184, distribution: 1, amountForPeople: 2 }),
        new product_1.Product({ id: 16, name: "Spielzeug", dailyProduce: 1, input1: 4, input1Amount: 0.5, input2: 7, input2Amount: 0.5, priceProduction: 274, distribution: 1, amountForPeople: 1 }),
        new product_1.Product({ id: 17, name: "Fahrrad", dailyProduce: 1, input1: 3, input1Amount: 1, input2: 7, input2Amount: 0.5, priceProduction: 274, distribution: 1, amountForPeople: 1 }),
        new product_1.Product({ id: 18, name: "Fischbrot", dailyProduce: 1, input1: 11, input1Amount: 1, input2: 6, input2Amount: 1, priceProduction: 382, distribution: 1, amountForPeople: 1 })
    ];
    //global.parameter=new Parametetr();
    class Game {
        constructor() {
            this.parameter = parameter;
            this.speed = 1;
            this.mapWidth = 1000;
            this.mapHeight = 600;
            this.statistic = new Statistic();
            var _this = this;
            Game.instance = this;
            this.lastUpdate = Date.now();
            this.date = new Date("Sat Jan 01 2000 00:00:00");
            citydialog_1.CityDialog.instance = undefined;
            this.nevercallthisfunction();
        }
        updateTitle() {
            try {
                document.getElementById("gamemoney").innerHTML = new Number(this.getMoney()).toLocaleString();
                document.getElementById("gamedate").innerHTML = this.date.toLocaleDateString();
                this.world.update();
            }
            catch (_a) {
                console.log("stop game");
                return;
            }
        }
        updateSize() {
            this.domWorld.style.width = (this.mapWidth + 80) + "px";
            this.domWorld.style.height = (this.mapHeight + 100) + "px";
            this.domWorld.parentNode.style.width = (this.mapWidth + 80) + "px";
            this.domWorld.parentNode.style.height = (this.mapHeight + 100) + "px";
        }
        //never call this outside the timer - then would be 2 updates
        nevercallthisfunction() {
            //var t=new Date().getTime();
            var intervall = 1000 / this.speed;
            var _this = this;
            var diff = 1000 * 60 * 60; //update always at full clock//((Date.now() - this.lastUpdate)) * 60 * 60 * this.speed;
            this.date = new Date(this.date.getTime() + diff);
            this.updateTitle();
            this.lastUpdate = Date.now();
            this.timer = setTimeout(() => {
                _this.nevercallthisfunction();
            }, intervall);
            //console.log("tooks"+(new Date().getTime()-t));
            citydialog_1.CityDialog.getInstance().update();
            airplanedialog_1.AirplaneDialog.getInstance().update();
        }
        newGame() {
            this.world = new world_1.World();
            this.world.game = this;
            this._money = 20000;
            this.world.newGame();
        }
        getMoney() {
            return this._money;
        }
        changeMoney(change, why, city = undefined) {
            this._money += change;
            if (this.statistic.today[why] === undefined)
                this.statistic.today[why] = 0;
            this.statistic.today[why] += change;
            //  console.log(change+" "+why);
        }
        render(dom) {
            var _this = this;
            dom.innerHTML = "";
            dom.style.backgroundColor = "lightblue";
            this.dom = dom;
            var sdomHeader = `
          <div style="height:15px;position:fixed;z-index:10000;background-color:lightblue;">
            Traffics- 
            <button id="game-slower"  class="mybutton">` + icons_1.Icons.minus + `</button> 
            <span id="gamedate"></span>   
            <button id="game-faster"  class="mybutton">` + icons_1.Icons.plus + `</button> 
            Money:<span id="gamemoney"></span>` + icons_1.Icons.money + `
            <button id="save-game"  class="mybutton">` + icons_1.Icons.save + `</button> 
            <button id="show-diagram"  class="mybutton">` + icons_1.Icons.diagram + `</button> 
          </div>  
        `;
            this.domHeader = document.createRange().createContextualFragment(sdomHeader).children[0];
            var sdomWorld = `
          <div id="world" style="position:absolute;top:20px;">
          </div>  
        `;
            this.domWorld = document.createRange().createContextualFragment(sdomWorld).children[0];
            this.dom.appendChild(this.domHeader);
            // var headerPlaceeholder = <any>document.createRange().createContextualFragment('<div style="height:15px"></div>').children[0]
            // this.dom.appendChild(headerPlaceeholder);
            this.dom.appendChild(this.domWorld);
            this.world.render(this.domWorld);
            this.updateSize();
            setTimeout(() => {
                _this.bindActions();
            }, 500);
        }
        bindActions() {
            var _this = this;
            document.getElementById("gamedate").addEventListener("mousedown", () => {
                console.log("down");
            });
            document.getElementById("save-game").addEventListener("click", () => {
                savedialog_1.SaveDialog.getInstance().game = this;
                savedialog_1.SaveDialog.getInstance().show();
            });
            /*   document.getElementById("debug-game").addEventListener("click", () => {
                 for (var x = 0; x < parameter.allProducts.length; x++) {
                   _this.world.cities[0].shop[x] = 5000;
                 }
                 _this._money = 1000000;
               });*/
            document.getElementById("show-diagram").addEventListener("click", () => {
                diagramdialog_1.DiagramDialog.getInstance().world = this.world;
                diagramdialog_1.DiagramDialog.getInstance().show();
            });
            document.getElementById("game-slower").addEventListener("click", () => {
                if (_this.speed === Game.temposcale[0]) {
                    _this.pause();
                    console.log("pause");
                    return;
                }
                var pos = Game.temposcale.indexOf(_this.speed);
                pos--;
                if (pos == -1)
                    return;
                _this.speed = Game.temposcale[pos];
                _this.pause();
                _this.resume();
            });
            document.getElementById("game-faster").addEventListener("click", () => {
                if (_this.isPaused()) {
                    _this.resume();
                    return;
                }
                var pos = Game.temposcale.indexOf(_this.speed);
                pos++;
                if (pos >= Game.temposcale.length) {
                    console.log("max");
                    return;
                }
                _this.speed = Game.temposcale[pos];
                _this.pause();
                _this.resume();
            });
        }
        resume() {
            if (this.timer === 0)
                this.nevercallthisfunction();
        }
        isPaused() {
            return this.timer === 0;
        }
        pause() {
            clearTimeout(this.timer);
            this.timer = 0;
        }
        destroy() {
            this.world.destroy();
            clearTimeout(this.timer);
        }
    }
    exports.Game = Game;
    Game.temposcale = [0.01, 0.5, 1, 2, 4, 8, 16, 32, 64, 128];
    function test() {
    }
    exports.test = test;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dhbWUvZ2FtZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0lBY0EsTUFBTSxDQUFDLGNBQWMsR0FBRztRQUN0QixPQUFPLHNCQUFzQixDQUFDO0lBRWhDLENBQUMsQ0FBQztJQUNGLE1BQU0sU0FBUztRQUFmO1lBQ0UsVUFBSyxHQUE4QixFQUFFLENBQUM7WUFDdEMsY0FBUyxHQUE4QixFQUFFLENBQUM7UUFDNUMsQ0FBQztLQUFBO0lBTUQsTUFBYSxTQUFTO1FBQXRCO1lBQ0UsaUJBQVksR0FBRyxLQUFLLENBQUM7WUFDckIsZ0JBQVcsR0FBRyxJQUFJLENBQUM7WUFDbkIsaUJBQVksR0FBRyxJQUFJLENBQUM7WUFDcEIsaUJBQVksR0FBRyxJQUFJLENBQUM7WUFDcEIsb0JBQWUsR0FBRyxDQUFDLENBQUM7WUFDcEIsb0JBQWUsR0FBRyxDQUFDLENBQUM7WUFDcEIsOEJBQXlCLEdBQUcsSUFBSSxDQUFDO1lBQ2pDLHVCQUFrQixHQUFHLENBQUMsQ0FBQztZQUN2QixpQkFBWSxHQUFHLEdBQUcsQ0FBQztZQUNuQixzQkFBaUIsR0FBRyxJQUFJLENBQUM7WUFDekIsb0JBQWUsR0FBRyxFQUFFLENBQUM7WUFDckIsdUJBQWtCLEdBQUcsR0FBRyxDQUFDO1lBQ3pCLDBCQUFxQixHQUFHLENBQUMsQ0FBQztZQUMxQixtQkFBYyxHQUFDLElBQUksQ0FBQztZQUNwQixpQkFBWSxHQUFDLElBQUksQ0FBQztZQUVsQixzQkFBaUIsR0FBQyxDQUFDLENBQUM7WUFDcEIscUJBQWdCLEdBQUMsSUFBSSxDQUFDO1lBQ3RCLDRCQUF1QixHQUFDLENBQUMsQ0FBQztZQUMxQixxQkFBZ0IsR0FBQztnQkFDZixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUNySixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUNySixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUN0SixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUN0SixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxNQUFNLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUN4SixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxNQUFNLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEdBQUcsQ0FBQyxFQUFDO2FBQzVKLENBQUM7UUFDTixDQUFDO0tBQUE7SUE1QkQsOEJBNEJDO0lBQ0QsTUFBTSxDQUFDLFNBQVMsR0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDO0lBQ2pDLFVBQVUsQ0FBQyxTQUFTLEdBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQztJQUdyQyxTQUFTLENBQUMsV0FBVyxHQUFFO1FBQ3JCLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEVBQUUsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUUsQ0FBQztRQUN4TCxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFHLGVBQWUsRUFBRSxFQUFFLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUMsR0FBRyxFQUFFLENBQUM7UUFDMUwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUUsRUFBRSxFQUFDLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQzFMLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUcsQ0FBQztRQUN4TCxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFHLGVBQWUsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBQyxlQUFlLEVBQUMsR0FBRyxFQUFHLENBQUM7UUFDMUwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUMsRUFBRSxFQUFHLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQ3JMLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUcsQ0FBQztRQUM5SyxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUMsQ0FBQyxFQUFFLENBQUM7UUFDakwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQ25MLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEdBQUcsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUcsQ0FBQztRQUM1SyxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFHLGVBQWUsRUFBRSxHQUFHLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBQyxlQUFlLEVBQUMsQ0FBQyxFQUFHLENBQUM7UUFDdEwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUUsRUFBRSxFQUFDLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQy9MLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFFLEVBQUUsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBQyxDQUFDLEVBQUUsQ0FBQztRQUNoTSxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBRSxFQUFFLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUMsQ0FBQyxFQUFFLENBQUM7UUFDaEwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENB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LEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFxSzlELFNBQWdCLElBQUk7SUFFcEIsQ0FBQztJQUZELG9CQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2l0eURpYWxvZyB9IGZyb20gXCJnYW1lL2NpdHlkaWFsb2dcIjtcclxuaW1wb3J0IHsgV29ybGQgfSBmcm9tIFwiZ2FtZS93b3JsZFwiO1xyXG5pbXBvcnQgeyBQYW5lbCB9IGZyb20gXCJqYXNzaWpzL3VpL1BhbmVsXCI7XHJcbmltcG9ydCB3aW5kb3dzIGZyb20gXCJqYXNzaWpzL2Jhc2UvV2luZG93c1wiO1xyXG5pbXBvcnQgeyBBaXJwbGFuZURpYWxvZyB9IGZyb20gXCJnYW1lL2FpcnBsYW5lZGlhbG9nXCI7XHJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcImdhbWUvaWNvbnNcIjtcclxuaW1wb3J0IHsgQ29tcGFueSB9IGZyb20gXCJnYW1lL2NvbXBhbnlcIjtcclxuaW1wb3J0IHsgQWlycGxhbmUgfSBmcm9tIFwiZ2FtZS9haXJwbGFuZVwiO1xyXG5pbXBvcnQgeyBDaXR5IH0gZnJvbSBcImdhbWUvY2l0eVwiO1xyXG5pbXBvcnQgeyBSb3V0ZSB9IGZyb20gXCJnYW1lL3JvdXRlXCI7XHJcbmltcG9ydCB7ICBQcm9kdWN0IH0gZnJvbSBcImdhbWUvcHJvZHVjdFwiO1xyXG5pbXBvcnQgeyBEaWFncmFtRGlhbG9nIH0gZnJvbSBcImdhbWUvZGlhZ3JhbWRpYWxvZ1wiO1xyXG5pbXBvcnQgeyBTYXZlRGlhbG9nIH0gZnJvbSBcImdhbWUvc2F2ZWRpYWxvZ1wiO1xyXG5cclxud2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBcIkRvIHlvdSB3YW50IHRvIGV4aXQ/XCI7XHJcblxyXG59O1xyXG5jbGFzcyBTdGF0aXN0aWMge1xyXG4gIHRvZGF5OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbiAgeWVzdGVyZGF5OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbn1cclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICB2YXIgcGFyYW1ldGVyOlBhcmFtZXRlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFtZXRlciB7XHJcbiAgcmF0ZVB1cmNoYXNlID0gMS4xMjU7XHJcbiAgcmF0ZVNlbGxpbmcgPSAxLjI1O1xyXG4gIHJhdGVQcmljZU1pbiA9IDAuNjY7XHJcbiAgcmF0ZVByaWNlTWF4ID0gMS4zMztcclxuICByYXRlQnV5QWlycGxhbmUgPSAxO1xyXG4gIHJhdGVCdXlCdWlsZGluZyA9IDE7XHJcbiAgcmF0ZUJ1eUJ1aWxkaW5nR3Jvd0ZhY3RvciA9IDUwMDA7XHJcbiAgcmF0ZUNvc3RzQWlycGxhaW5lID0gMTtcclxuICByYXRlQ29zdFNob3AgPSAxMDA7XHJcbiAgcmF0ZUNvc3RzU2hvcE1hbnkgPSAxMDAwO1xyXG4gIHdvcmtlckluQ29tcGFueSA9IDIwO1xyXG4gIG5ldXRyYWxTdGFydFBlb3BsZSA9IDIwMDtcclxuICBuZXV0cmFsUHJvZHVjdGlvblJhdGUgPSAyO1xyXG4gIG5ld0FpcnBvcnRSYXRlPTEuMDU7XHJcbiAgY2FwYWNpdHlTaG9wPTUwMDA7XHJcbiAgYWxsUHJvZHVjdHM6UHJvZHVjdFtdO1xyXG4gIGRheXNCdWlsZEJ1aWxkaW5nPTQ7XHJcbiAgY29zdHNBZHZlcnRpc2luZz0yMDAwO1xyXG4gIG51bWJlckJ1aWxkV2l0aE9uZUNsaWNrPTE7XHJcbiAgYWxsQWlycGxhbmVUeXBlcz1bXHJcbiAgICB7dHlwZWlkOjAsbW9kZWw6XCJBaXJwbGFuZSBBXCIsc3BlZWQ6MjAwLGNhcGFjaXR5OjIwMCwgY29zdHM6NjAsYnVpbGREYXlzOjIwLGJ1aWxkaW5nQ29zdHM6MjAwMDAsYnVpbGRpbmdNYXRlcmlhbDpbMCwwLDAsMTAsMCwxMCwwLDEwLDAsMTAsMCwwLDAsMCwxMF19LFxyXG4gICAge3R5cGVpZDoxLG1vZGVsOlwiQWlycGxhbmUgQlwiLHNwZWVkOjIxMCxjYXBhY2l0eTozMDAsIGNvc3RzOjkwLGJ1aWxkRGF5czoyNSxidWlsZGluZ0Nvc3RzOjQwMDAwLGJ1aWxkaW5nTWF0ZXJpYWw6WzAsMCwwLDIwLDAsMjAsMCwyMCwwLDIwLDAsMCwwLDAsMjBdfSxcclxuICAgIHt0eXBlaWQ6Mixtb2RlbDpcIkFpcnBsYW5lIENcIixzcGVlZDoyMjAsY2FwYWNpdHk6NDAwLCBjb3N0czoxNTAsYnVpbGREYXlzOjM1LGJ1aWxkaW5nQ29zdHM6NjAwMDAsYnVpbGRpbmdNYXRlcmlhbDpbMCwwLDAsMzAsMCwzMCwwLDMwLDAsMzAsMCwwLDAsMCwzMF19LFxyXG4gICAge3R5cGVpZDozLG1vZGVsOlwiQWlycGxhbmUgRFwiLHNwZWVkOjI0MCxjYXBhY2l0eTo3MDAsIGNvc3RzOjE4MCxidWlsZERheXM6NDAsYnVpbGRpbmdDb3N0czo4MDAwMCxidWlsZGluZ01hdGVyaWFsOlswLDAsMCw0MCwwLDQwLDAsNDAsMCw0MCwwLDAsMCwwLDQwXX0sXHJcbiAgICB7dHlwZWlkOjQsbW9kZWw6XCJBaXJwbGFuZSBFXCIsc3BlZWQ6MjYwLGNhcGFjaXR5OjE1MDAsIGNvc3RzOjI3MCxidWlsZERheXM6NTAsYnVpbGRpbmdDb3N0czoyMDAwMDAsYnVpbGRpbmdNYXRlcmlhbDpbMCwwLDAsNTAsMCw1MCwwLDUwLDAsNTAsMCwwLDAsMCw1MF19LFxyXG4gICAge3R5cGVpZDo1LG1vZGVsOlwiQWlycGxhbmUgRlwiLHNwZWVkOjMwMCxjYXBhY2l0eTozMDAwLCBjb3N0czo3MDAsYnVpbGREYXlzOjgwLGJ1aWxkaW5nQ29zdHM6MzUwMDAwLGJ1aWxkaW5nTWF0ZXJpYWw6WzAsMCwwLDEwMCwwLDEwMCwwLDEwMCwwLDEwMCwwLDAsMCwwLDEwMF19LFxyXG4gICAgXTtcclxufVxyXG53aW5kb3cucGFyYW1ldGVyPW5ldyBQYXJhbWV0ZXIoKTtcclxuZ2xvYmFsVGhpcy5wYXJhbWV0ZXI9bmV3IFBhcmFtZXRlcigpO1xyXG5cclxuXHJcbnBhcmFtZXRlci5hbGxQcm9kdWN0cz0gW1xyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDAsIG5hbWU6IFwiU3RlaW5cIiwgZGFpbHlQcm9kdWNlOiA1LCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCAgcHJpY2VQcm9kdWN0aW9uOiAzMiwgIGRpc3RyaWJ1dGlvbjogMyxhbW91bnRGb3JQZW9wbGU6NSB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxLCBuYW1lOiBcIkhvbHpcIiwgZGFpbHlQcm9kdWNlOiA1LCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCAgcHJpY2VQcm9kdWN0aW9uOiAzMiwgIGRpc3RyaWJ1dGlvbjogMyAsYW1vdW50Rm9yUGVvcGxlOjQuNSB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAyLCBuYW1lOiBcIkdldHJlaWRlXCIsIGRhaWx5UHJvZHVjZTogNywgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjogMjMsZGlzdHJpYnV0aW9uOiAzLGFtb3VudEZvclBlb3BsZTo0ICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAzLCBuYW1lOiBcIkVpc2VuXCIsIGRhaWx5UHJvZHVjZTogNSwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjogMzIsIGRpc3RyaWJ1dGlvbjogMyxhbW91bnRGb3JQZW9wbGU6MyAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogNCwgbmFtZTogXCJXb2xsZVwiLCBkYWlseVByb2R1Y2U6IDUsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDMyLCBkaXN0cmlidXRpb246IDMsYW1vdW50Rm9yUGVvcGxlOjIuNSAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogNSwgbmFtZTogXCLDlmxcIiwgZGFpbHlQcm9kdWNlOiA1LCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCAgcHJpY2VQcm9kdWN0aW9uOjMyLCAgZGlzdHJpYnV0aW9uOiAzLGFtb3VudEZvclBlb3BsZTozICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiA2LCBuYW1lOiBcIkJyb3RcIiwgZGFpbHlQcm9kdWNlOiA2LCBpbnB1dDE6IDIsIGlucHV0MUFtb3VudDogMiwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgcHJpY2VQcm9kdWN0aW9uOiA0OSwgZGlzdHJpYnV0aW9uOiAyLGFtb3VudEZvclBlb3BsZTo1ICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiA3LCBuYW1lOiBcIlBsYXN0ZVwiLCBkYWlseVByb2R1Y2U6IDYsIGlucHV0MTogNSwgaW5wdXQxQW1vdW50OiAyLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCBwcmljZVByb2R1Y3Rpb246IDU3LCAgZGlzdHJpYnV0aW9uOiAyICxhbW91bnRGb3JQZW9wbGU6NSB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiA4LCBuYW1lOiBcIkZsZWlzY2hcIiwgZGFpbHlQcm9kdWNlOiAyLCBpbnB1dDE6IDIsIGlucHV0MUFtb3VudDogMSwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjogMTA5LCBkaXN0cmlidXRpb246IDIsYW1vdW50Rm9yUGVvcGxlOjIgIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDksIG5hbWU6IFwiTcO2YmVsXCIsIGRhaWx5UHJvZHVjZTogMiwgaW5wdXQxOiAxLCBpbnB1dDFBbW91bnQ6IDAuNSwgaW5wdXQyOiAzLCBpbnB1dDJBbW91bnQ6IDEsICBwcmljZVByb2R1Y3Rpb246IDExNywgIGRpc3RyaWJ1dGlvbjogMixhbW91bnRGb3JQZW9wbGU6MiAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMTAsIG5hbWU6IFwiS2xlaWR1bmdcIiwgZGFpbHlQcm9kdWNlOiAxLCBpbnB1dDE6IDQsIGlucHV0MUFtb3VudDogMiwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjogMjg2LCAgZGlzdHJpYnV0aW9uOiAyLGFtb3VudEZvclBlb3BsZToxICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxMSwgbmFtZTogXCJGaXNjaFwiLCBkYWlseVByb2R1Y2U6IDMsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IHVuZGVmaW5lZCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgcHJpY2VQcm9kdWN0aW9uOiA2MCxkaXN0cmlidXRpb246IDIsYW1vdW50Rm9yUGVvcGxlOjIgIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDEyLCBuYW1lOiBcIkFwZmVsXCIsIGRhaWx5UHJvZHVjZTogNCwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogdW5kZWZpbmVkLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLHByaWNlUHJvZHVjdGlvbjogNDUsICBkaXN0cmlidXRpb246IDIgLGFtb3VudEZvclBlb3BsZTozIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDEzLCBuYW1lOiBcIlNhZnRcIiwgZGFpbHlQcm9kdWNlOiAzLCBpbnB1dDE6IDEyLCBpbnB1dDFBbW91bnQ6IDEsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAscHJpY2VQcm9kdWN0aW9uOiA4NSwgIGRpc3RyaWJ1dGlvbjogOCAsYW1vdW50Rm9yUGVvcGxlOjMgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMTQsIG5hbWU6IFwiR29sZFwiLCBkYWlseVByb2R1Y2U6IDIsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDEwMCwgIGRpc3RyaWJ1dGlvbjogMSAsYW1vdW50Rm9yUGVvcGxlOiAxfSksIFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDE1LCBuYW1lOiBcIlNjaG11Y2tcIiwgZGFpbHlQcm9kdWNlOiAyLCBpbnB1dDE6IDE0LCBpbnB1dDFBbW91bnQ6IDEsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDE4NCwgZGlzdHJpYnV0aW9uOiAxICxhbW91bnRGb3JQZW9wbGU6MiB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxNiwgbmFtZTogXCJTcGllbHpldWdcIiwgZGFpbHlQcm9kdWNlOiAxLCBpbnB1dDE6IDQsIGlucHV0MUFtb3VudDogMC41LCBpbnB1dDI6IDcsIGlucHV0MkFtb3VudDogMC41LCAgcHJpY2VQcm9kdWN0aW9uOiAyNzQsICBkaXN0cmlidXRpb246IDEsYW1vdW50Rm9yUGVvcGxlOjEgIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDE3LCBuYW1lOiBcIkZhaHJyYWRcIiwgZGFpbHlQcm9kdWNlOiAxLCBpbnB1dDE6IDMsIGlucHV0MUFtb3VudDogMSwgaW5wdXQyOiA3LCBpbnB1dDJBbW91bnQ6IDAuNSwgIHByaWNlUHJvZHVjdGlvbjogMjc0LCAgZGlzdHJpYnV0aW9uOiAxICxhbW91bnRGb3JQZW9wbGU6MSB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxOCwgbmFtZTogXCJGaXNjaGJyb3RcIiwgZGFpbHlQcm9kdWNlOiAxLCBpbnB1dDE6IDExLCBpbnB1dDFBbW91bnQ6IDEsIGlucHV0MjogNiwgaW5wdXQyQW1vdW50OiAxLCAgcHJpY2VQcm9kdWN0aW9uOiAzODIsICBkaXN0cmlidXRpb246IDEgLGFtb3VudEZvclBlb3BsZToxIH0pXHJcbl07XHJcbi8vZ2xvYmFsLnBhcmFtZXRlcj1uZXcgUGFyYW1ldGV0cigpO1xyXG5leHBvcnQgY2xhc3MgR2FtZSB7XHJcbiAgcGFyYW1ldGVyPXBhcmFtZXRlcjtcclxuICBzdGF0aWMgaW5zdGFuY2U6IEdhbWU7XHJcbiAgZG9tOiBIVE1MRWxlbWVudDtcclxuICB3b3JsZDogV29ybGQ7XHJcbiAgZG9tSGVhZGVyOiBIVE1MRGl2RWxlbWVudDtcclxuICBkb21Xb3JsZDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgX21vbmV5O1xyXG4gIHZlcnNpb246XCIxLjBcIjtcclxuICBkYXRlOiBEYXRlO1xyXG4gIGxhc3RVcGRhdGU6IG51bWJlcjtcclxuICBzcGVlZDogbnVtYmVyID0gMTtcclxuICBwYXVzZWRTcGVlZDogbnVtYmVyO1xyXG4gIHRpbWVyO1xyXG4gIG1hcFdpZHRoID0gMTAwMDtcclxuICBtYXBIZWlnaHQgPSA2MDA7XHJcbiAgc3RhdGlzdGljID0gbmV3IFN0YXRpc3RpYygpO1xyXG4gIHN0YXRpYyB0ZW1wb3NjYWxlID0gWzAuMDEsIDAuNSwgMSwgMiwgNCwgOCwgMTYsIDMyLCA2NCwgMTI4XVxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgIEdhbWUuaW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMubGFzdFVwZGF0ZSA9IERhdGUubm93KCk7XHJcbiAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZShcIlNhdCBKYW4gMDEgMjAwMCAwMDowMDowMFwiKTtcclxuICAgIENpdHlEaWFsb2cuaW5zdGFuY2UgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLm5ldmVyY2FsbHRoaXNmdW5jdGlvbigpO1xyXG4gIH1cclxuICBwdWJsaWMgdXBkYXRlVGl0bGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVtb25leVwiKS5pbm5lckhUTUwgPSBuZXcgTnVtYmVyKHRoaXMuZ2V0TW9uZXkoKSkudG9Mb2NhbGVTdHJpbmcoKTtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lZGF0ZVwiKS5pbm5lckhUTUwgPSB0aGlzLmRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgIHRoaXMud29ybGQudXBkYXRlKCk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgY29uc29sZS5sb2coXCJzdG9wIGdhbWVcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbiAgdXBkYXRlU2l6ZSgpIHtcclxuICAgIHRoaXMuZG9tV29ybGQuc3R5bGUud2lkdGggPSAodGhpcy5tYXBXaWR0aCArIDgwKSArIFwicHhcIjtcclxuICAgIHRoaXMuZG9tV29ybGQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMubWFwSGVpZ2h0ICsgMTAwKSArIFwicHhcIjtcclxuICAgICg8SFRNTEVsZW1lbnQ+dGhpcy5kb21Xb3JsZC5wYXJlbnROb2RlKS5zdHlsZS53aWR0aCA9ICh0aGlzLm1hcFdpZHRoICsgODApICsgXCJweFwiO1xyXG4gICAgKDxIVE1MRWxlbWVudD50aGlzLmRvbVdvcmxkLnBhcmVudE5vZGUpLnN0eWxlLmhlaWdodCA9ICh0aGlzLm1hcEhlaWdodCArIDEwMCkgKyBcInB4XCI7XHJcblxyXG4gIH1cclxuICAvL25ldmVyIGNhbGwgdGhpcyBvdXRzaWRlIHRoZSB0aW1lciAtIHRoZW4gd291bGQgYmUgMiB1cGRhdGVzXHJcbiAgcHJpdmF0ZSBuZXZlcmNhbGx0aGlzZnVuY3Rpb24oKSB7XHJcbiAgICAvL3ZhciB0PW5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgdmFyIGludGVydmFsbCA9IDEwMDAgLyB0aGlzLnNwZWVkO1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgIHZhciBkaWZmID0gMTAwMCAqIDYwICogNjA7Ly91cGRhdGUgYWx3YXlzIGF0IGZ1bGwgY2xvY2svLygoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZSkpICogNjAgKiA2MCAqIHRoaXMuc3BlZWQ7XHJcbiAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGUuZ2V0VGltZSgpICsgZGlmZik7XHJcbiAgICB0aGlzLnVwZGF0ZVRpdGxlKCk7XHJcbiAgICB0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xyXG4gICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBfdGhpcy5uZXZlcmNhbGx0aGlzZnVuY3Rpb24oKTtcclxuXHJcbiAgICB9LCBpbnRlcnZhbGwpO1xyXG4gICAgLy9jb25zb2xlLmxvZyhcInRvb2tzXCIrKG5ldyBEYXRlKCkuZ2V0VGltZSgpLXQpKTtcclxuICAgIENpdHlEaWFsb2cuZ2V0SW5zdGFuY2UoKS51cGRhdGUoKTtcclxuICAgIEFpcnBsYW5lRGlhbG9nLmdldEluc3RhbmNlKCkudXBkYXRlKCk7XHJcblxyXG4gIH1cclxuICBuZXdHYW1lKCkge1xyXG4gICAgdGhpcy53b3JsZCA9IG5ldyBXb3JsZCgpO1xyXG4gICAgdGhpcy53b3JsZC5nYW1lID0gdGhpcztcclxuICAgIHRoaXMuX21vbmV5ID0gMjAwMDA7XHJcbiAgICB0aGlzLndvcmxkLm5ld0dhbWUoKTtcclxuICB9XHJcbiAgZ2V0TW9uZXkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbW9uZXk7XHJcbiAgfVxyXG4gIGNoYW5nZU1vbmV5KGNoYW5nZTogbnVtYmVyLCB3aHk6IHN0cmluZywgY2l0eTogQ2l0eSA9IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy5fbW9uZXkgKz0gY2hhbmdlO1xyXG4gICAgaWYgKHRoaXMuc3RhdGlzdGljLnRvZGF5W3doeV0gPT09IHVuZGVmaW5lZClcclxuICAgICAgdGhpcy5zdGF0aXN0aWMudG9kYXlbd2h5XSA9IDA7XHJcbiAgICB0aGlzLnN0YXRpc3RpYy50b2RheVt3aHldICs9IGNoYW5nZTtcclxuICAgIC8vICBjb25zb2xlLmxvZyhjaGFuZ2UrXCIgXCIrd2h5KTtcclxuICB9XHJcbiAgcmVuZGVyKGRvbTogSFRNTEVsZW1lbnQpIHtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICBkb20uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGRvbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImxpZ2h0Ymx1ZVwiO1xyXG4gICAgdGhpcy5kb20gPSBkb207XHJcbiAgICB2YXIgc2RvbUhlYWRlciA9IGBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6MTVweDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwMDAwO2JhY2tncm91bmQtY29sb3I6bGlnaHRibHVlO1wiPlxyXG4gICAgICAgICAgICBUcmFmZmljcy0gXHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJnYW1lLXNsb3dlclwiICBjbGFzcz1cIm15YnV0dG9uXCI+YCsgSWNvbnMubWludXMgKyBgPC9idXR0b24+IFxyXG4gICAgICAgICAgICA8c3BhbiBpZD1cImdhbWVkYXRlXCI+PC9zcGFuPiAgIFxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiZ2FtZS1mYXN0ZXJcIiAgY2xhc3M9XCJteWJ1dHRvblwiPmArIEljb25zLnBsdXMgKyBgPC9idXR0b24+IFxyXG4gICAgICAgICAgICBNb25leTo8c3BhbiBpZD1cImdhbWVtb25leVwiPjwvc3Bhbj5gKyBJY29ucy5tb25leSArIGBcclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInNhdmUtZ2FtZVwiICBjbGFzcz1cIm15YnV0dG9uXCI+YCsgSWNvbnMuc2F2ZSArIGA8L2J1dHRvbj4gXHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJzaG93LWRpYWdyYW1cIiAgY2xhc3M9XCJteWJ1dHRvblwiPmArIEljb25zLmRpYWdyYW0gKyBgPC9idXR0b24+IFxyXG4gICAgICAgICAgPC9kaXY+ICBcclxuICAgICAgICBgO1xyXG4gICAgdGhpcy5kb21IZWFkZXIgPSA8YW55PmRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHNkb21IZWFkZXIpLmNoaWxkcmVuWzBdO1xyXG5cclxuICAgIHZhciBzZG9tV29ybGQgPSBgXHJcbiAgICAgICAgICA8ZGl2IGlkPVwid29ybGRcIiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDoyMHB4O1wiPlxyXG4gICAgICAgICAgPC9kaXY+ICBcclxuICAgICAgICBgO1xyXG5cclxuICAgIHRoaXMuZG9tV29ybGQgPSA8YW55PmRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHNkb21Xb3JsZCkuY2hpbGRyZW5bMF07XHJcbiAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLmRvbUhlYWRlcik7XHJcbiAgICAvLyB2YXIgaGVhZGVyUGxhY2VlaG9sZGVyID0gPGFueT5kb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCgnPGRpdiBzdHlsZT1cImhlaWdodDoxNXB4XCI+PC9kaXY+JykuY2hpbGRyZW5bMF1cclxuICAgIC8vIHRoaXMuZG9tLmFwcGVuZENoaWxkKGhlYWRlclBsYWNlZWhvbGRlcik7XHJcbiAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLmRvbVdvcmxkKTtcclxuICAgIHRoaXMud29ybGQucmVuZGVyKHRoaXMuZG9tV29ybGQpO1xyXG4gICAgdGhpcy51cGRhdGVTaXplKCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIF90aGlzLmJpbmRBY3Rpb25zKCk7XHJcbiAgICB9LCA1MDApO1xyXG4gIH1cclxuICBiaW5kQWN0aW9ucygpIHtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVkYXRlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImRvd25cIik7XHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2F2ZS1nYW1lXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIFNhdmVEaWFsb2cuZ2V0SW5zdGFuY2UoKS5nYW1lPXRoaXM7XHJcbiAgICAgIFNhdmVEaWFsb2cuZ2V0SW5zdGFuY2UoKS5zaG93KCk7XHJcbiAgICB9KTtcclxuICAgXHJcbiAvKiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidWctZ2FtZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHBhcmFtZXRlci5hbGxQcm9kdWN0cy5sZW5ndGg7IHgrKykge1xyXG4gICAgICAgIF90aGlzLndvcmxkLmNpdGllc1swXS5zaG9wW3hdID0gNTAwMDtcclxuICAgICAgfVxyXG4gICAgICBfdGhpcy5fbW9uZXkgPSAxMDAwMDAwO1xyXG4gICAgfSk7Ki9cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvdy1kaWFncmFtXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIERpYWdyYW1EaWFsb2cuZ2V0SW5zdGFuY2UoKS53b3JsZCA9IHRoaXMud29ybGQ7XHJcbiAgICAgIERpYWdyYW1EaWFsb2cuZ2V0SW5zdGFuY2UoKS5zaG93KCk7XHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZS1zbG93ZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKF90aGlzLnNwZWVkID09PSBHYW1lLnRlbXBvc2NhbGVbMF0pIHtcclxuICAgICAgICBfdGhpcy5wYXVzZSgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwicGF1c2VcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBwb3MgPSBHYW1lLnRlbXBvc2NhbGUuaW5kZXhPZihfdGhpcy5zcGVlZCk7XHJcbiAgICAgIHBvcy0tO1xyXG4gICAgICBpZiAocG9zID09IC0xKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgX3RoaXMuc3BlZWQgPSBHYW1lLnRlbXBvc2NhbGVbcG9zXTtcclxuICAgICAgX3RoaXMucGF1c2UoKTtcclxuICAgICAgX3RoaXMucmVzdW1lKCk7XHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZS1mYXN0ZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKF90aGlzLmlzUGF1c2VkKCkpIHtcclxuICAgICAgICBfdGhpcy5yZXN1bWUoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdmFyIHBvcyA9IEdhbWUudGVtcG9zY2FsZS5pbmRleE9mKF90aGlzLnNwZWVkKTtcclxuICAgICAgcG9zKys7XHJcbiAgICAgIGlmIChwb3MgPj0gR2FtZS50ZW1wb3NjYWxlLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibWF4XCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBfdGhpcy5zcGVlZCA9IEdhbWUudGVtcG9zY2FsZVtwb3NdO1xyXG4gICAgICBfdGhpcy5wYXVzZSgpO1xyXG4gICAgICBfdGhpcy5yZXN1bWUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICByZXN1bWUoKSB7XHJcbiAgICBpZiAodGhpcy50aW1lciA9PT0gMClcclxuICAgICAgdGhpcy5uZXZlcmNhbGx0aGlzZnVuY3Rpb24oKTtcclxuICB9XHJcbiAgaXNQYXVzZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50aW1lciA9PT0gMDtcclxuICB9XHJcbiAgcGF1c2UoKSB7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICB0aGlzLnRpbWVyID0gMDtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLndvcmxkLmRlc3Ryb3koKTtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZXN0KCkge1xyXG5cclxufVxyXG4iXX0=