{"version":3,"file":"tests-server.js","sourceRoot":"","sources":["../tests/registry.js","../tests/remote/T.ts","../tests/remote/TestBigData.ts","../tests/remote/TestCustomer.ts","../tests/remote/TestOrder.ts","../tests/remote/TestOrderDetails.ts","../tests/remote/TestServerfile.ts","../tests/remote/TestTransaction.ts","../tests/modul.ts"],"names":[],"mappings":"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","sourcesContent":["//this file is autogenerated don't modify\ndefine(\"tests/registry\",[\"require\"], function(require) {\n return {\n  default: {\n\t\"tests/remote/T.ts\": {\n\t\t\"date\": 1750536496065.261,\n\t\t\"tests.remote.T\": {}\n\t},\n\t\"tests/remote/TestBigData.ts\": {\n\t\t\"date\": 1656620694000,\n\t\t\"tests.TestBigData\": {\n\t\t\t\"$DBObject\": [],\n\t\t\t\"@members\": {\n\t\t\t\t\"id\": {\n\t\t\t\t\t\"PrimaryGeneratedColumn\": []\n\t\t\t\t},\n\t\t\t\t\"name\": {\n\t\t\t\t\t\"Column\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"nullable\": true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"name2\": {\n\t\t\t\t\t\"Column\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"nullable\": true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"number1\": {\n\t\t\t\t\t\"Column\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"nullable\": true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"number2\": {\n\t\t\t\t\t\"Column\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"nullable\": true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"tests/remote/TestCustomer.ts\": {\n\t\t\"date\": 1656073036000,\n\t\t\"tests.TestCustomer\": {\n\t\t\t\"$ParentRights\": [\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\": \"TestCustomers\",\n\t\t\t\t\t\t\"sqlToCheck\": \"me.id>=:i1 and me.id<=:i2\",\n\t\t\t\t\t\t\"description\": {\n\t\t\t\t\t\t\t\"text\": \"TestCustomer\",\n\t\t\t\t\t\t\t\"i1\": \"from\",\n\t\t\t\t\t\t\t\"i2\": \"to\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"$DBObject\": [],\n\t\t\t\"@members\": {\n\t\t\t\t\"id\": {\n\t\t\t\t\t\"PrimaryColumn\": []\n\t\t\t\t},\n\t\t\t\t\"name\": {\n\t\t\t\t\t\"Column\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"nullable\": true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"orders\": {\n\t\t\t\t\t\"OneToMany\": [\n\t\t\t\t\t\t\"function\",\n\t\t\t\t\t\t\"function\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"tests/remote/TestOrder.ts\": {\n\t\t\"date\": 1656073024000,\n\t\t\"tests.TestOrder\": {\n\t\t\t\"$DBObject\": [],\n\t\t\t\"@members\": {\n\t\t\t\t\"id\": {\n\t\t\t\t\t\"PrimaryColumn\": []\n\t\t\t\t},\n\t\t\t\t\"customer\": {\n\t\t\t\t\t\"$CheckParentRight\": [],\n\t\t\t\t\t\"ManyToOne\": [\n\t\t\t\t\t\t\"function\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"details\": {\n\t\t\t\t\t\"OneToMany\": [\n\t\t\t\t\t\t\"function\",\n\t\t\t\t\t\t\"function\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"tests/remote/TestOrderDetails.ts\": {\n\t\t\"date\": 1656073238000,\n\t\t\"tests.TestOrderDetails\": {\n\t\t\t\"$DBObject\": [],\n\t\t\t\"@members\": {\n\t\t\t\t\"id\": {\n\t\t\t\t\t\"PrimaryColumn\": []\n\t\t\t\t},\n\t\t\t\t\"Order\": {\n\t\t\t\t\t\"$CheckParentRight\": [],\n\t\t\t\t\t\"ManyToOne\": [\n\t\t\t\t\t\t\"function\",\n\t\t\t\t\t\t\"function\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"tests/remote/TestServerfile.ts\": {\n\t\t\"date\": 1624999038000\n\t},\n\t\"tests/remote/TestTransaction.ts\": {\n\t\t\"date\": 1750793006036.389,\n\t\t\"tests.remote.TransactionTest\": {\n\t\t\t\"@members\": {\n\t\t\t\t\"product\": {\n\t\t\t\t\t\"UseServer\": []\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n }\n});","import { $Class } from \"jassijs/remote/Registry\";\nimport { Context, RemoteObject } from \"jassijs/remote/RemoteObject\";\nimport { Server } from \"jassijs/remote/Server\";\n\n@$Class(\"tests.remote.T\")\nexport class T extends RemoteObject{\n    //this is a sample remote function\n    public async sayHello(name: string,context: Context = undefined) { \n        if (!context?.isServer) {\n            return await RemoteObject.call(this, this.sayHello, name,context);\n        } else {\n            //@ts-ignore\n            var H=await import(\"Hallo\");\n            return \"Hello \"+name+H.test();  //this would be execute on server  \n        }\n    }\n}\nexport async function test(){\n     await new Server().saveFile(\"Hallo.ts\",\"export class Hallo{};export function test(){return 2 };\");\n    console.log(await new T().sayHello(\"Kurt\"));\n}\n\nexport async function test2(){\n   \n       \n    \n}","import { $DBObject, DBObject } from \"jassijs/remote/DBObject\";\r\nimport { $Class } from \"jassijs/remote/Registry\";\r\nimport { JoinColumn, JoinTable, Entity, PrimaryColumn,PrimaryGeneratedColumn, Column, ManyToMany, ManyToOne, OneToMany, OneToOne } from \"jassijs/util/DatabaseSchema\";\r\n\r\n\r\n@$DBObject()\r\n@$Class(\"tests.TestBigData\")\r\nexport class TestBigData extends DBObject {\r\n    @PrimaryGeneratedColumn()\r\n    declare id: number;\r\n    constructor() {\r\n        super();\r\n    }\r\n    @Column({\tnullable: true})\r\n    name: string;\r\n    @Column({\tnullable: true})\r\n    name2: string;\r\n    @Column({\tnullable: true})\r\n    number1: number;\r\n    @Column({\tnullable: true})\r\n    number2: number;\r\n    \r\n}","import { TestOrder } from \"tests/remote/TestOrder\";\nimport { DBObject, $DBObject } from \"jassijs/remote/DBObject\";\nimport { $Class } from \"jassijs/remote/Registry\";\nimport { Entity, PrimaryColumn, Column, OneToOne, ManyToMany, ManyToOne, OneToMany, JoinColumn, JoinTable } from \"jassijs/util/DatabaseSchema\";\nimport { $DBObjectQuery } from \"jassijs/remote/DBObjectQuery\";\nimport { $ParentRights } from \"jassijs/remote/security/Rights\";\n@$ParentRights([{ name: \"TestCustomers\", sqlToCheck: \"me.id>=:i1 and me.id<=:i2\",\n        description: {\n            text: \"TestCustomer\",\n            i1: \"from\",\n            i2: \"to\"\n        } }])\n@$DBObject()\n@$Class(\"tests.TestCustomer\")\nexport class TestCustomer extends DBObject {\n    @PrimaryColumn()\n    declare id: number;\n    constructor() {\n        super();\n    }\n    @Column({\tnullable: true})\n    name: string;\n    @OneToMany(type => TestOrder,order=>order.customer)\n    orders: TestOrder[];\n}\nexport async function test() {\n}\n;\n","import { TestOrderDetails } from \"tests/remote/TestOrderDetails\";\nimport { TestCustomer } from \"tests/remote/TestCustomer\";\nimport { DBObject, $DBObject } from \"jassijs/remote/DBObject\";\nimport { $Class } from \"jassijs/remote/Registry\";\nimport { Entity, PrimaryColumn, Column, OneToOne, ManyToMany, ManyToOne, OneToMany, JoinColumn, JoinTable } from \"jassijs/util/DatabaseSchema\";\nimport { $DBObjectQuery } from \"jassijs/remote/DBObjectQuery\";\nimport { $CheckParentRight } from \"jassijs/remote/security/Rights\";\n@$DBObject()\n@$Class(\"tests.TestOrder\")\nexport class TestOrder extends DBObject {\n    @PrimaryColumn()\n    declare id: number;\n    constructor() {\n        super();\n    }\n    @$CheckParentRight()\n    @ManyToOne(type => TestCustomer)\n    customer: TestCustomer; \n    @OneToMany(type => TestOrderDetails,e=>e.Order)\n    details: TestOrderDetails[];\n}\nexport async function test() {\n}\n;\n","import { TestOrder } from \"tests/remote/TestOrder\";\nimport { DBObject, $DBObject } from \"jassijs/remote/DBObject\";\nimport { $Class } from \"jassijs/remote/Registry\";\nimport { Entity, PrimaryColumn, Column, OneToOne, ManyToMany, ManyToOne, OneToMany, JoinColumn, JoinTable } from \"jassijs/util/DatabaseSchema\";\nimport { $DBObjectQuery } from \"jassijs/remote/DBObjectQuery\";\nimport { $CheckParentRight } from \"jassijs/remote/security/Rights\";\n@$DBObject()\n@$Class(\"tests.TestOrderDetails\")\nexport class TestOrderDetails extends DBObject {\n    @PrimaryColumn()\n    declare id: number;\n    constructor() {\n        super(); \n    }\n    @$CheckParentRight()\n    @ManyToOne(type => TestOrder,e=>e.details)\n    Order: TestOrder;\n} \nexport async function test() {\n}\n;\n","","import { UseServer } from \"jassijs/remote/RemoteObject\";\r\nimport { Test } from \"jassijs/remote/Test\";\r\nimport { Transaction, TransactionContext } from \"jassijs/remote/Transaction\";\r\nimport { $Class } from \"jassijs/remote/Registry\";\r\nimport { Customer } from \"northwind/remote/Customer\";\r\nimport { Products } from \"northwind/remote/Products\";\r\n\r\n@$Class(\"tests.remote.TransactionTest\")\r\nexport class TransactionTest {\r\n    @UseServer()\r\n    async product(num: number,context:TransactionContext=undefined){\r\n        \r\n        if(context.transaction){\r\n            return context.transaction.registerAction(\"hi\",num+10000,async (nums)=>{\r\n                var ret=[];\r\n                for(let x=0;x<nums.length;x++){\r\n                    ret.push(\"product:\"+num*num+\" (\"+x+\"/\"+nums.length+\")\");\r\n                }\r\n                return ret;\r\n            },context)\r\n        }\r\n        return \"product:\"+num*num;\r\n    }\r\n   \r\n}\r\nexport async function test(t: Test) {\r\n    var trans = new Transaction();\r\n    var cs:Products=<any>await Products.findOne(1);\r\n    var cs2:Products=<any>await Products.findOne(2);\r\n    console.log(cs.UnitPrice+\":\"+cs2.UnitPrice);\r\n        var tr = new TransactionTest();\r\n        cs.UnitPrice=66;\r\n        trans.add(cs,cs.save);\r\n        cs2.UnitPrice=\"jjj\";\r\n        trans.add(cs2,cs2.save);\r\n    \r\n    debugger;\r\n    var all = await trans.execute();\r\n\r\n   \r\n} \r\nexport async function test2(t: Test) {\r\n    let single=await new TransactionTest().product(2);\r\n    t.expectEqual(single===\"product:4\");\r\n    var trans = new Transaction();\r\n    for (var x = 0; x < 3; x++) {\r\n        var tr = new TransactionTest();\r\n\r\n        trans.add(tr, tr.product, x);\r\n    }\r\n    var all = await trans.execute();\r\n\r\n    t.expectEqual(all.join() === 'product:4 (0/3),product:4 (1/3),product:4 (2/3)')\r\n\r\n} ","export default {\r\n    \"require\":{ \r\n         \r\n    }\r\n}"]}