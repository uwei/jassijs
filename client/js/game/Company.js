define(["require", "exports", "game/product", "game/icons"], function (require, exports, product_1, icons_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.test = exports.Company = void 0;
    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }
    var distributionTable = undefined;
    function getRandomCompanyType(notThisIds = undefined) {
        if (notThisIds === undefined)
            notThisIds = [];
        if (!distributionTable) {
            distributionTable = [];
            var distCount = 0;
            for (var x = 0; x < product_1.allProducts.length; x++) {
                for (var y = 0; y < product_1.allProducts[x].distribution; y++) {
                    distributionTable.push(product_1.allProducts[x].id);
                }
            }
        }
        var rand = undefined;
        while (rand === undefined || notThisIds.indexOf(rand) > -1) {
            rand = getRandomInt(distributionTable.length);
            rand = distributionTable[rand];
        }
        return rand;
    }
    class Company {
        constructor(notThisIds = undefined) {
            this.buildings = 0;
            this.workers = 0;
            this.hasLicense = false;
            this.type = "Company";
            this.productid = getRandomCompanyType(notThisIds);
            this.buildings = 0; // getRandomInt(3)+1;
            this.workers = 25 * this.buildings;
            this.hasLicense = (product_1.allProducts[this.productid].distribution <= 8) ? false : true;
        }
        getMaxWorkers() {
            return this.buildings * 25;
        }
        getDailyProduce() {
            var produce = this.workers * product_1.allProducts[this.productid].dailyProduce / 25;
            return Math.round(produce);
        }
        getDailyInput1() {
            var needs = 0;
            var product = product_1.allProducts[this.productid];
            if (product.input1 !== undefined) {
                var p = product_1.allProducts[product.input1];
                needs = this.workers * product.input1Amount / 25;
            }
            return needs;
        }
        getBuildingCoastsAsIcon() {
            var a = this.getBuildingCoasts();
            return a[0] + icons_1.Icons.money + "<br/>" + a[1] + "x" + product_1.allProducts[0].getIcon() + "<br/>" + a[2] + "x" + product_1.allProducts[1].getIcon();
        }
        getBuildingCoasts() {
            var fact = 5 - (product_1.allProducts[this.productid].distribution) / 4;
            return [fact * 10000,
                fact * 5,
                fact * 10];
        }
        getDailyInput2() {
            var needs = 0;
            var product = product_1.allProducts[this.productid];
            if (product.input2 !== undefined) {
                needs = this.workers * product.input2Amount / 25;
            }
            return needs;
        }
    }
    exports.Company = Company;
    function test() {
        var ids = [];
        var t = [];
        for (var x = 0; x < product_1.allProducts.length; x++) {
            var h = new Company(ids);
            ids.push(h.productid);
            t.push(h.productid);
        }
        t.sort();
        for (var x = 0; x < t.length; x++) {
            console.log(t[x]);
        }
    }
    exports.test = test;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGFueS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dhbWUvY29tcGFueS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0lBR0EsU0FBUyxZQUFZLENBQUMsR0FBRztRQUNyQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFDRCxJQUFJLGlCQUFpQixHQUFhLFNBQVMsQ0FBQztJQUU1QyxTQUFTLG9CQUFvQixDQUFDLGFBQXVCLFNBQVM7UUFDMUQsSUFBSSxVQUFVLEtBQUssU0FBUztZQUN4QixVQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtZQUNwQixpQkFBaUIsR0FBRyxFQUFFLENBQUM7WUFDdkIsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxxQkFBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDekMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLHFCQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUNsRCxpQkFBaUIsQ0FBQyxJQUFJLENBQUMscUJBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztpQkFDN0M7YUFDSjtTQUNKO1FBQ0QsSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDO1FBQ3JCLE9BQU8sSUFBSSxLQUFLLFNBQVMsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1lBQ3hELElBQUksR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDOUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFD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QUUsQ0FBQztRQUNiLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNYLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxxQkFBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN6QyxJQUFJLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN6QixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN0QixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUN2QjtRQUNELENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNULEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQy9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDckI7SUFDTCxDQUFDO0lBWkQsb0JBWUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhbGxQcm9kdWN0cyB9IGZyb20gXCJnYW1lL3Byb2R1Y3RcIjtcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcImdhbWUvaWNvbnNcIjtcblxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1heCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xufVxudmFyIGRpc3RyaWJ1dGlvblRhYmxlOiBudW1iZXJbXSA9IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gZ2V0UmFuZG9tQ29tcGFueVR5cGUobm90VGhpc0lkczogbnVtYmVyW10gPSB1bmRlZmluZWQpIHtcbiAgICBpZiAobm90VGhpc0lkcyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBub3RUaGlzSWRzID0gW107XG4gICAgaWYgKCFkaXN0cmlidXRpb25UYWJsZSkge1xuICAgICAgICBkaXN0cmlidXRpb25UYWJsZSA9IFtdO1xuICAgICAgICB2YXIgZGlzdENvdW50ID0gMDtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBhbGxQcm9kdWN0cy5sZW5ndGg7IHgrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBhbGxQcm9kdWN0c1t4XS5kaXN0cmlidXRpb247IHkrKykge1xuICAgICAgICAgICAgICAgIGRpc3RyaWJ1dGlvblRhYmxlLnB1c2goYWxsUHJvZHVjdHNbeF0uaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHZhciByYW5kID0gdW5kZWZpbmVkO1xuICAgIHdoaWxlIChyYW5kID09PSB1bmRlZmluZWQgfHwgbm90VGhpc0lkcy5pbmRleE9mKHJhbmQpID4gLTEpIHtcbiAgICAgICAgcmFuZCA9IGdldFJhbmRvbUludChkaXN0cmlidXRpb25UYWJsZS5sZW5ndGgpO1xuICAgICAgICByYW5kID0gZGlzdHJpYnV0aW9uVGFibGVbcmFuZF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmQ7XG59XG5leHBvcnQgY2xhc3MgQ29tcGFueSB7XG4gICAgcHJvZHVjdGlkOiBudW1iZXI7XG4gICAgYnVpbGRpbmdzOiBudW1iZXIgPSAwO1xuICAgIHdvcmtlcnM6IG51bWJlciA9IDA7XG4gICAgaGFzTGljZW5zZT1mYWxzZTtcbiAgICB0eXBlPVwiQ29tcGFueVwiO1xuICAgIGNvbnN0cnVjdG9yKG5vdFRoaXNJZHM6IG51bWJlcltdID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMucHJvZHVjdGlkID0gZ2V0UmFuZG9tQ29tcGFueVR5cGUobm90VGhpc0lkcyk7XG4gICAgICAgIHRoaXMuYnVpbGRpbmdzID0wOy8vIGdldFJhbmRvbUludCgzKSsxO1xuICAgICAgICB0aGlzLndvcmtlcnMgPSAyNSAqIHRoaXMuYnVpbGRpbmdzO1xuICAgICAgICB0aGlzLmhhc0xpY2Vuc2U9KGFsbFByb2R1Y3RzW3RoaXMucHJvZHVjdGlkXS5kaXN0cmlidXRpb248PTgpP2ZhbHNlOnRydWU7XG4gICAgfVxuICAgIGdldE1heFdvcmtlcnMoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRpbmdzICogMjU7XG4gICAgfVxuICAgIGdldERhaWx5UHJvZHVjZSgpOiBudW1iZXIge1xuICAgICAgICB2YXIgcHJvZHVjZSA9IHRoaXMud29ya2VycyAqIGFsbFByb2R1Y3RzW3RoaXMucHJvZHVjdGlkXS5kYWlseVByb2R1Y2UgLyAyNTtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocHJvZHVjZSk7XG4gICAgfVxuICAgIGdldERhaWx5SW5wdXQxKCk6IG51bWJlciB7XG4gICAgICAgIHZhciBuZWVkcyA9IDA7XG4gICAgICAgIHZhciBwcm9kdWN0ID0gYWxsUHJvZHVjdHNbdGhpcy5wcm9kdWN0aWRdO1xuICAgICAgICBpZiAocHJvZHVjdC5pbnB1dDEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHA9IGFsbFByb2R1Y3RzW3Byb2R1Y3QuaW5wdXQxXTtcbiAgICAgICAgICAgIG5lZWRzID0gdGhpcy53b3JrZXJzICogcHJvZHVjdC5pbnB1dDFBbW91bnQvMjU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5lZWRzO1xuICAgIH1cbiAgICBnZXRCdWlsZGluZ0NvYXN0c0FzSWNvbigpe1xuICAgICAgICB2YXIgYT10aGlzLmdldEJ1aWxkaW5nQ29hc3RzKCk7XG4gICAgICAgXG4gICAgICAgIHJldHVybiBhWzBdK0ljb25zLm1vbmV5K1wiPGJyLz5cIithWzFdK1wieFwiK2FsbFByb2R1Y3RzWzBdLmdldEljb24oKStcIjxici8+XCIrYVsyXStcInhcIithbGxQcm9kdWN0c1sxXS5nZXRJY29uKCk7XG4gICAgfSAgICBcbiAgICBnZXRCdWlsZGluZ0NvYXN0cygpe1xuICAgICAgICB2YXIgZmFjdD01LShhbGxQcm9kdWN0c1t0aGlzLnByb2R1Y3RpZF0uZGlzdHJpYnV0aW9uKS80O1xuICAgICAgICByZXR1cm4gW2ZhY3QqMTAwMDAsXG4gICAgICAgICAgICAgICAgZmFjdCo1LFxuICAgICAgICAgICAgICAgIGZhY3QqMTBdXG4gICAgfVxuICAgIGdldERhaWx5SW5wdXQyKCk6IG51bWJlciB7XG4gICAgICAgIHZhciBuZWVkcyA9IDA7XG4gICAgICAgIHZhciBwcm9kdWN0ID0gYWxsUHJvZHVjdHNbdGhpcy5wcm9kdWN0aWRdO1xuICAgICAgICBpZiAocHJvZHVjdC5pbnB1dDIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmVlZHMgPSB0aGlzLndvcmtlcnMgKiBwcm9kdWN0LmlucHV0MkFtb3VudC8yNTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmVlZHM7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRlc3QoKSB7XG4gICAgdmFyIGlkcyA9IFtdO1xuICAgIHZhciB0ID0gW107XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCBhbGxQcm9kdWN0cy5sZW5ndGg7IHgrKykge1xuICAgICAgICB2YXIgaCA9IG5ldyBDb21wYW55KGlkcyk7XG4gICAgICAgIGlkcy5wdXNoKGgucHJvZHVjdGlkKTtcbiAgICAgICAgdC5wdXNoKGgucHJvZHVjdGlkKTtcbiAgICB9XG4gICAgdC5zb3J0KCk7XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB0Lmxlbmd0aDsgeCsrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRbeF0pO1xuICAgIH1cbn0iXX0=