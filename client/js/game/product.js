define(["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.test = exports.Product = void 0;
    var log = (function () {
        var log = Math.log;
        return function (n, base) {
            return log(n) / (base ? log(base) : 1);
        };
    })();
    class Product {
        constructor(prod) {
            Object.assign(this, prod);
            this.dailyConsumtion = Math.round((10000 * this.amountForPeople / 380)) / 10000 - 0.0001;
            this.pricePurchase = Math.round(this.priceProduction * parameter.ratePurchase);
            this.priceSelling = Math.round(this.priceProduction * parameter.rateSelling);
        }
        getMinPrice() {
            return Math.round(this.priceSelling * parameter.ratePriceMin);
        }
        getMaxPrice() {
            return Math.round(this.priceSelling * parameter.ratePriceMax);
        }
        /**
         * calc price for a city with people and the
         */
        calcPrice0(people, amount, isProducedHere) {
            var consume = Math.round(this.dailyConsumtion * people * 40);
            var normal = isProducedHere ? this.pricePurchase : this.priceSelling;
            var min = Math.round((0.0 + normal) * parameter.ratePriceMin);
            var max = Math.round((0.0 + normal) * parameter.ratePriceMax);
            // var test = Math.round(consume * normal / amount);
            // var test=Math.round((0.0+normal)+Math.pow(consume,0.6)-Math.pow(amount,0.6));
            var test = Math.round(normal + (normal - (amount / consume * normal)));
            if (test < min)
                return min;
            if (test > max || amount < 30) {
                return max;
            }
            return test;
        }
        calcPrice(people, amount, isProducedHere) {
            var consume = Math.round(this.dailyConsumtion * people * 40);
            var normal = isProducedHere ? this.pricePurchase : this.priceSelling;
            var min = Math.round((0.0 + normal) * parameter.ratePriceMin);
            var max = Math.round((0.0 + normal) * parameter.ratePriceMax);
            var consumeMin = Math.round(consume * parameter.ratePriceMin);
            var consumeMax = Math.round(consume * parameter.ratePriceMax);
            if (amount < consumeMin)
                return max;
            if (amount > consumeMax)
                return min;
            var test = 0;
            if (amount > consume) {
                var exp = Math.round(log(consume - consumeMin, normal - min) * 1000) / 1000;
                var diff = Math.pow(amount - consume, 1 / exp);
                test = Math.round(normal - diff);
            }
            else {
                var exp = Math.round(log(-consume + consumeMax, -normal + max) * 1000) / 1000;
                var diff = Math.pow(-amount + consume, 1 / exp);
                test = Math.round(normal + diff);
            }
            // var test = Math.round(consume * normal / amount);
            // var test=Math.round((0.0+normal)+Math.pow(consume,0.6)-Math.pow(amount,0.6));
            /*        var test = Math.round(normal + (normal - (amount / consume * normal)));
                    if (test < min)
                        return min;
                    if (test > max || amount < 30) {
                        return max;
                    }*/
            return test;
        }
        getIcon() {
            var colors = [
                ["", "orange", "mdi-format-line-style"],
                ["", "green", "mdi-pine-tree"],
                ["", "yellow", "mdi-grass"],
                ["", "silver", "mdi-checkbox-blank-circle"],
                ["", "lightgray", "mdi-apple-icloud"],
                ["", "black", "mdi-water"],
                ["", "brown", "mdi-food-croissant"],
                ["blue", "red", "mdi-square-circle"],
                ["", "orange", "mdi-food-drumstick"],
                ["", "purple", "mdi-sofa"],
                ["", "lightblue", "mdi-tshirt-v"],
                ["", "gray", "mdi-fish"],
                ["", "red", "mdi-food-apple"],
                ["", "gamboge", "mdi-bottle-soda"],
                ["", "gold", "mdi-checkbox-blank-circle"],
                ["", "gold", "mdi-ring"],
                ["", "blue", "mdi-toy-brick"],
                ["", "black", "mdi-motorbike"],
                ["", "brown", "mdi-hamburger"],
            ];
            var ic = colors[this.id].length === 3 ? colors[this.id][2] : "mdi-circle-multiple";
            return "<span style='width:14px;font-size:15px;color:" + colors[this.id][1] + ";background-color:" + colors[this.id][0] + "' class='mdi " + ic + "'></span>";
        }
    }
    exports.Product = Product;
    /*export var parameter.allProducts = [
        new Product({ id: 0, name: "Holz", dailyProduce: 2.5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0015, priceProduction: 33, pricePurchase: 40, priceSelling: 59, distribution: 16 }),
        new Product({ id: 1, name: "Ziegel", dailyProduce: 6, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0029, priceProduction: 33, pricePurchase: 40, priceSelling: 59, distribution: 16 }),
        new Product({ id: 2, name: "Getreide", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.003068, priceProduction: 33, pricePurchase: 40, priceSelling: 59, distribution: 16 }),
        new Product({ id: 3, name: "Hanf", dailyProduce: 2.5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0015, priceProduction: 33, pricePurchase: 40, priceSelling: 59, distribution: 16 }),
        new Product({ id: 4, name: "Wolle", dailyProduce: 2, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001168, priceProduction: 50, pricePurchase: 60, priceSelling: 90, distribution: 8 }),
        new Product({ id: 5, name: "Metalle", dailyProduce: 2, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001168, priceProduction: 50, pricePurchase: 60, priceSelling: 90, distribution: 8 }),
        new Product({ id: 6, name: "Honig", dailyProduce: 2, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001168, priceProduction: 50, pricePurchase: 60, priceSelling: 90, distribution: 8 }),
        new Product({ id: 7, name: "Salz", dailyProduce: 1, input1: 0, input1Amount: 0.25, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0006, priceProduction: 58, pricePurchase: 70, priceSelling: 104, distribution: 8 }),
        new Product({ id: 8, name: "Metallwaren", dailyProduce: 1.5, input1: 0, input1Amount: 0.5, input2: 5, input2Amount: 5, dailyConsumtion: 0.0009, priceProduction: 167, pricePurchase: 200, priceSelling: 301, distribution: 8 }),
        new Product({ id: 9, name: "Met", dailyProduce: 2, input1: 6, input1Amount: 1, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001168, priceProduction: 150, pricePurchase: 180, priceSelling: 270, distribution: 8 }),
        new Product({ id: 10, name: "Tuch", dailyProduce: 1, input1: 4, input1Amount: 1, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0006, priceProduction: 150, pricePurchase: 180, priceSelling: 270, distribution: 8 }),
        new Product({ id: 11, name: "Bier", dailyProduce: 3, input1: 2, input1Amount: 0.25, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001768, priceProduction: 75, pricePurchase: 90, priceSelling: 135, distribution: 4 }),
        new Product({ id: 12, name: "Stockfisch", dailyProduce: 3, input1: 7, input1Amount: 0.5, input2: 3, input2Amount: 3, dailyConsumtion: 0.001768, priceProduction: 129, pricePurchase: 155, priceSelling: 232, distribution: 4 }),
        new Product({ id: 13, name: "Kleidung", dailyProduce: 1, input1: 10, input1Amount: 1, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0006, priceProduction: 350, pricePurchase: 420, priceSelling: 630, distribution: 4 }),
        new Product({ id: 14, name: "Käse", dailyProduce: 2, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001168, priceProduction: 100, pricePurchase: 120, priceSelling: 180, distribution: 4 }),
        new Product({ id: 15, name: "Pech", dailyProduce: 2, input1: 0, input1Amount: 0.5, input2: undefined, input2Amount: 0, dailyConsumtion: 0.001168, priceProduction: 117, pricePurchase: 140, priceSelling: 211, distribution: 4 }),
        new Product({ id: 16, name: "Felle", dailyProduce: 1, input1: 3, input1Amount: 0.5, input2: 8, input2Amount: 0.5, dailyConsumtion: 0.0006, priceProduction: 300, pricePurchase: 360, priceSelling: 540, distribution: 4 }),
        new Product({ id: 17, name: "Fleisch", dailyProduce: 1, input1: 7, input1Amount: 1.5, input2: undefined, input2Amount: 0, dailyConsumtion: 0.0006, priceProduction: 288, pricePurchase: 346, priceSelling: 518, distribution: 4 }),
        new Product({ id: 18, name: "Wein", dailyProduce: 0.5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.000336, priceProduction: 400, pricePurchase: 480, priceSelling: 720, distribution: 4 })
        //    new Product({ id:19, name: "Gewürze", dailyProduce: 0, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, dailyConsumtion: 0.000336, priceProduction: 0, pricePurchase: 600, priceSelling: 900 })
    ];*/
    function test() {
        var people = 30656;
        console.log(parameter.allProducts[1].pricePurchase + " " + Math.round(200 * parameter.allProducts[1].dailyConsumtion * 40));
        console.log(parameter.allProducts[1].calcPrice(200, 2, true));
    }
    exports.test = test;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dhbWUvcHJvZHVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0lBQUEsSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUNQLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbkIsT0FBTyxVQUFVLENBQUMsRUFBRSxJQUFJO1lBQ3BCLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNDLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFFTCxNQUFhLE9BQU87UUFlaEIsWUFBWSxJQUFJO1lBQ1osTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLGVBQWUsR0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxHQUFDLElBQUksQ0FBQyxlQUFlLEdBQUMsR0FBRyxDQUFDLENBQUMsR0FBQyxLQUFLLEdBQUMsTUFBTSxDQUFDO1lBQy9FLElBQUksQ0FBQyxhQUFhLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBZSxHQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMzRSxJQUFJLENBQUMsWUFBWSxHQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDN0UsQ0FBQztRQUVELFdBQVc7WUFDUCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDbEUsQ0FBQztRQUNELFdBQVc7WUFDUCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxD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TyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUpELG9CQUlDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGxvZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxvZyA9IE1hdGgubG9nO1xuICAgIHJldHVybiBmdW5jdGlvbiAobiwgYmFzZSkge1xuICAgICAgICByZXR1cm4gbG9nKG4pIC8gKGJhc2UgPyBsb2coYmFzZSkgOiAxKTtcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IGNsYXNzIFByb2R1Y3Qge1xuICAgIGlkOiBudW1iZXI7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRhaWx5UHJvZHVjZTogbnVtYmVyO1xuICAgIGlucHV0MTogbnVtYmVyO1xuICAgIGlucHV0MUFtb3VudDogbnVtYmVyO1xuICAgIGlucHV0MjogbnVtYmVyO1xuICAgIGlucHV0MkFtb3VudDogbnVtYmVyO1xuICAgIGRhaWx5Q29uc3VtdGlvbjogbnVtYmVyO1xuICAgIHByaWNlUHJvZHVjdGlvbjogbnVtYmVyO1xuICAgIHByaWNlUHVyY2hhc2U6IG51bWJlcjtcbiAgICBwcmljZVNlbGxpbmc6IG51bWJlcjtcbiAgICBwcml2YXRlIGFtb3VudEZvclBlb3BsZTpudW1iZXI7XG4gICAgLy9ob3cgb2Z0ZW4gaXQgaXMgdXNlZFxuICAgIGRpc3RyaWJ1dGlvbjogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKHByb2QpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBwcm9kKTtcbiAgICAgICAgdGhpcy5kYWlseUNvbnN1bXRpb249TWF0aC5yb3VuZCgoMTAwMDAqdGhpcy5hbW91bnRGb3JQZW9wbGUvMzgwKSkvMTAwMDAtMC4wMDAxO1xuICAgICAgICB0aGlzLnByaWNlUHVyY2hhc2U9TWF0aC5yb3VuZCh0aGlzLnByaWNlUHJvZHVjdGlvbipwYXJhbWV0ZXIucmF0ZVB1cmNoYXNlKTtcbiAgICAgICAgdGhpcy5wcmljZVNlbGxpbmc9TWF0aC5yb3VuZCh0aGlzLnByaWNlUHJvZHVjdGlvbipwYXJhbWV0ZXIucmF0ZVNlbGxpbmcpO1xuICAgIH1cbiAgICBcbiAgICBnZXRNaW5QcmljZSgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5wcmljZVNlbGxpbmcgKiBwYXJhbWV0ZXIucmF0ZVByaWNlTWluKTtcbiAgICB9XG4gICAgZ2V0TWF4UHJpY2UoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMucHJpY2VTZWxsaW5nICogcGFyYW1ldGVyLnJhdGVQcmljZU1heCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNhbGMgcHJpY2UgZm9yIGEgY2l0eSB3aXRoIHBlb3BsZSBhbmQgdGhlXG4gICAgICovXG4gICAgY2FsY1ByaWNlMChwZW9wbGU6IG51bWJlciwgYW1vdW50OiBudW1iZXIsIGlzUHJvZHVjZWRIZXJlOiBib29sZWFuKSB7XG4gICAgICAgIHZhciBjb25zdW1lID0gTWF0aC5yb3VuZCh0aGlzLmRhaWx5Q29uc3VtdGlvbiAqIHBlb3BsZSAqIDQwKTtcbiAgICAgICAgdmFyIG5vcm1hbCA9IGlzUHJvZHVjZWRIZXJlID8gdGhpcy5wcmljZVB1cmNoYXNlIDogdGhpcy5wcmljZVNlbGxpbmc7XG5cbiAgICBcbiAgICAgICAgdmFyIG1pbiA9IE1hdGgucm91bmQoKDAuMCArIG5vcm1hbCkgKiBwYXJhbWV0ZXIucmF0ZVByaWNlTWluKTtcbiAgICAgICAgdmFyIG1heCA9IE1hdGgucm91bmQoKDAuMCArIG5vcm1hbCkgKiBwYXJhbWV0ZXIucmF0ZVByaWNlTWF4KTtcbiAgICAgICAgLy8gdmFyIHRlc3QgPSBNYXRoLnJvdW5kKGNvbnN1bWUgKiBub3JtYWwgLyBhbW91bnQpO1xuICAgICAgICAvLyB2YXIgdGVzdD1NYXRoLnJvdW5kKCgwLjArbm9ybWFsKStNYXRoLnBvdyhjb25zdW1lLDAuNiktTWF0aC5wb3coYW1vdW50LDAuNikpO1xuICAgICAgICB2YXIgdGVzdCA9IE1hdGgucm91bmQobm9ybWFsICsgKG5vcm1hbCAtIChhbW91bnQgLyBjb25zdW1lICogbm9ybWFsKSkpO1xuICAgICAgICBpZiAodGVzdCA8IG1pbilcbiAgICAgICAgICAgIHJldHVybiBtaW47XG4gICAgICAgIGlmICh0ZXN0ID4gbWF4IHx8IGFtb3VudCA8IDMwKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZXN0O1xuICAgIH1cblxuICAgIGNhbGNQcmljZShwZW9wbGU6IG51bWJlciwgYW1vdW50OiBudW1iZXIsIGlzUHJvZHVjZWRIZXJlOiBib29sZWFuKSB7XG4gICAgICAgIHZhciBjb25zdW1lID0gTWF0aC5yb3VuZCh0aGlzLmRhaWx5Q29uc3VtdGlvbiAqIHBlb3BsZSAqIDQwKTtcbiAgICAgICAgdmFyIG5vcm1hbCA9IGlzUHJvZHVjZWRIZXJlID8gdGhpcy5wcmljZVB1cmNoYXNlIDogdGhpcy5wcmljZVNlbGxpbmc7XG4gICAgICAgIHZhciBtaW4gPSBNYXRoLnJvdW5kKCgwLjAgKyBub3JtYWwpICogcGFyYW1ldGVyLnJhdGVQcmljZU1pbik7XG4gICAgICAgIHZhciBtYXggPSBNYXRoLnJvdW5kKCgwLjAgKyBub3JtYWwpICpwYXJhbWV0ZXIucmF0ZVByaWNlTWF4KTtcbiAgICAgICAgdmFyIGNvbnN1bWVNaW4gPSBNYXRoLnJvdW5kKGNvbnN1bWUqcGFyYW1ldGVyLnJhdGVQcmljZU1pbik7XG4gICAgICAgIHZhciBjb25zdW1lTWF4ID0gTWF0aC5yb3VuZChjb25zdW1lKnBhcmFtZXRlci5yYXRlUHJpY2VNYXgpO1xuICAgICAgICBpZihhbW91bnQ8Y29uc3VtZU1pbilcbiAgICAgICAgICAgIHJldHVybiBtYXg7XG4gICAgICAgIGlmKGFtb3VudD5jb25zdW1lTWF4KVxuICAgICAgICAgICAgcmV0dXJuIG1pbjtcbiAgICAgICAgdmFyIHRlc3Q9MDtcbiAgICAgICAgaWYoYW1vdW50PmNvbnN1bWUpe1xuICAgICAgICAgICAgdmFyIGV4cCA9IE1hdGgucm91bmQobG9nKGNvbnN1bWUtY29uc3VtZU1pbixub3JtYWwtbWluKSogMTAwMCkgLyAxMDAwO1xuICAgICAgICAgICAgdmFyIGRpZmY9TWF0aC5wb3coYW1vdW50LWNvbnN1bWUsIDEvZXhwKTtcbiAgICAgICAgICAgIHRlc3QgPU1hdGgucm91bmQobm9ybWFsLWRpZmYpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICB2YXIgZXhwID0gTWF0aC5yb3VuZChsb2coLWNvbnN1bWUrY29uc3VtZU1heCwtbm9ybWFsK21heCkqIDEwMDApIC8gMTAwMDtcbiAgICAgICAgICAgIHZhciBkaWZmPU1hdGgucG93KC1hbW91bnQrY29uc3VtZSwgMS9leHApO1xuICAgICAgICAgICAgdGVzdCA9TWF0aC5yb3VuZChub3JtYWwrZGlmZik7XG4gICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIC8vIHZhciB0ZXN0ID0gTWF0aC5yb3VuZChjb25zdW1lICogbm9ybWFsIC8gYW1vdW50KTtcbiAgICAgICAgLy8gdmFyIHRlc3Q9TWF0aC5yb3VuZCgoMC4wK25vcm1hbCkrTWF0aC5wb3coY29uc3VtZSwwLjYpLU1hdGgucG93KGFtb3VudCwwLjYpKTtcbi8qICAgICAgICB2YXIgdGVzdCA9IE1hdGgucm91bmQobm9ybWFsICsgKG5vcm1hbCAtIChhbW91bnQgLyBjb25zdW1lICogbm9ybWFsKSkpO1xuICAgICAgICBpZiAodGVzdCA8IG1pbilcbiAgICAgICAgICAgIHJldHVybiBtaW47XG4gICAgICAgIGlmICh0ZXN0ID4gbWF4IHx8IGFtb3VudCA8IDMwKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4O1xuICAgICAgICB9Ki9cbiAgICAgICAgcmV0dXJuIHRlc3Q7XG4gICAgfVxuICAgICAgXG4gICAgICAgXG5cbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHZhciBjb2xvcnMgPSBbXG4gICAgICAgICAgICBbXCJcIiwgXCJvcmFuZ2VcIiwgXCJtZGktZm9ybWF0LWxpbmUtc3R5bGVcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJncmVlblwiLCBcIm1kaS1waW5lLXRyZWVcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJ5ZWxsb3dcIiwgXCJtZGktZ3Jhc3NcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJzaWx2ZXJcIiwgXCJtZGktY2hlY2tib3gtYmxhbmstY2lyY2xlXCJdLFxuICAgICAgICAgICAgW1wiXCIsIFwibGlnaHRncmF5XCIsIFwibWRpLWFwcGxlLWljbG91ZFwiXSxcbiAgICAgICAgICAgIFtcIlwiLCBcImJsYWNrXCIsIFwibWRpLXdhdGVyXCJdLFxuICAgICAgICAgICAgW1wiXCIsIFwiYnJvd25cIiwgXCJtZGktZm9vZC1jcm9pc3NhbnRcIl0sXG4gICAgICAgICAgICBbXCJibHVlXCIsIFwicmVkXCIsIFwibWRpLXNxdWFyZS1jaXJjbGVcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJvcmFuZ2VcIiwgXCJtZGktZm9vZC1kcnVtc3RpY2tcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJwdXJwbGVcIiwgXCJtZGktc29mYVwiXSxcbiAgICAgICAgICAgIFtcIlwiLCBcImxpZ2h0Ymx1ZVwiLCBcIm1kaS10c2hpcnQtdlwiXSxcbiAgICAgICAgICAgIFtcIlwiLCBcImdyYXlcIiwgXCJtZGktZmlzaFwiXSxcbiAgICAgICAgICAgIFtcIlwiLCBcInJlZFwiLCBcIm1kaS1mb29kLWFwcGxlXCJdLFxuICAgICAgICAgICAgW1wiXCIsIFwiZ2FtYm9nZVwiLCBcIm1kaS1ib3R0bGUtc29kYVwiXSxcbiAgICAgICAgICAgIFtcIlwiLCBcImdvbGRcIiwgXCJtZGktY2hlY2tib3gtYmxhbmstY2lyY2xlXCJdLFxuICAgICAgICAgICAgW1wiXCIsIFwiZ29sZFwiLCBcIm1kaS1yaW5nXCJdLFxuICAgICAgICAgICAgW1wiXCIsIFwiYmx1ZVwiLCBcIm1kaS10b3ktYnJpY2tcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJibGFja1wiLCBcIm1kaS1tb3RvcmJpa2VcIl0sXG4gICAgICAgICAgICBbXCJcIiwgXCJicm93blwiLCBcIm1kaS1oYW1idXJnZXJcIl0sXG5cbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGljID0gY29sb3JzW3RoaXMuaWRdLmxlbmd0aCA9PT0gMyA/IGNvbG9yc1t0aGlzLmlkXVsyXSA6IFwibWRpLWNpcmNsZS1tdWx0aXBsZVwiO1xuICAgICAgICByZXR1cm4gXCI8c3BhbiBzdHlsZT0nd2lkdGg6MTRweDtmb250LXNpemU6MTVweDtjb2xvcjpcIiArIGNvbG9yc1t0aGlzLmlkXVsxXSArIFwiO2JhY2tncm91bmQtY29sb3I6XCIgKyBjb2xvcnNbdGhpcy5pZF1bMF0gKyBcIicgY2xhc3M9J21kaSBcIiArIGljICsgXCInPjwvc3Bhbj5cIjtcbiAgICB9XG59XG5cbi8qZXhwb3J0IHZhciBwYXJhbWV0ZXIuYWxsUHJvZHVjdHMgPSBbXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMCwgbmFtZTogXCJIb2x6XCIsIGRhaWx5UHJvZHVjZTogMi41LCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCBkYWlseUNvbnN1bXRpb246IDAuMDAxNSwgcHJpY2VQcm9kdWN0aW9uOiAzMywgcHJpY2VQdXJjaGFzZTogNDAsIHByaWNlU2VsbGluZzogNTksIGRpc3RyaWJ1dGlvbjogMTYgfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMSwgbmFtZTogXCJaaWVnZWxcIiwgZGFpbHlQcm9kdWNlOiA2LCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCBkYWlseUNvbnN1bXRpb246IDAuMDAyOSwgcHJpY2VQcm9kdWN0aW9uOiAzMywgcHJpY2VQdXJjaGFzZTogNDAsIHByaWNlU2VsbGluZzogNTksIGRpc3RyaWJ1dGlvbjogMTYgfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMiwgbmFtZTogXCJHZXRyZWlkZVwiLCBkYWlseVByb2R1Y2U6IDUsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDMwNjgsIHByaWNlUHJvZHVjdGlvbjogMzMsIHByaWNlUHVyY2hhc2U6IDQwLCBwcmljZVNlbGxpbmc6IDU5LCBkaXN0cmlidXRpb246IDE2IH0pLFxuICAgIG5ldyBQcm9kdWN0KHsgaWQ6IDMsIG5hbWU6IFwiSGFuZlwiLCBkYWlseVByb2R1Y2U6IDIuNSwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgZGFpbHlDb25zdW10aW9uOiAwLjAwMTUsIHByaWNlUHJvZHVjdGlvbjogMzMsIHByaWNlUHVyY2hhc2U6IDQwLCBwcmljZVNlbGxpbmc6IDU5LCBkaXN0cmlidXRpb246IDE2IH0pLFxuICAgIG5ldyBQcm9kdWN0KHsgaWQ6IDQsIG5hbWU6IFwiV29sbGVcIiwgZGFpbHlQcm9kdWNlOiAyLCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCBkYWlseUNvbnN1bXRpb246IDAuMDAxMTY4LCBwcmljZVByb2R1Y3Rpb246IDUwLCBwcmljZVB1cmNoYXNlOiA2MCwgcHJpY2VTZWxsaW5nOiA5MCwgZGlzdHJpYnV0aW9uOiA4IH0pLFxuICAgIG5ldyBQcm9kdWN0KHsgaWQ6IDUsIG5hbWU6IFwiTWV0YWxsZVwiLCBkYWlseVByb2R1Y2U6IDIsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDExNjgsIHByaWNlUHJvZHVjdGlvbjogNTAsIHByaWNlUHVyY2hhc2U6IDYwLCBwcmljZVNlbGxpbmc6IDkwLCBkaXN0cmlidXRpb246IDggfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogNiwgbmFtZTogXCJIb25pZ1wiLCBkYWlseVByb2R1Y2U6IDIsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDExNjgsIHByaWNlUHJvZHVjdGlvbjogNTAsIHByaWNlUHVyY2hhc2U6IDYwLCBwcmljZVNlbGxpbmc6IDkwLCBkaXN0cmlidXRpb246IDggfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogNywgbmFtZTogXCJTYWx6XCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiAwLCBpbnB1dDFBbW91bnQ6IDAuMjUsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDA2LCBwcmljZVByb2R1Y3Rpb246IDU4LCBwcmljZVB1cmNoYXNlOiA3MCwgcHJpY2VTZWxsaW5nOiAxMDQsIGRpc3RyaWJ1dGlvbjogOCB9KSxcbiAgICBuZXcgUHJvZHVjdCh7IGlkOiA4LCBuYW1lOiBcIk1ldGFsbHdhcmVuXCIsIGRhaWx5UHJvZHVjZTogMS41LCBpbnB1dDE6IDAsIGlucHV0MUFtb3VudDogMC41LCBpbnB1dDI6IDUsIGlucHV0MkFtb3VudDogNSwgZGFpbHlDb25zdW10aW9uOiAwLjAwMDksIHByaWNlUHJvZHVjdGlvbjogMTY3LCBwcmljZVB1cmNoYXNlOiAyMDAsIHByaWNlU2VsbGluZzogMzAxLCBkaXN0cmlidXRpb246IDggfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogOSwgbmFtZTogXCJNZXRcIiwgZGFpbHlQcm9kdWNlOiAyLCBpbnB1dDE6IDYsIGlucHV0MUFtb3VudDogMSwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgZGFpbHlDb25zdW10aW9uOiAwLjAwMTE2OCwgcHJpY2VQcm9kdWN0aW9uOiAxNTAsIHByaWNlUHVyY2hhc2U6IDE4MCwgcHJpY2VTZWxsaW5nOiAyNzAsIGRpc3RyaWJ1dGlvbjogOCB9KSxcbiAgICBuZXcgUHJvZHVjdCh7IGlkOiAxMCwgbmFtZTogXCJUdWNoXCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiA0LCBpbnB1dDFBbW91bnQ6IDEsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDA2LCBwcmljZVByb2R1Y3Rpb246IDE1MCwgcHJpY2VQdXJjaGFzZTogMTgwLCBwcmljZVNlbGxpbmc6IDI3MCwgZGlzdHJpYnV0aW9uOiA4IH0pLFxuICAgIG5ldyBQcm9kdWN0KHsgaWQ6IDExLCBuYW1lOiBcIkJpZXJcIiwgZGFpbHlQcm9kdWNlOiAzLCBpbnB1dDE6IDIsIGlucHV0MUFtb3VudDogMC4yNSwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgZGFpbHlDb25zdW10aW9uOiAwLjAwMTc2OCwgcHJpY2VQcm9kdWN0aW9uOiA3NSwgcHJpY2VQdXJjaGFzZTogOTAsIHByaWNlU2VsbGluZzogMTM1LCBkaXN0cmlidXRpb246IDQgfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMTIsIG5hbWU6IFwiU3RvY2tmaXNjaFwiLCBkYWlseVByb2R1Y2U6IDMsIGlucHV0MTogNywgaW5wdXQxQW1vdW50OiAwLjUsIGlucHV0MjogMywgaW5wdXQyQW1vdW50OiAzLCBkYWlseUNvbnN1bXRpb246IDAuMDAxNzY4LCBwcmljZVByb2R1Y3Rpb246IDEyOSwgcHJpY2VQdXJjaGFzZTogMTU1LCBwcmljZVNlbGxpbmc6IDIzMiwgZGlzdHJpYnV0aW9uOiA0IH0pLFxuICAgIG5ldyBQcm9kdWN0KHsgaWQ6IDEzLCBuYW1lOiBcIktsZWlkdW5nXCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiAxMCwgaW5wdXQxQW1vdW50OiAxLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCBkYWlseUNvbnN1bXRpb246IDAuMDAwNiwgcHJpY2VQcm9kdWN0aW9uOiAzNTAsIHByaWNlUHVyY2hhc2U6IDQyMCwgcHJpY2VTZWxsaW5nOiA2MzAsIGRpc3RyaWJ1dGlvbjogNCB9KSxcbiAgICBuZXcgUHJvZHVjdCh7IGlkOiAxNCwgbmFtZTogXCJLw6RzZVwiLCBkYWlseVByb2R1Y2U6IDIsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDExNjgsIHByaWNlUHJvZHVjdGlvbjogMTAwLCBwcmljZVB1cmNoYXNlOiAxMjAsIHByaWNlU2VsbGluZzogMTgwLCBkaXN0cmlidXRpb246IDQgfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMTUsIG5hbWU6IFwiUGVjaFwiLCBkYWlseVByb2R1Y2U6IDIsIGlucHV0MTogMCwgaW5wdXQxQW1vdW50OiAwLjUsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIGRhaWx5Q29uc3VtdGlvbjogMC4wMDExNjgsIHByaWNlUHJvZHVjdGlvbjogMTE3LCBwcmljZVB1cmNoYXNlOiAxNDAsIHByaWNlU2VsbGluZzogMjExLCBkaXN0cmlidXRpb246IDQgfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMTYsIG5hbWU6IFwiRmVsbGVcIiwgZGFpbHlQcm9kdWNlOiAxLCBpbnB1dDE6IDMsIGlucHV0MUFtb3VudDogMC41LCBpbnB1dDI6IDgsIGlucHV0MkFtb3VudDogMC41LCBkYWlseUNvbnN1bXRpb246IDAuMDAwNiwgcHJpY2VQcm9kdWN0aW9uOiAzMDAsIHByaWNlUHVyY2hhc2U6IDM2MCwgcHJpY2VTZWxsaW5nOiA1NDAsIGRpc3RyaWJ1dGlvbjogNCB9KSxcbiAgICBuZXcgUHJvZHVjdCh7IGlkOiAxNywgbmFtZTogXCJGbGVpc2NoXCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiA3LCBpbnB1dDFBbW91bnQ6IDEuNSwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgZGFpbHlDb25zdW10aW9uOiAwLjAwMDYsIHByaWNlUHJvZHVjdGlvbjogMjg4LCBwcmljZVB1cmNoYXNlOiAzNDYsIHByaWNlU2VsbGluZzogNTE4LCBkaXN0cmlidXRpb246IDQgfSksXG4gICAgbmV3IFByb2R1Y3QoeyBpZDogMTgsIG5hbWU6IFwiV2VpblwiLCBkYWlseVByb2R1Y2U6IDAuNSwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgZGFpbHlDb25zdW10aW9uOiAwLjAwMDMzNiwgcHJpY2VQcm9kdWN0aW9uOiA0MDAsIHByaWNlUHVyY2hhc2U6IDQ4MCwgcHJpY2VTZWxsaW5nOiA3MjAsIGRpc3RyaWJ1dGlvbjogNCB9KVxuICAgIC8vICAgIG5ldyBQcm9kdWN0KHsgaWQ6MTksIG5hbWU6IFwiR2V3w7xyemVcIiwgZGFpbHlQcm9kdWNlOiAwLCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCBkYWlseUNvbnN1bXRpb246IDAuMDAwMzM2LCBwcmljZVByb2R1Y3Rpb246IDAsIHByaWNlUHVyY2hhc2U6IDYwMCwgcHJpY2VTZWxsaW5nOiA5MDAgfSlcbl07Ki9cblxuXG5leHBvcnQgZnVuY3Rpb24gdGVzdCgpIHtcbiAgICB2YXIgcGVvcGxlID0gMzA2NTY7XG4gICAgY29uc29sZS5sb2cocGFyYW1ldGVyLmFsbFByb2R1Y3RzWzFdLnByaWNlUHVyY2hhc2UrXCIgXCIrTWF0aC5yb3VuZCgyMDAqcGFyYW1ldGVyLmFsbFByb2R1Y3RzWzFdLmRhaWx5Q29uc3VtdGlvbio0MCkpO1xuICAgIGNvbnNvbGUubG9nKHBhcmFtZXRlci5hbGxQcm9kdWN0c1sxXS5jYWxjUHJpY2UoMjAwLDIsdHJ1ZSkpO1xufVxuXG5cbiJdfQ==