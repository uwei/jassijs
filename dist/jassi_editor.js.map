{"version":3,"file":"jassi_editor.js","sourceRoot":"","sources":["../client/jassi_editor/AcePanel.ts","../client/jassi_editor/ChromeDebugger.ts","../client/jassi_editor/CodeEditor.ts","../client/jassi_editor/CodeEditorInvisibleComponents.ts","../client/jassi_editor/CodePanel.ts","../client/jassi_editor/ComponentDesigner.ts","../client/jassi_editor/ComponentExplorer.ts","../client/jassi_editor/ComponentPalette.ts","../client/jassi_editor/Debugger.ts","../client/jassi_editor/MonacoPanel.ts","../client/jassi_editor/StartEditor.ts","../client/jassi_editor/modul.ts","../client/jassi_editor/registry.js","../client/jassi_editor/ext/acelib.js","../client/jassi_editor/ext/monaco.js","../client/jassi_editor/util/DragAndDropper.ts","../client/jassi_editor/util/Parser.ts","../client/jassi_editor/util/Resizer.ts","../client/jassi_editor/util/TSSourceMap.ts","../client/jassi_editor/util/Typescript.ts","../client/jassi_editor/util/monaco.ts"],"names":[],"mappings":"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","sourcesContent":["import jassi from \"jassi/jassi\";\r\nimport { Component } from \"jassi/ui/Component\";\r\n//@ts-ignore\r\nimport ace from \"jassi_editor/ext/acelib\";\r\nimport \"jassi_editor/Debugger\";\r\nimport typescript, { Typescript } from \"jassi_editor/util/Typescript\";\r\nimport { $Class } from \"jassi/remote/Jassi\";\r\nimport { router } from \"jassi/base/Router\";\r\nimport registry from \"jassi/remote/Registry\";\r\nimport { CodePanel } from \"jassi_editor/CodePanel\";\r\n\r\n\r\n\r\n/**\r\n* wrapper for the Ace-Code editor with Typesccript-Code-Completion an other features\r\n* @class jassi.ui.CodePanel\r\n*/\r\n@$Class(\"jassi.ui.AcePanel\")\r\nexport class AcePanel extends CodePanel{\r\n    private _mode: string;\r\n    private _editor;\r\n    private _isInited: boolean;\r\n    //   private _lastCursorPosition;\r\n    file: string;\r\n    private static _tooltipdiv;\r\n    private _lastTooltipRefresh;\r\n    checkErrorTask: Runlater;\r\n    constructor() {\r\n        super();\r\n        var _this = this;\r\n        var test = $('<div class=\"CodePanel\" style=\"height: 500px; width: 500px\"></div>')[0];\r\n        super.init(test);\r\n        $(this.domWrapper).css(\"display\", \"\");\r\n        this._editor = ace.edit(this._id);\r\n        this.file = \"\";\r\n        this.checkErrorTask = new Runlater(function () {\r\n            _this._checkCode();\r\n        }, 900);\r\n        this._editor.setOptions({\r\n            enableBasicAutocompletion: true,\r\n            //   maxLines:Infinity,\r\n            useSoftTabs: false,\r\n            autoScrollEditorIntoView: false\r\n            //      enableMultiselect: false,\r\n            //    enableLinking: true\r\n        });\r\n\r\n        // this._editor.setAutoScrollEditorIntoView(false);\r\n        this._editor.session.setOption(\"useWorker\", false)\r\n        this._editor.$blockScrolling = Infinity;\r\n        this._editor.jassi = this;\r\n        this._installLangTools();\r\n        var include = /[a-z.]/i;\r\n        this._addEvents();\r\n        this._addCommands();\r\n        //editor.$blockScrolling = Infinity;\r\n    }\r\n    private _addEvents() {\r\n        var _this = this;\r\n        this._editor.on('change', (obj, editor) => {\r\n            switch (obj.action) {\r\n                case 'insert':\r\n                    let lines = obj.lines;\r\n                    let char = lines[0];\r\n                    if ((lines.length === 1) && (char.length === 1) && char === \".\") {\r\n                        setTimeout(() => {\r\n                            this._editor.commands.byName.startAutocomplete.exec(this._editor);\r\n                        }, 50);\r\n                    }\r\n                    if (lines.length == 1 && lines[0].length > 1 && lines[0].indexOf(\" \") < 0) {\r\n                        //no check after .\r\n                        var idx = _this.positionToNumber(obj.start);\r\n                        var test = _this.value[idx - 1];\r\n                        if (test !== \".\") {\r\n                            setTimeout(() => {\r\n                                _this._doRequiredImports(obj.end, lines);\r\n\r\n                            }, 500);\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n            _this.checkErrorTask.runlater();\r\n            var lineHeight = this._editor.renderer.lineHeight;\r\n            var editorDiv = document.getElementById(_this._id);\r\n            editorDiv.style.height = lineHeight * _this._editor.getSession().getDocument().getLength() + \" px\";\r\n            _this._editor.resize();\r\n        });\r\n\r\n        _this._editor.on(\"guttermousedown\", function (e) {\r\n\r\n            var row = e.getDocumentPosition().row;\r\n            var breakpoints = e.editor.session.getBreakpoints(row, 0);\r\n            var type = \"debugpoint\";\r\n            if (e.domEvent.ctrlKey)\r\n                type = \"checkpoint\";\r\n            var column = _this._editor.session.getLine(row).length;\r\n            if (typeof breakpoints[row] === typeof undefined) {\r\n                e.editor.session.setBreakpoint(row);\r\n                _this.callEvent(\"breakpointChanged\", row, column, true, type);\r\n            } else {\r\n                e.editor.session.clearBreakpoint(row, false, undefined);\r\n                _this.callEvent(\"breakpointChanged\", row, column, false, type);\r\n            }\r\n        });\r\n        this._editor.on(\"mousemove\", function (e) {\r\n            _this._manageTooltip(e);\r\n        })\r\n    }\r\n    /**\r\n     * add commands to Ace Editor\r\n     **/\r\n    private _addCommands() {\r\n        var _this = this;\r\n        this._editor.commands.addCommand({\r\n            name: \"formatDocument\",\r\n            bindKey: { win: \"Shift-Alt-f\", mac: \"Shift-Alt-f\" },\r\n            exec: function (editor) {\r\n                typescript.formatDocument(_this.file, _this.value).then((val)=>{\r\n                    _this.value = val;\r\n                });\r\n            }\r\n        });\r\n        this._editor.commands.addCommand({\r\n            name: \"goToDeclaration\",\r\n            bindKey: { win: \"Ctrl-F12\", mac: \"Ctrl-F12\" },\r\n            exec: function (editor) {\r\n                _this.gotoDeclaration();\r\n            }\r\n        })\r\n    }\r\n    private _tooltiprefresh(event) {\r\n\r\n        if (this._lastTooltipRefresh === undefined)\r\n            return;\r\n        if (this._lastTooltipRefresh + 400 < Date.now()) {\r\n            var pos = event.getDocumentPosition();\r\n            if (pos.row === 0 || pos.column == 0)\r\n                return;\r\n            let lpos = this.positionToNumber({\r\n            \tcolumn:pos.column+1,\r\n            \trow:pos.row+1\r\n            }) - 1;\r\n            if (!typescript.isInited(this.file))\r\n                return;\r\n            var p;\r\n            typescript.getQuickInfoAtPosition(this.file, lpos,this.value).then((p) => {\r\n                if (p !== undefined) {\r\n                    var text = \"<div style='font-size:12px'>\";\r\n                    for (let x = 0; x < p.displayParts.length; x++) {\r\n                        text = text + p.displayParts[x].text;\r\n                    }\r\n                    if (p.documentation !== undefined) {\r\n                        for (let x = 0; x < p.documentation.length; x++) {\r\n                            text = text + \"<br>\" + p.documentation[x].text;\r\n                        }\r\n                    }\r\n                    text = text + \"<br>\" + (p.documentation === undefined ? \"\" : p.documentation) + \"<div>\";\r\n                    $(AcePanel._tooltipdiv).html(text);\r\n                    $(AcePanel._tooltipdiv).css({ \"background-color\": \"#f7f4a5\", display: \"block\", position: \"absolute\", 'top': event.y, 'left': event.x }).fadeIn('fast');\r\n                }\r\n            })\r\n        }\r\n    }\r\n\t/**\r\n\t * show tooltip\r\n\t */\r\n    private _manageTooltip(event) {\r\n        if (AcePanel._tooltipdiv === undefined) {\r\n            AcePanel._tooltipdiv = $('<div id=\"tt\">hallo</div>')[0];\r\n            document.body.append(AcePanel._tooltipdiv);\r\n        }\r\n        if (event !== undefined)\r\n            $(AcePanel._tooltipdiv).css({ display: \"none\", position: \"absolute\", 'top': event.y, 'left': event.x });\r\n\r\n        this._lastTooltipRefresh = Date.now();\r\n        event = event;\r\n        window.setTimeout(this._tooltiprefresh.bind(this), 400, event);\r\n    }\r\n   \r\n\tpublic insert(pos:number,text:string){\r\n\t\tthis._editor.session.insert(pos, text);\r\n\t}\r\n\t/**\r\n\t * check if imports are neded and do so \r\n\t **/\r\n    _doRequiredImports(pos: { row: number, column: number }, name: string) {\r\n        if (!typescript.isInited(this.file))\r\n            return;\r\n        if (this.value.indexOf(\"import \" + name + \" \") === -1 && this.value.indexOf(\"import {\" + name + \"} \") === -1) {\r\n            \r\n            let lpos = this.positionToNumber({\r\n            \tcolumn:pos.column+1,\r\n            \trow:pos.row+1\r\n            }) - 1;\r\n            CodePanel.getAutoimport(lpos,this.file,this.value).then((data)=>{\r\n            \tif(data!==undefined){\r\n            \t\tthis._editor.session.insert(data.pos, data.text);\r\n                    typescript.setCode(this.file, this.value);\r\n            \t}\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * check for errors or warnings\r\n     */\r\n    private _checkCode() {\r\n        if (this.file !== undefined && !this.file.toLowerCase().endsWith(\".ts\"))\r\n            return;\r\n        var _this = this;\r\n        typescript.waitForInited.then(() => {\r\n            if (_this._editor !== undefined && _this._editor.getSession() !== undefined) {\r\n                _this._editor.getSession().setAnnotations([{\r\n                    row: 1,\r\n                    column: 1,\r\n                    text: \"typescript initialization still in progress...\",\r\n                    type: \"information\" // also warning and information\r\n                }]);\r\n\r\n            }\r\n            typescript.setCode(_this.file, _this.value).then((tt) => {\r\n                if (_this.file === undefined)\r\n                    return;\r\n                typescript.getDiagnostics(_this.file, _this.value).then((diag)=>{\r\n                var annotaions = [];\r\n                var iserror = false;\r\n                for (var x = 0; x < diag.semantic.length; x++) {\r\n                   // if (diag.semantic[x].file === undefined)\r\n                     //   continue;\r\n                   // if (diag.semantic[x].file === undefined||diag.semantic[x].file.fileName === (\"file:///\" + _this.file) {\r\n                        var err = _this.numberToPosition(diag.semantic[x].start);\r\n                        annotaions.push({\r\n                            row: err.row - 1,\r\n                            column: err.column - 1,\r\n                            text: diag.semantic[x].messageText[\"messageText\"] === undefined ? diag.semantic[x].messageText : diag.semantic[x].messageText[\"messageText\"],//Bug\r\n                            type: \"error\" // also warning and information\r\n                        })\r\n                        iserror = true;\r\n                  //  }\r\n                }\r\n                for (var y = 0; y < diag.suggestion.length; y++) {\r\n                    //if (diag.suggestion[y].file === undefined)\r\n                    //    continue;\r\n                 //   if (diag.suggestion[y].file === undefined||diag.suggestion[y].file.fileName === _this.file) {\r\n                        var err = _this.numberToPosition(diag.suggestion[y].start);\r\n                        annotaions.push({\r\n                            row: err.row - 1,\r\n                            column: err.column - 1,\r\n                            text: diag.suggestion[y].messageText,\r\n                            type: \"warning\" // also warning and information\r\n                        })\r\n                  //  }\r\n                }\r\n                for (var x = 0; x < diag.syntactic.length; x++) {\r\n                  //  if (diag.syntactic[x].file === undefined)\r\n                    //    continue;\r\n                   // if (iag.syntactic[x].file === undefined||diag.syntactic[x].file.fileName === _this.file) {\r\n                        var err = _this.numberToPosition(diag.syntactic[x].start);\r\n                        annotaions.push({\r\n                            row: err.row - 1,\r\n                            column: err.column - 1,\r\n                            text: diag.syntactic[x].messageText[\"messageText\"] === undefined ? diag.syntactic[x].messageText : diag.syntactic[x].messageText[\"messageText\"],//Bug\r\n                            type: \"error\" // also warning and information\r\n                        })\r\n                        iserror = true;\r\n                    //}\r\n                }\r\n                _this._editor.getSession().setAnnotations(annotaions);\r\n                if (iserror) {\r\n                    $(_this.dom).find(\".ace_gutter\").css(\"background\", \"#ffbdb9\");\r\n                } else {\r\n                    $(_this.dom).find(\".ace_gutter\").css(\"background\", \"\");\r\n                }\r\n\r\n\r\n                })\r\n            });\r\n        });\r\n\r\n\r\n    }\r\n    /**\r\n     * initialize the Ace language Tools (only once)\r\n     */\r\n    private _installLangTools() {\r\n        var aceLangTools = ace.require(\"ace/ext/language_tools\");\r\n        if (aceLangTools.jassi === undefined) {\r\n            aceLangTools.jassi = {\r\n                constructor: {\r\n\r\n                },\r\n                getDocTooltip: function (item) {\r\n                    return item.codePanel.getDocTooltip(item);\r\n                    // if (item.jassi !== undefined && item.jassi.getDocTooltip !== undefined)\r\n                    //     return item.jassi.getDocTooltip(item);\r\n                },\r\n                getCompletions: function (editor, session, pos, prefix, callback) {\r\n                    return editor.jassi.getCompletions(editor, session, pos, prefix, callback);\r\n                }\r\n            }\r\n\r\n        }\r\n        aceLangTools.setCompleters([aceLangTools.jassi, aceLangTools.keyWordCompleter]);\r\n\r\n    }\r\n   \r\n    \r\n    /**\r\n    * get the completion entrys for the Ace-Code-Editor\r\n    * @param editor - the editor instance\r\n    * @param session - the editor session\r\n    * @param pos - the current code position\r\n    * @param prefix - the word before the code position\r\n    * @param callback - the function to transfer the completions\r\n    */\r\n    getCompletions(editor, session, pos: { row: number, column: number }, prefix, callback) {\r\n        /*   var ret = [];\r\n           var entry = { caption: caption, name: sname, value: sname, score: 10, meta: \"object\", parent: ob };\r\n           ret.push(entry);\r\n           callback(null, ret);*/\r\n        var ret = [];\r\n        var _this = this;\r\n        var p = _this.positionToNumber({\r\n            column:pos.column+1,\r\n            row:pos.row+1\r\n        });\r\n        var code = this.value;\r\n\r\n        if (typescript.isInited(this.file) !== true) {\r\n            let entry = { caption: \"please try later ... loading in progress\", name: \"loading\", value: \"empty\", score: 10, meta: \"object\", parent: \"otto\", codePanel: _this };\r\n            ret.push(entry);\r\n            return;\r\n        }\r\n        if (_this.file.endsWith(\".js\"))\r\n            return;\r\n        typescript.getCompletion(_this.file, p, code,{ includeExternalModuleExports: true }).then((data) => {\r\n            if (data !== undefined) {\r\n                for (let e = 0; e < data.entries.length; e++) {\r\n                    let entr = data.entries[e];\r\n                    var icon = \"variableicon\";\r\n                    if (entr.kind === \"method\" || entr.kind === \"function\")\r\n                        icon = \"functionicon\";\r\n                    if (entr.kind === \"property\" || entr.kind === \"getter\" || entr.kind === \"setter\")\r\n                        icon = \"membericon\";\r\n                    if (entr.name.startsWith(\"$\") && entr.kind === \"function\") {\r\n                        icon = \"annotationicon\";\r\n                    }\r\n                    if (entr.kind === \"class\")\r\n                        icon = \"classicon\";\r\n                    var entry = {\r\n                        caption: entr.name, name: entr.name, value: entr.name,\r\n                        score: 10, meta: entr.kind, codePanel: _this, pos: p, file: _this.file, className: icon, icon: \"method\"\r\n                    };\r\n                    ret.push(entry);\r\n                }\r\n            } else {\r\n                let entry = { caption: \"empty\", name: \"empty\", value: \"empty\", score: 10, meta: \"object\", parent: \"otto\", codePanel: _this };\r\n                ret.push(entry);\r\n            }\r\n            callback(null, ret);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n\t* get the documentation for a member for the Ace-Code-Editor\r\n\t* @param {object} item - the member to describe\r\n\t*/\r\n    getDocTooltip(item) {\r\n        if (item.file === undefined)\r\n            return \"\";\r\n        var _id = registry.nextID();\r\n        item.docHTML = \"<span id='\" + _id + \"'> please try later ... loading in progress<span>\";\r\n\r\n        typescript.getCompletionEntryDetails(item.file, item.pos, item.name, {}, undefined, {}).then((ret) => {\r\n            if (ret === undefined)\r\n                return;\r\n            var doc = \"<b>\";\r\n            if (ret.displayParts !== undefined) {\r\n                for (var x = 0; x < ret.displayParts.length; x++) {\r\n                    doc = doc + ret.displayParts[x].text;//+ret.tags[x].text;\r\n                }\r\n            }\r\n            //doc = \"<div style='width:50px;word-wrap: break-word'>\"+doc + \"</div></b><br>\";\r\n            doc = \"<div style='word-wrap: break-word'>\" + doc + \"</div></b><br>\";\r\n            if (ret.documentation !== undefined) {\r\n                for (var x = 0; x < ret.documentation.length; x++) {\r\n                    doc = doc + ret.documentation[x].text + \"<br>\";//+ret.tags[x].text;\r\n                }\r\n            }\r\n            doc = doc;\r\n            if (ret.tags !== undefined) {\r\n                for (var x = 0; x < ret.tags.length; x++) {\r\n                    doc = doc + \"<b>\" + ret.tags[x].name + \" </b> \" + (ret.tags[x].text === undefined ? \"\" : ret.tags[x].text.replaceAll(\"<\", \"&#60;\").replaceAll(\">\", \"&#62;\") + \"<br>\");\r\n                }\r\n            }\r\n            doc = doc;\r\n            var html = \"<div style='font-size:12px'>\" + doc + \"<div>\";//this._getDescForMember(item.parent, item.name);\r\n            //window.setTimeout(()=>{\r\n            $(\"#\" + _id)[0].outerHTML = html;\r\n\r\n            // },10);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * gets a list of all lines with breakpoint\r\n     * @returns {Object.<number, boolean>}\r\n     */\r\n    getBreakpoints(): { [line: number]: boolean } {\r\n        var ret = {};\r\n        var breakpoints = this._editor.session.getBreakpoints(0, 0);\r\n        for (var x = 0; x < breakpoints.length; x++) {\r\n            if (breakpoints[x] !== undefined) {\r\n                ret[x] = true;\r\n            }\r\n            //\tdebugger;\r\n        }\r\n        return ret;\r\n    }\r\n    \r\n    /**\r\n     * component get focus\r\n     * @param {function} handler\r\n     */\r\n    onfocus(handler) {\r\n        this._editor.on(\"focus\", handler);\r\n    }\r\n    /**\r\n     * component lost focus\r\n     * @param {function} handler\r\n     */\r\n    onblur(handler) {\r\n        this._editor.on(\"blur\", handler);\r\n    }\r\n    /**\r\n     * @param - the codetext\r\n     */\r\n    set value(value: string) { //the Code\r\n        var lastcursor = this.cursorPosition;\r\n        this._editor.setValue(value);\r\n        this._editor.clearSelection();\r\n        //force ctrl+z not shows an empty document\r\n        if (this._isInited === undefined) {\r\n            this._isInited = true;\r\n            this._editor.getSession().setUndoManager(new ace.UndoManager());\r\n        }\r\n        if (lastcursor !== undefined) {\r\n            //this.cursorPosition = lastcursor;\r\n        }\r\n        var _this = this;\r\n        //asynchron\r\n        window.setTimeout(() => {\r\n            this._checkCode();\r\n\r\n        }, 10);\r\n    }\r\n    get value(): string {\r\n        return this._editor.getValue();\r\n    }\r\n    /**\r\n     * @param {object} position - the current cursor position {row= ,column=}\r\n     */\r\n    set cursorPosition(cursor: { row: number, column: number }) {\r\n        this._editor.focus();\r\n        this._editor.gotoLine(cursor.row, cursor.column, true);\r\n        var r = cursor.row;\r\n        if (r > 3)\r\n            r = r - 3;\r\n        var _this = this;\r\n        _this._editor.renderer.scrollToRow(r);\r\n        _this._editor.renderer.scrollCursorIntoView({ row: cursor.row, column: cursor.column  }, 0.5);\r\n    }\r\n    get cursorPosition(): { row: number, column: number } {\r\n        var ret= this._editor.getCursorPosition();\r\n        ret.row++;\r\n        ret.column++;\r\n        return ret;\r\n    }\r\n    /**\r\n     * returns a single line\r\n     * @param {number} line - the line number\r\n     */\r\n    getLine(line) {\r\n        return this._editor.getSession().getLine(line);\r\n    }\r\n    /**\r\n     * @member {string} - the language of the editor e.g. \"ace/mode/javascript\"\r\n     */\r\n    set mode(mode) {\r\n        //  alert(mode);\r\n        this._mode = mode;\r\n        this._editor.getSession().setMode(\"ace/mode/\" + mode);\r\n    }\r\n    get mode() {\r\n        return this._mode;\r\n    }\r\n    destroy() {\r\n        this._editor.destroy();\r\n        super.destroy();\r\n    }\r\n    /**\r\n    * undo action\r\n    */\r\n    undo() {\r\n        this._editor.undo();\r\n    }\r\n    /**\r\n     * resize the editor\r\n     * */\r\n    resize() {\r\n        this._editor.resize();\r\n    }\r\n}\r\nclass Runlater {\r\n    lastRun: number;\r\n    func;\r\n    timeout: number;\r\n    isRunning = false;\r\n    constructor(func, timeout) {\r\n        this.func = func;\r\n        this.timeout = timeout;\r\n    }\r\n    _checkRun() {\r\n        var _this = this;\r\n        if (Date.now() > this.timeout + this.lastRun) {\r\n            this.isRunning = false;\r\n            this.func();\r\n        } else {\r\n            setTimeout(function () {\r\n                _this._checkRun();\r\n            }, this.timeout);\r\n        }\r\n    }\r\n\r\n    runlater() {\r\n        var _this = this;\r\n        this.lastRun = Date.now();\r\n        if (this.isRunning) {\r\n            return;\r\n        } else {\r\n            this.isRunning = true;\r\n            setTimeout(function () {\r\n                _this._checkRun();\r\n            }, this.timeout);\r\n        }\r\n    }\r\n}\r\njassi.test = async function () {\r\n\r\n    var dlg = new AcePanel();\r\n    dlg.value = \"var h;\\r\\nvar k;\\r\\nvar k;\\r\\nvar k;\\r\\nconsole.debug('ddd');\";\r\n    dlg.mode = \"javascript\";\r\n    //dlg._editor.renderer.setShowGutter(false);\t\t\r\n    //dlg._editor.getSession().addGutterDecoration(1,\"error_line\");\r\n    //  dlg._editor.getSession().setBreakpoint(1);\r\n    // dlg._editor.getSession().setBreakpoint(2);\r\n    var h = dlg.getBreakpoints();\r\n    return dlg;\r\n}\r\n\r\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\nimport { Debugger } from \"jassi_editor/Debugger\";\nimport { CodeEditor } from \"jassi_editor/CodeEditor\";\nimport { OptionDialog } from \"jassi/ui/OptionDialog\";\nimport { TSSourceMap } from \"jassi_editor/util/TSSourceMap\";\nimport { Reloader } from \"jassi/util/Reloader\";\nimport { Server } from \"jassi/remote/Server\";\nimport windows from \"jassi/base/Windows\";\nvar installed=undefined;\n\n\n/**\n * debugging in Chrome\n */\n@$Class(\"jassi_editor.ChromeDebugger\")\nexport class ChromeDebugger extends Debugger {\n    private static mid = 0;\n    private responseList = {};\n    allBreakPoints: { [file: string]: string[] } = {};\n    constructor() {\n        super();\n        //listen to code changes\n        this.sendChromeMessage({ name: \"getCodeChange\" });\n        window.addEventListener(\"message\", (event) => {\n            // console.log(\"mess\"+JSON.stringify(event));\n            this.onChromeMessage(event);\n        });\n    }\n    private showHintExtensionNotInstalled(){\n            $.notify.addStyle('downloadlink', {\n        html: \"<div><a href='https://uwei.github.io/jassijs/jassichrome/jassijsext.zip'><span data-notify-text/></a></div>\",\n        classes: {\n            base: {\n                \"color\": \"white\",\n                \"background-color\": \"lightblue\"\n            }\n        }\n    });\n   \n    $.notify(\"Jassi Debugger Chrome extension not installed. Click here to download.\",  { position: \"right bottom\", style: 'downloadlink',autoHideDelay: 7000, });\n\n    }\n    //on receiving messages from chrome extension\n    private onChromeMessage(event) {\n        var _this = this;\n        //console.log(\"Website received message: \" + JSON.stringify(event.data));\n        if (event?.data?.event === \"onResourceContentCommitted\") {\n            _this.saveCode(event.data.url.url, event.data.data);\n        }\n        if (event.data.fromJassiExtension && event.data.connected) {\n            installed=true;\n            //clearTimeout(checkExtensionInstalled);\n            if (jassi.debugger !== undefined)\n                jassi.debugger.destroy();\n            jassi.debugger = this;\n        }\n        if (event.data.fromJassiExtension && event.data.mid) {\n            var test = this.responseList[event.data.mid];\n            if (test) {\n                test(event);\n                delete this.responseList[event.data.mid];\n            }\n        }\n    }\n    //send message to chrome extension\n    private sendChromeMessage(msg, response = undefined) {\n        msg.toJassiExtension = true;\n        msg.mid = ChromeDebugger.mid++;\n        if (response)\n            this.responseList[msg.mid] = response;\n        window.postMessage(msg, \"*\");\n    }\n    urlToFile(url) {\n        var file = url;\n        var wurl = window.location.href.split(\"/app.html\")[0];\n        file = file.replace(wurl + \"/\", \"\");\n        file = file.split(\"?\")[0];\n        return file;\n    }\n    async saveCode(url, code) {\n        //alert(code);\n        var file: string = this.urlToFile(url);\n        var filename: string = file.replace(\"$temp\", \"\");\n        var _this = this;\n        //give the user the option to reload the changes in codeeditor\n        var editor = windows.findComponent(\"jassi_editor.CodeEditor-\" + filename);\n        if (editor !== undefined) {\n\n            if (editor._codeToReload === undefined) {\n\n                OptionDialog.show(\"The source was updated in Chrome. Do you want to load this modification?\", [\"Yes\", \"No\"], editor, false).then(function (data) {\n                    if (data.button === \"Yes\")\n                        editor.value = editor._codeToReload;\n                    delete editor._codeToReload;\n                });\n            }\n            //remove temporary debugpoints\n            if (file.indexOf(\"$temp\") > -1) {\n                var reg = new RegExp(\"{var debug_editor.*debug_editor\\\\.addVariables\\\\(_variables_\\\\)\\\\;}\");\n                var ret = reg.exec(code);\n                while (ret !== null) {\n                    code = code.substring(0, ret.index) + code.substring(ret.index + ret[0].length);\n                    ret = reg.exec(code);\n                }\n            }\n            editor._codeToReload = code;\n\n        }\n        if (file.indexOf(\"$temp\") > -1) {\n            return;\n        }\n        new Server().saveFile(file, code).then(function () {\n            Reloader.instance.reloadJS(file.replace(\".ts\", \"\"));\n            if (code.indexOf(\"jassi.register(\") > -1) {\n                jassi.registry.reload();\n            }\n        });\n    }\n\n    /**\n     * remove all breakpoints for the file\n     * @param file \n     */\n    async removeBreakpointsForFile(file: string) {\n        var bps = this.allBreakPoints[file];\n        if (bps === undefined)\n            return;\n        while (bps.length > 0) {\n            await this.breakpointChanged(file, Number(bps[0].split(\":\")[0]), Number(bps[0].split(\":\")[1]), false);\n        }\n    }\n    /**\n     * sets a breakpoint for debugging\n     * @param {string} file\n     * @param {number} line\n     * @param {number} enable - if true then breakpoint is set if false then removed\n     * @param {string} type - the type default undefined->stop debugging \n     **/\n    async breakpointChanged(file, line, column, enable, type = undefined) {\n        if(!installed)\n            this.showHintExtensionNotInstalled();\n        if (this.allBreakPoints[file] === undefined) {\n            this.allBreakPoints[file] = [];\n        }\n        if (enable) {\n            this.allBreakPoints[file].push(line + \":\" + column);\n        } else {\n            var pos = this.allBreakPoints[file].indexOf(line + \":\" + column);\n            this.allBreakPoints[file].splice(pos, 1);\n        }\n        var _this = this;\n        var newline = await new TSSourceMap().getLineFromTS(file, line, column);\n        var ret = new Promise(function (resolve) {\n            //http://localhost/jassi/public_html/demo/TreeTable.js?bust=1551539152470\n            var sfile = newline.jsfilename;//file.replace(\".ts\", \".js\");\n            var root = window.location.origin + window.location.pathname;\n            root = root.substring(0, root.lastIndexOf(\"/\"));\n            var url = root + \"/\" + newline.jsfilename;//+\"?bust=\"+window.jassiversion;\n            if (newline.jsfilename.indexOf(\":\") > -1)\n                url = newline.jsfilename;//load module from js-file\n            _this.sendChromeMessage({\n                name: \"breakpointChanged\",\n                url: url,\n                line: newline.line,\n                enable: enable,\n                condition: \"1===1\",\n                type: type\n            }, (data) => {\n                resolve(data);\n            });\n        })\n        return ret;\n    }\n    /**\n    * add debugpoints in code\n    * @param {[string]} lines - code\n    * @param {Object.<number, boolean>} debugpoints - the debugpoints\n    * @param {jassi_editor.CodeEditor} codeEditor\n    */\n    addDebugpoints(lines, debugpoints, codeEditor) {\n        //added directly\n\n    }\n    /**\n     * report current variable scope\n     * @param {numer} url - url of the script\n     * @param {[Object.<string,object>]} variables \n     */\n    reportVariables(url, variables, type = undefined) {\n        return;\n        var file = this.urlToFile(url);\n        var _this = this;\n\n        var editor = jassi.windows.findComponent(\"jassi_editor.CodeEditor-\" + file);\n        if (editor !== undefined) {\n            editor.addVariables(variables);\n        }\n\n    }\n    destroy() {\n        //\tchrome.runtime.sendMessage(extensionId,{name: \"disconnect\"},undefined);\n        this.destroyed = true;\n    }\n\n}\n\n\n//if connected then this instance is registred to jassi.debugger;\nnew ChromeDebugger();\nwindow.postMessage({ toJassiExtension: true, name: \"connect\" }, \"*\");\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\r\nimport { Panel } from \"jassi/ui/Panel\";\r\nimport { CodePanel } from \"jassi_editor/CodePanel\";\r\nimport { VariablePanel } from \"jassi/ui/VariablePanel\";\r\nimport { DockingContainer } from \"jassi/ui/DockingContainer\";\r\nimport { ErrorPanel } from \"jassi/ui/ErrorPanel\";\r\nimport { Button } from \"jassi/ui/Button\";\r\nimport registry from \"jassi/remote/Registry\";\r\nimport { Server } from \"jassi/remote/Server\";\r\nimport { Reloader } from \"jassi/util/Reloader\";\r\nimport { classes } from \"jassi/remote/Classes\";\r\nimport { Component } from \"jassi/ui/Component\";\r\nimport { ReportDesign } from \"jassi_report/ReportDesign\";\r\nimport { $Property } from \"jassi/ui/Property\";\r\nimport { Test } from \"jassi/base/Tests\";\r\nimport { AcePanel } from \"jassi_editor/AcePanel\";\r\nimport { Typescript } from \"jassi_editor/util/Typescript\";\r\nimport { MonacoPanel } from \"jassi_editor/MonacoPanel\";\r\n\r\n\r\n\r\n/**\r\n * Panel for editing sources\r\n * @class jassi_editor.CodeEditor\r\n */\r\n@$Class(\"jassi_editor.CodeEditor\")\r\nexport class CodeEditor extends Panel {\r\n    _main: DockingContainer;\r\n    _codeView: Panel;\r\n    _codeToolbar: Panel;\r\n    _codePanel: CodePanel;\r\n    _errors: ErrorPanel;\r\n    _file: string;\r\n    _variables: VariablePanel;\r\n    _design: Panel;\r\n    editMode: boolean;\r\n    __evalToCursorReached: boolean;\r\n    private _line: number;\r\n    constructor() {\r\n        super();\r\n        this.maximize();\r\n        this._main = new DockingContainer();\r\n        this._codeView = new Panel();\r\n        this._codeToolbar = new Panel();\r\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n            this._codePanel = new AcePanel();\r\n        } else {\r\n            this._codePanel = new MonacoPanel();\r\n            // this._codePanel = new AcePanel(); \r\n\r\n        }\r\n        this._errors = new ErrorPanel();\r\n        this._file = \"\";\r\n        this._variables = new VariablePanel();\r\n        this._design = new Panel();\r\n        this._init();\r\n\r\n        this.editMode = true;\r\n    }\r\n\r\n    _init() {\r\n        var _this = this;\r\n        this._codePanel.width = \"100%\";\r\n        this._codePanel.mode = \"typescript\";\r\n\r\n        /*  this._codePanel.getDocTooltip = function (item) {\r\n              return _this.getDocTooltip(item);\r\n          }*/\r\n        this._codeToolbar[\"horizontal\"] = false;\r\n        this._codeToolbar.height = \"30\";\r\n        this._codeView[\"horizontal\"] = true;\r\n        this._codeView.add(this._codeToolbar);\r\n        this._codeView.add(this._codePanel);\r\n        this._codePanel.height = \"calc(100% - 31px)\";\r\n        this._codePanel.width = \"100%\";\r\n        this._main.width = \"calc(100% - 1px)\";\r\n        this._main.height = \"99%\";\r\n        var lasttop = (<HTMLElement>this._main.dom).offsetTop;\r\n        var lasttop2 = 0;\r\n        this._main.onresize = function () {\r\n            setTimeout(function () {\r\n                _this._codePanel.resize();\r\n\r\n            }, 1000);\r\n            /*     if(_this._main.dom.offsetTop!==lasttop){//resize to height\r\n                    lasttop=_this._main.dom.offsetTop;\r\n                    var i=\"calc(100% - \"+(lasttop+1)+\"px)\";\r\n                    _this._main.height=i;\r\n                }*/\r\n            //TODO _this._designView.resize();\r\n        }\r\n        var save = new Button();\r\n        save.tooltip = \"Save(Ctrl+S)\";\r\n        save.icon = \"mdi mdi-content-save mdi-18px\";\r\n        save.onclick(function () {\r\n            _this.save();\r\n        });\r\n        this._codeToolbar.add(save);\r\n\r\n        var run = new Button();\r\n        run.icon = \"mdi mdi-car-hatchback mdi-18px\";\r\n        run.tooltip = \"Run(F4)\";\r\n        run.onclick(function () {\r\n            _this.evalCode();\r\n        });\r\n        this._codeToolbar.add(run);\r\n\r\n        var undo = new Button();\r\n        undo.icon = \"mdi mdi-undo mdi-18px\";\r\n        undo.tooltip = \"Undo (Strg+Z)\";\r\n        undo.onclick(function () {\r\n            _this._codePanel.undo();\r\n        });\r\n        this._codeToolbar.add(undo);\r\n\r\n        var goto = new Button();\r\n        goto.icon = \"mdi mdi-ray-start-arrow mdi-18px\";\r\n        goto.tooltip = \"Goto\";\r\n        goto.onclick(function () {\r\n            _this.gotoDeclaration();\r\n        });\r\n        jassi[\"$CodeEditor\"] = CodeEditor;\r\n        $(goto.dom).attr(\"ondrop\", \"event.preventDefault();jassi.$CodeEditor.search(event.dataTransfer.getData('text'));\");\r\n        $(goto.dom).attr(\"ondragover\", \"event.preventDefault();\");\r\n        this._codeToolbar.add(goto);\r\n\r\n        var test = new Button();\r\n        test.icon = \"mdi mdi-bug mdi-18px\";\r\n        test.tooltip = \"Test\";\r\n        test.onclick(function () {\r\n            var kk = _this._main.layout;\r\n        });\r\n        this._codeToolbar.add(test);\r\n\r\n\r\n        super.add(this._main);\r\n\r\n        this._installView();\r\n        this.registerKeys();\r\n        this._codePanel.onBreakpointChanged(function (line, column, enable, type) {\r\n            jassi.debugger.breakpointChanged(_this._file, line, column, enable, type);\r\n        });\r\n        this._variables.createTable();\r\n        //   this._codePanel.setCompleter(this);\r\n\r\n    }\r\n\r\n    _installView() {\r\n        this._main.add(this._codeView, \"Code..\", \"code\");\r\n        this._main.add(this._variables, \"Variables\", \"variables\");\r\n        this._main.add(this._design, \"Design\", \"design\");\r\n        this._main.add(this._errors, \"Errors\", \"errors\");\r\n        this._main.layout = '{\"settings\":{\"hasHeaders\":true,\"constrainDragToContainer\":true,\"reorderEnabled\":true,\"selectionEnabled\":false,\"popoutWholeStack\":false,\"blockedPopoutsThrowError\":true,\"closePopoutsOnUnload\":true,\"showPopoutIcon\":false,\"showMaximiseIcon\":true,\"showCloseIcon\":true,\"responsiveMode\":\"onload\"},\"dimensions\":{\"borderWidth\":5,\"minItemHeight\":10,\"minItemWidth\":10,\"headerHeight\":20,\"dragProxyWidth\":300,\"dragProxyHeight\":200},\"labels\":{\"close\":\"close\",\"maximise\":\"maximise\",\"minimise\":\"minimise\",\"popout\":\"open in new window\",\"popin\":\"pop in\",\"tabDropdown\":\"additional tabs\"},\"content\":[{\"type\":\"column\",\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"width\":100,\"content\":[{\"type\":\"stack\",\"width\":33.333333333333336,\"height\":80.34682080924856,\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"content\":[{\"title\":\"Code..\",\"type\":\"component\",\"componentName\":\"code\",\"componentState\":{\"title\":\"Code..\",\"name\":\"code\"},\"isClosable\":true,\"reorderEnabled\":true},{\"title\":\"Design\",\"type\":\"component\",\"componentName\":\"design\",\"componentState\":{\"title\":\"Design\",\"name\":\"design\"},\"isClosable\":true,\"reorderEnabled\":true}]},{\"type\":\"row\",\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"height\":19.653179190751445,\"content\":[{\"type\":\"stack\",\"header\":{},\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"height\":50,\"width\":50,\"content\":[{\"title\":\"Errors\",\"type\":\"component\",\"componentName\":\"errors\",\"componentState\":{\"title\":\"Errors\",\"name\":\"errors\"},\"isClosable\":true,\"reorderEnabled\":true}]},{\"type\":\"stack\",\"header\":{},\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"width\":50,\"content\":[{\"title\":\"Variables\",\"type\":\"component\",\"componentName\":\"variables\",\"componentState\":{\"title\":\"Variables\",\"name\":\"variables\"},\"isClosable\":true,\"reorderEnabled\":true}]}]}]}],\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"openPopouts\":[],\"maximisedItemId\":null}'\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    private async _save(code) {\r\n        await new Server().saveFile(this._file, code);\r\n        \r\n       \r\n            var f = this._file.replace(\".ts\", \"\");\r\n            if (code.indexOf(\"@$\") > -1) {\r\n                await registry.reload();\r\n            }\r\n            Reloader.instance.reloadJS(f);\r\n     \r\n        \r\n    }\r\n    /**\r\n    * save the code to server\r\n    */\r\n    save() {\r\n        var code = this._codePanel.value;\r\n        var _this = this;\r\n        this._save(code);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * goto to the declariation on cursor\r\n     */\r\n    async gotoDeclaration() {\r\n        this._codePanel.gotoDeclaration();\r\n    }\r\n\r\n    /**\r\n     * search text in classes at the given text\r\n     * @param {string} text - the text to search\r\n     * @returns {jassi_editor.CodeEditor} - the editor instance\r\n     */\r\n    static async search(text) {\r\n        //TODO ask typescript service\r\n        /* var found = undefined;\r\n         text = text.replaceAll(\"\\r\\n\", \"\\n\");\r\n         var content = undefined;\r\n         //Fast search\r\n         for (var file in classes.getCache()) {\r\n             var fname = file.replaceAll(\".\", \"/\");\r\n             var cl = classes.getCache()[file];\r\n             var code = cl.toString().replaceAll(\"\\r\\n\", \"\\n\");\r\n             if (code.indexOf(text) > -1) {\r\n                 found = fname + \".js\";\r\n                 content = code;\r\n                 break;\r\n             }\r\n         }\r\n         if (found === undefined) {\r\n             //Deep search (slow)\r\n             var files = registry.getAllFilesForService(\"classes\");\r\n             if (files !== undefined) {\r\n                 for (var x = 0; x < files.length; x++) {\r\n                     let code:string = await new Server().loadFile(files[x]);\r\n                     code = code.replaceAll(\"\\r\\n\", \"\\n\");\r\n                     if (code.indexOf(text) > -1) {\r\n                         found = files[x];\r\n                         content = code;\r\n                     }\r\n                 }\r\n             }\r\n         }\r\n         if (found !== undefined) {\r\n             var line = code.substring(0, content.indexOf(text)).split(\"\\n\").length + 1;\r\n             router.navigate(\"#do=jassi_editor.CodeEditor&file=\" + found + \"&line=\" + line.toString());\r\n             //                return await jassi_editor.CodeEditor.open(found+\":\"+line.toString()+\":0\");\r\n         }*/\r\n        return undefined;\r\n    }\r\n\r\n\r\n    /**\r\n     * manage shortcuts\r\n     */\r\n    registerKeys() {\r\n        var _this = this;\r\n        $(this._codePanel.dom).keydown(function (evt) {\r\n            if (evt.keyCode === 115 && evt.shiftKey) {//F4\r\n                // var thiss=this._this._id;\r\n                // var editor = ace.edit(this._this._id);\r\n                _this.evalCode(true);\r\n                evt.preventDefault();\r\n                return false;\r\n            } else if (evt.keyCode === 115) {//F4\r\n                _this.evalCode(false);\r\n                evt.preventDefault();\r\n                return false;\r\n            }\r\n            if (evt.keyCode === 116) {//F5\r\n                evt.preventDefault();\r\n                return false;\r\n            }\r\n\r\n            if ((String.fromCharCode(evt.which).toLowerCase() === 's' && evt.ctrlKey)/* && (evt.which == 19)*/) {//Str+s\r\n                _this.save();\r\n                evt.preventDefault();\r\n                return false;\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n    /**\r\n     * extract lines from code\r\n     * @param {string} code - the code\r\n     * @returns {[string]} - all lines\r\n     */\r\n    _codeToLines(code) {\r\n        var lines = code.split(\"\\n\");\r\n        for (var x = 0; x < lines.length; x++) {\r\n            while (lines[x].startsWith(\"/\") || lines[x].startsWith(\" \")\r\n                || lines[x].startsWith(\"*\") || lines[x].startsWith(\"\\t\")) {\r\n                lines[x] = lines[x].substring(1);\r\n            }\r\n        }\r\n        return lines;\r\n    }\r\n\r\n\r\n    _evalToCursorReached() {\r\n        if (this.__evalToCursorReached !== true)\r\n            this._main.show('code');\r\n        this.__evalToCursorReached = true;\r\n    }\r\n    /**\r\n     * add variables to variabelpanel\r\n     * @param Object<string,object> variables [\"name\"]=value\r\n     */\r\n    addVariables(variables) {\r\n        this._variables.addAll(variables);\r\n    }\r\n    private async _evalCodeOnLoad(data) {\r\n\r\n        var code = this._codePanel.value;\r\n        var lines = code.split(\"\\n\");\r\n        var _this = this;\r\n        var breakpoints = _this._codePanel.getBreakpoints();\r\n        var filename = _this._file.replace(\".ts\", \"$temp.ts\");\r\n        await jassi.debugger.removeBreakpointsForFile(filename);\r\n        for (var line in breakpoints) {\r\n            if (breakpoints[line]) {\r\n                var row = lines[line].length;\r\n                await jassi.debugger.breakpointChanged(filename, line, row, true, \"debugpoint\");\r\n            }\r\n        }\r\n  \r\n        var islocaldb=classes.getClass(\"jassi_localserver.DBManager\");\r\n        if(islocaldb&&code.indexOf(\"@$DBObject(\")>-1){\r\n            \r\n            (<any>islocaldb).destroyConnection();\r\n        }\r\n        if (data.test !== undefined) {\r\n            var ret = await data.test(new Test());\r\n            // Promise.resolve(ret).then(async function(ret) {\r\n            if (ret !== undefined) {\r\n\r\n                if (ret.layout !== undefined)\r\n                    _this.variables.addVariable(\"this\", ret);\r\n                else {\r\n                    //get variablename from return\r\n                    var sfunc: string = data.test.toString();\r\n                    var pos = sfunc.lastIndexOf(\"return \");\r\n                    var pose = sfunc.indexOf(\";\", pos);\r\n                    var retvar = sfunc.substring(pos + 7, pose).trim();\r\n                    _this.variables.addVariable(retvar, ret);\r\n                }\r\n                _this.variables.addVariable(\"me\", ret.me);\r\n\r\n                _this.variables.updateCache();\r\n                if (ret instanceof Component && ret[\"reporttype\"] === undefined) {\r\n                    require([\"jassi_editor/ComponentDesigner\"], function () {\r\n                        var ComponentDesigner = classes.getClass(\"jassi_editor.ComponentDesigner\");\r\n                        if (!((_this._design) instanceof ComponentDesigner)) {\r\n                            _this._design = new ComponentDesigner();\r\n                            _this._main.add(_this._design, \"Design\", \"design\");\r\n                            _this._design[\"codeEditor\"] = _this;\r\n                        }\r\n                        _this._design[\"designedComponent\"] = ret;\r\n                    });\r\n                } else if (ret[\"reporttype\"] !== undefined) {\r\n                    require([\"jassi_report/designer/ReportDesigner\"], function () {\r\n                        var ReportDesigner = classes.getClass(\"jassi_report.designer.ReportDesigner\");\r\n                        if (!((_this._design) instanceof ReportDesigner)) {\r\n                            _this._design = new ReportDesigner();\r\n                            _this._main.add(_this._design, \"Design\", \"design\");\r\n                            _this._design[\"codeEditor\"] = _this;\r\n                        }\r\n                        _this._design[\"designedComponent\"] = ret;\r\n\r\n                        /*   require([\"jassi_report/ReportDesign\"], function() {\r\n                               var rd = classes.getClass(\"jassi_report.ReportDesign\");\r\n                               let rep = rd[\"fromJSON\"](ret);\r\n                               \r\n                               _this._design[\"designedComponent\"] = rep;\r\n                           });*/\r\n                    });\r\n                }\r\n            }\r\n            //  });\r\n        }\r\n\r\n    }\r\n    private async saveTempFile(file: string, code: string) {\r\n\r\n\r\n        //@ts-ignore \r\n        var tss = await import(\"jassi_editor/util/Typescript\");\r\n        var settings = Typescript.compilerSettings;\r\n        settings[\"inlineSourceMap\"] = true;\r\n        settings[\"inlineSources\"] = true;\r\n        var files = await tss.default.transpile(file + \".ts\", code);\r\n\r\n        var codets = -1;\r\n        var codemap = -1;\r\n        var codejs = -1;\r\n        for (var x = 0; x < files.fileNames.length; x++) {\r\n            if (files.fileNames[x].endsWith(\".ts\")) {\r\n                codets = x;\r\n            }\r\n            if (files.fileNames[x].endsWith(\".js.map\")) {\r\n                codemap = x;\r\n            }\r\n            if (files.fileNames[x].endsWith(\".js\")) {\r\n                codejs = x;\r\n            }\r\n        }\r\n        /*  var all = JSON.parse(files.contents[codemap]);\r\n          all[\"sourcesContent\"] = [files.contents[codets]];\r\n          files.contents[codemap] = JSON.stringify(all);\r\n          var b64 = btoa(unescape(encodeURIComponent(files.contents[codemap])));\r\n          var pos = files.contents[codejs].indexOf(\"//\" + \"# sourceMappingURL=\");\r\n          files.contents[codejs] = files.contents[codejs].substring(0, pos);\r\n          files.contents[codejs] = files.contents[codejs] + \"//\" + \"# sourceMappingURL=data:application/json;charset=utf8;base64,\" + b64;\r\n          */\r\n        const channel = new MessageChannel();\r\n\r\n        var ret = new Promise((res, rej) => {\r\n            channel.port1.onmessage = (evt) => {\r\n                channel.port1.close();\r\n                res(evt);\r\n            };\r\n        });\r\n        let abspath = location.origin + location.pathname;\r\n        abspath = abspath.substring(0, abspath.lastIndexOf(\"/\") + 1);\r\n        navigator.serviceWorker.controller.postMessage({\r\n            type: 'SAVE_FILE',\r\n            filename: abspath + files.fileNames[codejs],\r\n            code: files.contents[codejs]\r\n        }, [channel.port2]);\r\n        var test = await ret;\r\n    }\r\n    /**\r\n     * execute the current code\r\n     * @param {boolean} toCursor -  if true the variables were inspected on cursor position, \r\n     *                              if false at the end of the layout() function or at the end of the code\r\n     */\r\n    async evalCode(toCursor = undefined) {\r\n        this.__evalToCursorReached = false;\r\n        this._variables.clear();\r\n        //this._variables.add(\"this\",this);\r\n\r\n        var code = this._codePanel.value;\r\n        var lines = code.split(\"\\n\");\r\n\r\n        var _this = this;\r\n        window[\"test\"] = undefined;\r\n\r\n        code = \"\";\r\n        for (var x = 0; x < lines.length; x++) {\r\n            code = code + lines[x] + \"\\n\";\r\n        }\r\n        code = code;\r\n        var _this = this;\r\n        var tmp = new Date().getTime();\r\n        var jsfile = _this._file.replace(\".ts\", \"\") + \"$temp\";\r\n        //await new Server().saveFile(\"tmp/\" + _this._file, code);\r\n        //only local - no TS File in Debugger\r\n        await this.saveTempFile(jsfile, code);\r\n\r\n        try { requirejs.undef(\"js/\" + jsfile + \".js\"); } catch (ex) { };\r\n        var onload = function (data) {\r\n\r\n            _this._evalCodeOnLoad(data).catch((err) => {\r\n                throw err;\r\n            });\r\n\r\n        }\r\n        //await new Promise(resolve => setTimeout(resolve, 1000));\r\n        //if this is the first save for the tmpfile then it fails - I dont know why, give it a second try\r\n        require([\"js/\" + jsfile + \".js\"], onload,/*error*/function (err) {\r\n            //console.log(\"reload\");\r\n            window.setTimeout(function () {\r\n                require([\"js/\" + jsfile + \".js\"], onload, function (err) {\r\n                    throw err;\r\n                });\r\n            }, 20);\r\n        });\r\n\r\n\r\n\r\n    }\r\n    /**\r\n     * switch view\r\n     * @member {string} view - \"design\" or \"code\"\r\n     */\r\n    set viewmode(view) {\r\n        this._main.show(view);\r\n    }\r\n\r\n    /**\r\n    * get all known instances for type\r\n    * @param {type} type - the type we are interested\r\n    * @returns {[string]}\r\n    */\r\n    getVariablesForType(type) {\r\n        return this._variables.getVariablesForType(type);\r\n    }\r\n    /**\r\n     * gets the name of the variabel that holds the object\r\n     * @param {object} ob - the\r\n     */\r\n    getVariableFromObject(ob) {\r\n        return this._variables.getVariableFromObject(ob);\r\n    }\r\n\r\n    /**\r\n     * gets the name object of the given variabel\r\n     * @param {string} ob - the name of the variable\r\n     */\r\n    getObjectFromVariable(varname) {\r\n        return this._variables.getObjectFromVariable(varname);\r\n    }\r\n\r\n    /**\r\n      * renames a variable in design\r\n      * @param {string} oldName\r\n      * @param {string} newName\r\n      */\r\n    renameVariable(oldName, newName) {\r\n        this._variables.renameVariable(oldName, newName);\r\n        if (this._design !== undefined && this._design[\"_componentExplorer\"] !== undefined)\r\n            this._design[\"_componentExplorer\"].update();\r\n    }\r\n\r\n\r\n    /**\r\n     * @member { jassi_editor.VariablePanel} - the variable\r\n     */\r\n    set variables(value) {\r\n        this._variables = value;\r\n    }\r\n    get variables() {\r\n        return this._variables;\r\n    }\r\n    /**\r\n     * @member {string} - the code\r\n     */\r\n    set value(value) {\r\n        this._codePanel.file = this._file;\r\n        this._codePanel.value = value;\r\n    }\r\n    get value() {\r\n        return this._codePanel.value;\r\n    }\r\n    setCursorPorition(position: number) {\r\n        this.cursorPosition = this._codePanel.numberToPosition(position);\r\n    }\r\n    /**\r\n    * @param {object} position - the current cursor position {row= ,column=}\r\n    */\r\n    set cursorPosition(cursor: { row: number, column: number }) {\r\n        this._codePanel.cursorPosition = cursor;\r\n    }\r\n    get cursorPosition() {\r\n        return this._codePanel.cursorPosition;\r\n    }\r\n\r\n    /**\r\n     * @member {string} - title of the component\r\n     */\r\n    get title() {\r\n        var s = this.file.split(\"/\");\r\n        return s[s.length - 1];\r\n    }\r\n    /**\r\n    * @member {string} - the url to edit\r\n    */\r\n    set file(value: string) { //the Code\r\n        this._file = value;\r\n        this.openFile(value);\r\n    }\r\n    @$Property({ isUrlTag: true, id: true })\r\n    get file(): string {\r\n        return this._file;\r\n    }\r\n    /**\r\n    * goes to the line number \r\n    * @param {object} value - the line number \r\n    */\r\n    set line(value: number) {\r\n        this._line = Number(value);\r\n        this.cursorPosition = { row: this._line, column: 1 };\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.cursorPosition = { row: this._line, column: 1 };\r\n        }, 300);\r\n        /*setTimeout(function() {\r\n            _this.cursorPosition = { row: value, column: 0 };\r\n        }, 1000);//start takes one second....*/\r\n    }\r\n    @$Property({ isUrlTag: true })\r\n    get line(): number {\r\n        return this.cursorPosition.row;\r\n    }\r\n    /**\r\n     * open the file\r\n     */\r\n    async openFile(_file) {\r\n        this._file = _file;\r\n        var content = await new Server().loadFile(this._file);\r\n        this._codePanel.file = _file;\r\n        this._codePanel.value = content;\r\n        this._codePanel.width = \"100%\";\r\n        //  this._codePanel.height=\"100%\";\r\n        this._main.update();\r\n        if (this._line)\r\n            this.line = this._line;\r\n\r\n    }\r\n    destroy() {\r\n        this._codeView.destroy();\r\n        this._codeToolbar.destroy();\r\n        this._codePanel.destroy();\r\n        this._errors.destroy();\r\n        this._variables.destroy();\r\n        this._design.destroy();\r\n        //this._main.destroy();\r\n        super.destroy();\r\n    }\r\n    /**\r\n    * undo action\r\n    */\r\n    undo() {\r\n        this._codePanel.undo();\r\n    }\r\n\r\n}\r\n\r\nexport async function test() {\r\n    var editor = new CodeEditor();\r\n    var url = \"demo/DialogKunde.ts\";\r\n    editor.height = 500;\r\n    await editor.openFile(url);\r\n    return editor;\r\n\r\n};\r\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\r\nimport {Panel} from \"jassi/ui/Panel\";\r\nimport {HTMLPanel} from \"jassi/ui/HTMLPanel\";\r\nimport \"jassi/ui/Image\";\r\nimport registry from \"jassi/remote/Registry\";\r\nimport {InvisibleComponent} from \"jassi/ui/InvisibleComponent\";\r\nimport {Button} from \"jassi/ui/Button\";\r\nimport { classes } from \"jassi/remote/Classes\";\r\nimport {Component,  $UIComponent, UIComponentProperties } from \"jassi/ui/Component\";\r\nimport {CodeEditor} from \"jassi_editor/CodeEditor\";//could be removed\r\n\r\ndeclare global {\r\n    export interface ExtensionAction {\r\n        componentDesignerInvisibleComponentClicked?:{\r\n            codeEditor:CodeEditor,\r\n            designButton:Button\r\n        }\r\n    }\r\n}\r\n@$Class(\"jassi_editor.CodeEditorInvisibleComponents\")\r\nexport class CodeEditorInvisibleComponents extends Panel {\r\n    codeeditor;\r\n    constructor(codeeditor) {\r\n        super();\r\n        super.init($('<span class=\"Panel\" style=\"border:1px solid #ccc;\"/>')[0]);\r\n        /** \r\n       * @member {jassi_editor.CodeEditor} - the parent CodeEditor\r\n       * */\r\n\r\n        this.codeeditor = codeeditor;\r\n        this.layout();\r\n    }\r\n    layout() {\r\n        this.update();\r\n    }\r\n    async update() {\r\n\r\n        var _this = this;\r\n        while (_this._components.length > 0) {\r\n            _this.remove(_this._components[0]);\r\n        }\r\n        var elements = _this.codeeditor.getVariablesForType(InvisibleComponent);\r\n        for (var x = 0; x < elements.length; x++) {\r\n            var img = new Button();\r\n            var name = elements[x];\r\n            img.tooltip = name;\r\n            //                    img.height=24;\r\n            //  img.width=24;\r\n            img.text = name.startsWith(\"me.\") ? name.substring(3) : name;\r\n            var ob = _this.codeeditor.getObjectFromVariable(name);\r\n            img.dom[\"ob\"] = ob;\r\n            img.onclick(function (evt) {\r\n                _this.codeeditor._design._propertyEditor.value = evt.currentTarget.ob;\r\n                var ac = evt.currentTarget.ob.extensionCalled;\r\n                if (ac !== undefined) {\r\n                    evt.currentTarget.ob.extensionCalled({componentDesignerInvisibleComponentClicked:{ codeEditor:_this.codeeditor,designButton:img}});\r\n                }\r\n            });\r\n            var cn = classes.getClassName(ob);\r\n            //search icon\r\n            var regdata=await registry.getJSONData(\"$UIComponent\");\r\n            regdata.forEach(function(val){\r\n                if(val.classname===cn){\r\n                    img.icon=val.params[0].icon;\r\n                }\r\n            });\r\n            _this.add(img);\r\n        }\r\n        /* if(entries===undefined)\r\n              return;\r\n          for(var key in entries){\r\n              var entry=entries[key].data;\r\n              var img=new jassi.ui.Image();\r\n              var name=entry[1].split(\"/\");\r\n              name=name[name.length-1];\r\n              img.tooltip=name;\r\n              img.src=entry[2];\r\n              img.height=24;\r\n              img.width=24;\r\n              img.createFromType=entry[0];\r\n              _this._makeDraggable(img);\r\n              _this.add(img);\r\n          }*/\r\n\r\n    }\r\n    /**\r\n     * install the draggable\r\n     * @param {jassi.ui.Component} component\r\n     */\r\n    _makeDraggable(component) {\r\n        var helper = new (classes.getClass(component.createFromType))();\r\n        $(\"#jassitemp\")[0].removeChild(helper.domWrapper);\r\n        $(component.dom).draggable({\r\n            cancel: \"false\", revert: \"invalid\",\r\n            appendTo: \"body\",\r\n            helper: function (event) {\r\n                return $(helper.dom);\r\n            }\r\n            /*   drag:function(event,ui){\r\n                   var mouse=event.target._this.dom.style.cursor;\r\n                   if(mouse===\"e-resize\"||mouse===\"s-resize\"||mouse===\"se-resize\")\r\n                       return false;\r\n                   else\r\n                       return true;\r\n               }*/\r\n\r\n        });\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n    }\r\n}\r\n","import { $Class } from \"jassi/remote/Jassi\";\r\nimport { Panel } from \"jassi/ui/Panel\";\r\nimport typescript from \"jassi_editor/util/Typescript\";\r\nimport { router } from \"jassi/base/Router\";\r\n\r\n@$Class(\"jassi_editor.CodePanel\")\r\nexport abstract class CodePanel extends Panel {\r\n    file: string;\r\n\r\n\r\n    resize() {\r\n\r\n    }\r\n    undo() {\r\n\r\n    }\r\n    abstract set mode(mode: string);\r\n    abstract get mode(): string;\r\n    abstract set value(value: string);\r\n    abstract get value(): string;\r\n    /**\r\n     * breakpoint changed\r\n     * @param {function} handler - function(line,enabled,type)\r\n     */\r\n    onBreakpointChanged(handler) {\r\n        this.addEvent(\"breakpointChanged\", handler);\r\n    }\r\n\r\n    /**\r\n    * gets a list of all lines with breakpoint\r\n    * @returns {Object.<number, boolean>}\r\n    */\r\n    getBreakpoints(): { [line: number]: boolean } {\r\n        return undefined;\r\n    }\r\n    public numberToPosition(pos: number): { row: number, column: number } {\r\n\t\treturn CodePanel.numberToPosition(this.file,pos,this.value);\r\n        /*var ret = typescript.getLineAndCharacterOfPosition(this.file, pos);\r\n        return {\r\n            row: ret.line,\r\n            column: ret.character\r\n        };*/\r\n    }\r\n    public static numberToPosition(file:string,pos: number,code:string): { row: number, column: number } {\r\n\t\tif(code!==undefined)\r\n    \t\ttypescript.setCode(file,code);\r\n        var ret = typescript.getLineAndCharacterOfPosition(file, pos);\r\n        return {\r\n            row: ret.line,\r\n            column: ret.character\r\n        };\r\n    }\r\n    public positionToNumber(pos: { row: number, column: number }): number {\r\n    \ttypescript.setCode(this.file,this.value);\r\n        var ret = typescript.getPositionOfLineAndCharacter(this.file, {\r\n            line: pos.row,\r\n            character: pos.column\r\n        });\r\n        return ret;\r\n    }\r\n    public static async getAutoimport(lpos:number,file:string,code:string):Promise<{text:string,pos:{ row: number, column: number }}> {\r\n       \r\n        //var lpos = this.positionToNumber(this.cursorPosition);\r\n        //@ts-ignore\r\n        var change=await typescript.getCodeFixesAtPosition(file, code, lpos, lpos, [2304]);\r\n            if (change === undefined)\r\n                return;\r\n            for (let x = 0;x < change.length;x++) {\r\n                if (change[x].changes[0].textChanges[0].newText === \"const \") {\r\n                    change.splice(x, 1);\r\n                }\r\n            }\r\n            if (change.length > 0) {\r\n                var entr = change[0].changes[0].textChanges[0];\r\n                let insertPos = CodePanel.numberToPosition(file,entr.span.start,code);\r\n                insertPos.row = insertPos.row - 1;\r\n                //Bug duplicate insert {Kunde,Kunde}\r\n                if (entr.newText.indexOf(\",\")>-1) {\r\n                    var thisline = code.substring(1 + code.lastIndexOf(\"{\", entr.span.start), code.indexOf(\"}\", entr.span.start));\r\n                    thisline=\"*\"+thisline.replaceAll(\" \",\"*\").replaceAll(\"}\",\"*\").replaceAll(\",\",\"*\")+\"*\";\r\n                    \r\n                    var cl = entr.newText.split(\",\")[0];\r\n                    if (thisline.indexOf(\"*\"+cl+\"*\")>0) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                //relative to absolute\r\n                var words = entr.newText.split(\"\\\"\");\r\n                var oldPath: string = words[1];\r\n\r\n                var path = file.split(\"/\");\r\n                path.splice(-1, 1);//remove last\r\n                if (oldPath !== undefined && oldPath.startsWith(\".\")) {//convert relative to absolute\r\n                    if (oldPath.startsWith(\"./\"))\r\n                        oldPath = oldPath.substring(2);\r\n                    while (oldPath.startsWith(\"../\")) {\r\n                        oldPath = oldPath.substring(3);\r\n                        path.splice(-1, 1);\r\n                    }\r\n                    var newPath = \"\";\r\n                    for (let x = 0;x < path.length;x++) {\r\n                        newPath = newPath + path[x] + \"/\";\r\n                    }\r\n                    newPath = newPath + oldPath;\r\n                    return {\r\n                    \ttext:words[0] + \"\\\"\" + newPath + \"\\\"\" + words[2],\r\n                    \tpos:insertPos\r\n                    }\r\n                  //  this.insert(this.positionToNumber(insertPos), words[0] + \"\\\"\" + newPath + \"\\\"\" + words[2]);\r\n                } else {\r\n                \t return {\r\n                    \ttext:entr.newText,\r\n                    \tpos:insertPos\r\n                    }\r\n                    //this.insert(this.positionToNumber(insertPos), entr.newText);\r\n                }\r\n               // typescript.setCode(this.file, this.value);\r\n            }\r\n            return undefined;\r\n\r\n    }\r\n\r\n    /**\r\n   * @param {object} position - the current cursor position {row= ,column=}\r\n   */\r\n    abstract set cursorPosition(cursor: { row: number, column: number });\r\n\r\n    abstract get cursorPosition(): { row: number, column: number };\r\n    /**\r\n         * goes to the declaration under cursor\r\n         */\r\n    gotoDeclaration() {\r\n        var pos = this.positionToNumber(this.cursorPosition)\r\n        var test = this.numberToPosition(pos);\r\n        if (!typescript.isInited(this.file)) {\r\n            $.notify(\"please try later ... loading in progress\", \"info\", { position: \"bottom right\" });\r\n            return;\r\n        }\r\n        typescript.getDefinitionAtPosition(this.file, pos).then((def) => {\r\n            if (def !== undefined && def.length > 0) {\r\n                var entr = def[0];\r\n                var file = entr.fileName?.replace(\"file:///\", \"\");\r\n                var p = entr.textSpan.start;\r\n                var newPos = CodePanel.numberToPosition(file,p,undefined);\r\n                var line = newPos.row;\r\n                router.navigate(\"#do=jassi_editor.CodeEditor&file=\" + file + \"&line=\" + line);\r\n            }\r\n\r\n        });\r\n    }\r\n}","import jassi, { $Class } from \"jassi/remote/Jassi\";\r\nimport {Panel} from \"jassi/ui/Panel\";\r\nimport {VariablePanel} from \"jassi/ui/VariablePanel\";\r\nimport {PropertyEditor} from \"jassi/ui/PropertyEditor\";\r\nimport {ComponentExplorer} from \"jassi_editor/ComponentExplorer\";\r\nimport {ComponentPalette} from \"jassi_editor/ComponentPalette\";\r\nimport {Resizer} from \"jassi_editor/util/Resizer\";\r\n//import DragAndDropper from \"jassi/ui/helper/DragAndDropper\";\r\nimport {ErrorPanel} from \"jassi/ui/ErrorPanel\";\r\nimport {CodeEditorInvisibleComponents} from \"jassi_editor/CodeEditorInvisibleComponents\";\r\nimport {Repeater} from \"jassi/ui/Repeater\";\r\nimport  \"jassi/ui/Databinder\";\r\nimport {Button} from \"jassi/ui/Button\";\r\nimport {Component} from \"jassi/ui/Component\";\r\nimport {DragAndDropper} from \"jassi_editor/util/DragAndDropper\";\r\nimport {ComponentDescriptor} from \"jassi/ui/ComponentDescriptor\";\r\nimport { classes } from \"jassi/remote/Classes\";\r\nimport {Container} from \"jassi/ui/Container\";\r\n\r\ndeclare global {\r\n    export interface ExtensionAction {\r\n        componentDesignerSetDesignMode?: {\r\n            enable:boolean,\r\n            componentDesigner:ComponentDesigner\r\n        }\r\n        componentDesignerComponentCreated?:{\r\n            //component:Component\r\n            newParent:Container\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n@$Class(\"jassi_editor.ComponentDesigner\")\r\nexport class ComponentDesigner extends Panel{\r\n        _codeEditor;\r\n        editMode:boolean;\r\n        _variables:VariablePanel;\r\n        _propertyEditor:PropertyEditor;\r\n        _errors:ErrorPanel;\r\n        _componentPalette:ComponentPalette;\r\n        _componentExplorer:ComponentExplorer;\r\n        _invisibleComponents:CodeEditorInvisibleComponents;\r\n        _designToolbar:Panel;\r\n        _designPlaceholder:Panel;\r\n        _resizer:Resizer;\r\n        _draganddropper:DragAndDropper;\r\n        lastSelected:Component;\r\n       \r\n        constructor(){\r\n            super();\r\n            this._codeEditor=undefined;\r\n            this._initDesign();\r\n            this.editMode=true;\r\n           // this.lastSelected=undefined;\r\n       \r\n        }\r\n        set codeEditor(value){\r\n        \tvar _this=this;\r\n        \tthis._codeEditor=value;\r\n        \tthis._variables=this._codeEditor._variables; \r\n            this._propertyEditor=new PropertyEditor(value);\r\n         //   this._propertyEditor=new PropertyEditor(undefined);\r\n            this._errors=this._codeEditor._errors;\r\n            this._componentPalette=new ComponentPalette();\r\n            this._componentPalette.service=\"$UIComponent\";\r\n            this._componentExplorer=new ComponentExplorer(value,this._propertyEditor); \r\n            this._invisibleComponents=new CodeEditorInvisibleComponents(value);\r\n            this.add(this._invisibleComponents);\r\n            this._initComponentExplorer();\r\n            this._installView();\r\n            this._codeEditor._codePanel.onblur(function(evt){\r\n                _this._propertyEditor.updateParser();\r\n            });\r\n            this.registerKeys();\r\n            \r\n        }\r\n        get codeEditor(){\r\n        \treturn this._codeEditor;\r\n        }\r\n        _initDesign(){\r\n        \tvar _this=this;\r\n            this._designToolbar=new Panel();\r\n            this._designPlaceholder=new Panel();\r\n            var save=new Button();\r\n            save.tooltip=\"Save(Ctrl+S)\";\r\n            save.icon=\"mdi mdi-content-save mdi-18px\";\r\n            save.onclick(function(){\r\n                 _this.save(); \r\n            });\r\n            this._designToolbar.add(save);\r\n    \t\t\r\n    \t\tvar run=new Button();\r\n            run.icon=\"mdi mdi-car-hatchback mdi-18px\";\r\n            run.tooltip=\"Run(F4)\";\r\n            run.onclick(function(){\r\n               _this.evalCode(); \r\n            });\r\n            this._designToolbar.add(run);\r\n           \r\n            var undo=new Button();\r\n            undo.icon=\"mdi mdi-undo mdi-18px\";\r\n            undo.tooltip=\"Undo (Strg+Z)\";\r\n            undo.onclick(function(){\r\n               _this.undo(); \r\n            });\r\n            this._designToolbar.add(undo);\r\n            \r\n             var test=new Button();\r\n            test.icon=\"mdi mdi-bug mdi-18px\";\r\n            test.tooltip=\"Test\";\r\n            test.onclick(function(){\r\n            \t\t\t//var kk=_this._codeView.layout;\r\n            });\r\n            this._designToolbar.add(test);\r\n            \r\n           \r\n            var edit=new Button();\r\n            edit.icon=\"mdi mdi-run mdi-18px\";\r\n            edit.tooltip=\"Test Dialog\";\r\n            edit.onclick(function(){\r\n            \t_this.editDialog(!_this.editMode); \r\n            \tedit.toggle(!_this.editMode);\r\n               \r\n            });\r\n            this._designToolbar.add(edit);\r\n           \r\n            var lasso=new Button();\r\n            lasso.icon=\"mdi mdi-lasso mdi-18px\";\r\n            lasso.tooltip=\"Select rubberband\";\r\n            lasso.onclick(function(){\r\n                var val=lasso.toggle();\r\n                _this._resizer.setLassoMode(val);\r\n\t\t\t\t_this._draganddropper.canDrop(!val);\r\n            });\r\n            this._designToolbar.add(lasso);\r\n           \r\n            var remove=new Button();\r\n            remove.icon=\"mdi mdi-delete-forever-outline mdi-18px\";\r\n            remove.tooltip=\"Delete selected Control (ENTF)\";\r\n            remove.onclick(function(){\r\n               _this.removeComponent(); \r\n            });\r\n            this._designToolbar.add(remove);\r\n            this.add(this._designToolbar);\r\n\t\t\t$(this._designPlaceholder.domWrapper).css(\"position\",\"relative\");\r\n            this.add(this._designPlaceholder);\r\n            \r\n          \r\n        }\r\n          /**\r\n         * manage shortcuts\r\n         */\r\n        registerKeys(){\r\n            var _this=this;\r\n            $( this._codeEditor._design.dom).attr(\"tabindex\",\"1\");\r\n            $(this._codeEditor._design.dom).keydown(function(evt) {\r\n                if(evt.keyCode===115&&evt.shiftKey){//F4\r\n                   // var thiss=this._this._id;\r\n                   // var editor = ace.edit(this._this._id);\r\n                   _this.evalCode(true);\r\n                   evt.preventDefault();\r\n                   return false;\r\n                }else if(evt.keyCode===115) {//F4\r\n                     _this.evalCode(false);\r\n                   evt.preventDefault();\r\n                   return false;\r\n                }\r\n                if(evt.keyCode===90||evt.ctrlKey){//Ctrl+Z\r\n                    _this.undo();\r\n                }\r\n                if(evt.keyCode===116){//F5\r\n                    evt.preventDefault();\r\n                    return false;\r\n                }\r\n                 if(evt.keyCode===46){//Del\r\n                     _this.removeComponent();\r\n                    evt.preventDefault();\r\n                    return false;\r\n                }\r\n                \r\n                if (( String.fromCharCode(evt.which).toLowerCase() === 's' && evt.ctrlKey)/* && (evt.which == 19)*/) {//Str+s\r\n                    _this.save();\r\n                     event.preventDefault();\r\n                    return false;\r\n                }\r\n                \r\n            });\r\n        }\r\n        resize(){\r\n        \tthis._updateInvisibleComponents();\r\n        }\r\n        _installView(){\r\n            this._codeEditor._main.add(this._propertyEditor,\"Properties\",\"properties\"); \r\n            this._codeEditor._main.add(this._componentExplorer,\"Components\",\"components\"); \r\n            this._codeEditor._main.add(this._componentPalette,\"Palette\",\"componentPalette\"); \r\n            this._codeEditor._main.layout='{\"settings\":{\"hasHeaders\":true,\"constrainDragToContainer\":true,\"reorderEnabled\":true,\"selectionEnabled\":false,\"popoutWholeStack\":false,\"blockedPopoutsThrowError\":true,\"closePopoutsOnUnload\":true,\"showPopoutIcon\":false,\"showMaximiseIcon\":true,\"showCloseIcon\":true,\"responsiveMode\":\"onload\"},\"dimensions\":{\"borderWidth\":5,\"minItemHeight\":10,\"minItemWidth\":10,\"headerHeight\":20,\"dragProxyWidth\":300,\"dragProxyHeight\":200},\"labels\":{\"close\":\"close\",\"maximise\":\"maximise\",\"minimise\":\"minimise\",\"popout\":\"open in new window\",\"popin\":\"pop in\",\"tabDropdown\":\"additional tabs\"},\"content\":[{\"type\":\"column\",\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"content\":[{\"type\":\"row\",\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"height\":81.04294066258988,\"content\":[{\"type\":\"stack\",\"width\":80.57491289198606,\"height\":71.23503465658476,\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"content\":[{\"title\":\"Code..\",\"type\":\"component\",\"componentName\":\"code\",\"componentState\":{\"title\":\"Code..\",\"name\":\"code\"},\"isClosable\":true,\"reorderEnabled\":true},{\"title\":\"Design\",\"type\":\"component\",\"componentName\":\"design\",\"componentState\":{\"title\":\"Design\",\"name\":\"design\"},\"isClosable\":true,\"reorderEnabled\":true}]},{\"type\":\"column\",\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"width\":19.42508710801394,\"content\":[{\"type\":\"stack\",\"header\":{},\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"height\":19.844357976653697,\"content\":[{\"title\":\"Palette\",\"type\":\"component\",\"componentName\":\"componentPalette\",\"componentState\":{\"title\":\"Palette\",\"name\":\"componentPalette\"},\"isClosable\":true,\"reorderEnabled\":true}]},{\"type\":\"stack\",\"header\":{},\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"height\":80.1556420233463,\"content\":[{\"title\":\"Properties\",\"type\":\"component\",\"componentName\":\"properties\",\"componentState\":{\"title\":\"Properties\",\"name\":\"properties\"},\"isClosable\":true,\"reorderEnabled\":true}]}]}]},{\"type\":\"row\",\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"height\":18.957059337410122,\"content\":[{\"type\":\"stack\",\"header\":{},\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"height\":18.957059337410122,\"width\":77.70034843205575,\"content\":[{\"title\":\"Variables\",\"type\":\"component\",\"componentName\":\"variables\",\"componentState\":{\"title\":\"Variables\",\"name\":\"variables\"},\"isClosable\":true,\"reorderEnabled\":true},{\"title\":\"Errors\",\"type\":\"component\",\"componentName\":\"errors\",\"componentState\":{\"title\":\"Errors\",\"name\":\"errors\"},\"isClosable\":true,\"reorderEnabled\":true}]},{\"type\":\"stack\",\"header\":{},\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"activeItemIndex\":0,\"width\":22.299651567944256,\"content\":[{\"title\":\"Components\",\"type\":\"component\",\"componentName\":\"components\",\"componentState\":{\"title\":\"Components\",\"name\":\"components\"},\"isClosable\":true,\"reorderEnabled\":true}]}]}]}],\"isClosable\":true,\"reorderEnabled\":true,\"title\":\"\",\"openPopouts\":[],\"maximisedItemId\":null}';\r\n\t\t}\r\n        \r\n       _updateInvisibleComponents(){\r\n            var _this=this;\r\n            this._invisibleComponents.update().then(function(){\r\n               /* var h=_this._invisibleComponents.dom.offsetHeight;\r\n                h=h+6+31;\r\n                _this._designPlaceholder.height=\"calc(100% - \"+h+\"px)\";*/\r\n            });\r\n         }\r\n       \r\n         _initComponentExplorer(){\r\n             var _this=this;\r\n             this._componentExplorer.onclick(function(data){\r\n               var ob=data.data; \r\n               _this._propertyEditor.value=ob;\r\n            });\r\n            this._componentExplorer.getComponentName=function(item){\r\n                var varname=_this._codeEditor.getVariableFromObject(item);\r\n                if(varname===undefined)\r\n                    return;\r\n                if(varname.startsWith(\"this.\"))\r\n                    return varname.substring(5);\r\n                return varname;\r\n            };\r\n        }\r\n        /**\r\n         * removes the selected component\r\n         */\r\n        removeComponent(){\r\n            var todel=this._propertyEditor.value;\r\n            var varname=this._codeEditor.getVariableFromObject(todel);\r\n            if(varname!==\"this\"){\r\n                if(todel.domWrapper._parent!==undefined){\r\n                    todel.domWrapper._parent.remove(todel);\r\n                }\r\n                this._propertyEditor.removeVariableInCode(varname);\r\n                this._propertyEditor.removeVariableInDesign(varname);\r\n                this._updateInvisibleComponents();\r\n            } \r\n            \r\n        }\r\n         /**\r\n         * execute the current code\r\n         * @param {boolean} toCursor -  if true the variables were inspected on cursor position, \r\n         *                              if false at the end of the layout() function or at the end of the code\r\n         */\r\n        evalCode(toCursor=undefined){\r\n        \tthis._codeEditor.evalCode(toCursor);\r\n        \t\r\n        }\r\n         /**\r\n         * save the code to server\r\n         */\r\n        save(){\r\n            this._codeEditor.save();\r\n\r\n        }\r\n        \r\n        /**\r\n         * undo action\r\n         */\r\n        undo(){\r\n            this._codeEditor.undo();\r\n        }\r\n        private getComponentIDsInDesign(component:Component,collect:string[]){\r\n        \tcollect.push(\"#\"+component._id);\r\n        \tvar childs=component[\"_components\"];\r\n        \tif(childs!==undefined){\r\n        \t\tfor(let x=0;x<childs.length;x++){\r\n        \t\t\tthis.getComponentIDsInDesign(childs[x],collect);\r\n        \t\t}\r\n        \t}\r\n        }\r\n        /**\r\n         * dialog edit mode\r\n         * @param {boolean} enable - if true allow resizing and drag and drop \r\n         */\r\n        editDialog(enable){\r\n        \tvar _this=this;\r\n            this.editMode=enable;\r\n            var component=this._designPlaceholder._components[0];\r\n              //switch designmode\r\n            var comps=$(component.dom).find(\".jcomponent\");\r\n            for(var c=0;c<comps.length;c++){\r\n                \r\n                if(comps[c]._this[\"extensionCalled\"]!==undefined){\r\n                    comps[c]._this[\"extensionCalled\"]({\r\n                        componentDesignerSetDesignMode: { enable ,componentDesigner:this}\r\n                    });\r\n                    //comps[c]._this[\"setDesignMode\"](enable,this);\r\n                }\r\n            }\r\n            if(component[\"extensionCalled\"]!==undefined){\r\n                component[\"extensionCalled\"]({\r\n                    componentDesignerSetDesignMode: { enable ,componentDesigner:this}\r\n                });\r\n\r\n            }\r\n            //if(component[\"setDesignMode\"]!==undefined){\r\n            //        component[\"setDesignMode\"](enable,this);\r\n            //    }\r\n            this._variables.updateCache();//variables can be added with Repeater.setDesignMode\r\n            if(this._resizer!==undefined){\r\n                this._resizer.uninstall();console.log(\"uninstall\");\r\n            }\r\n            if(this._draganddropper!==undefined){\r\n                this._draganddropper.uninstall();\r\n            }\r\n           \r\n            if(enable===true){\r\n            \t var _this=this;\r\n            \t var allcomponents=this._variables.getEditableComponents(component);\r\n            \t if(this._propertyEditor.codeEditor===undefined){\r\n            \t \tvar ret=[];\r\n            \t \t\r\n            \t \tthis.getComponentIDsInDesign(component,ret);\r\n            \t \tallcomponents=ret.join(\",\");\r\n            \t }else\r\n                \tallcomponents=this._variables.getEditableComponents(component);\r\n                //this._installTinyEditor();\r\n                this._draganddropper=new DragAndDropper();\r\n                this._resizer=new Resizer();\r\n                this._resizer.draganddropper= this._draganddropper;\r\n                \r\n               console.log(\"onselect\");\r\n                this._resizer.onelementselected=function(elementIDs,e){\r\n                        var ret=[];\r\n                        for(var x=0;x<elementIDs.length;x++){\r\n                            var ob= $(\"#\"+elementIDs[x])[0]._this;\r\n                            if(ob[\"editorselectthis\"])\r\n                                ob=ob[\"editorselectthis\"];\r\n                            ret.push(ob);\r\n                        }\r\n                        if(ret.length>0){\r\n                        \t\t_this._propertyEditor.value=ret[0];\r\n                        }\r\n                      //  _this.lastSelected=_this._codeEditor.getVariableFromObject(_this._propertyEditor.value);\r\n                };\r\n               \r\n                this._resizer.onpropertychanged=function(comp,prop,value){\r\n                \tif(_this._propertyEditor.value!==comp)\r\n                \t\t_this._propertyEditor.value=comp;\r\n                    _this._propertyEditor.setPropertyInCode(prop,value+\"\",true);\r\n                    _this._propertyEditor.value=_this._propertyEditor.value;\r\n                };\r\n\t\t\t\tthis._resizer.install(component,allcomponents);\r\n                allcomponents=this._variables.getEditableComponents(component,true);\r\n                this._draganddropper.install(component,allcomponents); \r\n                this._draganddropper.onpropertychanged=function(component,top,left,oldParent,newParent,beforeComponent){\r\n                \t_this.moveComponent(component,top,left,oldParent,newParent,beforeComponent);\r\n                }\r\n                this._draganddropper.onpropertyadded=function(type,component,top,left,newParent,beforeComponent){\r\n                    _this.createComponent(type,component,top,left,newParent,beforeComponent);\r\n\r\n                }\r\n               \r\n                this._draganddropper.isDragEnabled=function(event,ui){\r\n                \t if(_this._resizer===undefined)\r\n                \t \treturn false;\r\n                    return _this._resizer.componentUnderCursor!==undefined;\r\n                }\r\n            }else{\r\n            \t\r\n            }\r\n          /*  $(\".hoho2\").selectable({});\r\n\t\t\t$(\".hoho2\").selectable(\"disable\");*/\r\n          /*  $(\".HTMLPanel\").selectable({});\r\n\t\t\t$(\".HTMLPanel\").selectable(\"disable\");\r\n\t\t\t$(\".HTMLPanel\").draggable({});\r\n\t\t\t$(\".HTMLPanel\").draggable(\"disable\");*/\r\n        }\r\n       \r\n        /**\r\n    \t * move a component\r\n    \t * @param {jassi.ui.Component} component - the component to move\r\n    \t * @param {number} top - the top absolute position\r\n    \t * @param {number} left - the left absolute position\r\n    \t * @param {jassi.ui.Container} newParent - the new parent container where the component move to\r\n    \t * @param {jassi.ui.Component} beforeComponent - insert the component before beforeComponent\r\n    \t **/\r\n        moveComponent(component,top,left,oldParent,newParent,beforeComponent){\r\n        \t\t\tvar _this=this;\r\n                \t/*if(beforeComponent!==undefined&&beforeComponent.designDummyFor!==undefined){\r\n                    \tbeforeComponent=undefined;\r\n                    }*/\r\n                    var oldName=_this._codeEditor.getVariableFromObject(oldParent);\r\n                    var newName=_this._codeEditor.getVariableFromObject(newParent);\r\n                    var compName=_this._codeEditor.getVariableFromObject(component);\r\n                    if(top!==undefined){\r\n                        _this._propertyEditor.setPropertyInCode(\"x\",top+\"\",true);\r\n                    }else{\r\n                         _this._propertyEditor.removePropertyInCode(\"x\");\r\n                    }\r\n                    if(left!==undefined){\r\n                        _this._propertyEditor.setPropertyInCode(\"y\",left+\"\",true);\r\n                    }else{\r\n                         _this._propertyEditor.removePropertyInCode(\"y\");\r\n                    }\r\n                   \r\n                    if(oldParent!==newParent||beforeComponent!==undefined||top===undefined){//top=undefined ->on relative position at the end call the block\r\n                        //get Position\r\n                        _this._propertyEditor.removePropertyInCode(\"add\",compName,oldName);\r\n                        var before;\r\n                        if(beforeComponent!==undefined&&beforeComponent.type!==\"atEnd\"){//designdummy atEnd\r\n                            var on=_this._codeEditor.getVariableFromObject(beforeComponent);\r\n                            var par=_this._codeEditor.getVariableFromObject(beforeComponent._parent);\r\n                            before={variablename:par,property:\"add\",value:on};\r\n                        }\r\n                        _this._propertyEditor.setPropertyInCode(\"add\",compName,false,newName,before);\r\n\r\n                    }\r\n                   /* if(newParent._components.length>1){//correct dummy\r\n\t                    var dummy=\tnewParent._components[newParent._components.length-2];\r\n\t                    if(dummy.designDummyFor!==undefined){\r\n\t                    \t//var tmp=newParent._components[newParent._components.length-1];\r\n\t                    \tnewParent.remove(dummy);//._components[newParent._components.length-1]=newParent._components[newParent._components.length-2];\r\n\t                    \tnewParent.add(dummy);//._components[newParent._components.length-1]=tmp;\r\n\t                    }\r\n                    }*/\r\n                    _this._variables.updateCache();\r\n                    _this._propertyEditor.value=_this._propertyEditor.value;\r\n                    _this._componentExplorer.value=_this._componentExplorer.value;\r\n        }\r\n    \t/**\r\n    \t * create a new component\r\n    \t * @param {string} type - the type of the new component\r\n    \t * @param {jassi.ui.Component} component - the component themself\r\n    \t * @param {number} top - the top absolute position\r\n    \t * @param {number} left - the left absolute position\r\n    \t * @param {jassi.ui.Container} newParent - the new parent container where the component is placed\r\n    \t * @param {jassi.ui.Component} beforeComponent - insert the new component before beforeComponent\r\n    \t **/\r\n    \tcreateComponent(type,component,top,left,newParent,beforeComponent):Component{\r\n       \t\t\t\tvar _this=this;\r\n                    /*if(beforeComponent!==undefined&&beforeComponent.designDummyFor&&beforeComponent.type===\"atEnd\"){\r\n                    \tbeforeComponent=undefined;\r\n                    }*/\r\n                    var file=type.replaceAll(\".\",\"/\");\r\n                     var stype = file.split(\"/\")[file.split(\"/\").length - 1];\r\n                    _this._propertyEditor.addImportIfNeeded(stype,file);\r\n                    var repeater=_this._hasRepeatingContainer(newParent);\r\n                    var scope=undefined;\r\n                    if(repeater!==undefined){\r\n                    \tvar repeatername=_this._codeEditor.getVariableFromObject(repeater);\r\n                    \tvar test=_this._propertyEditor.parser.getPropertyValue(repeatername,\"createRepeatingComponent\");\r\n                    \tscope={ variablename:repeatername,methodname:\"createRepeatingComponent\"};\r\n                    \tif(test===undefined){\r\n\t\t\t\t\t\t\tvar vardatabinder=_this._propertyEditor.getNextVariableNameForType(\"jassi.ui.Databinder\"); \r\n\t\t\t        \t\t_this._propertyEditor.setPropertyInCode(\"createRepeatingComponent\",\"function(\"+vardatabinder+\"){\\n\\t\\n}\",true,repeatername);\r\n                    \t\trepeater.createRepeatingComponent(function(databinder){\r\n                    \t\t\tif(this._designMode!==true)\r\n                    \t\t\t\treturn;\r\n                    \t\t\t_this._variables.addVariable(vardatabinder,databinder);\r\n                    \t\t\t_this._variables.updateCache();\r\n                    \t\t});\r\n                    \t\t/*var db=new jassi.ui.Databinder();\r\n                    \t\tif(repeater.value!==undefined&&repeater.value.length>0)\r\n                    \t\t\tdb.value=repeater.value[0];\r\n                    \t\t_this._variables.add(vardatabinder,db);\r\n                    \t\t_this._variables.updateCache();*/\r\n\t\t\t        \t}\r\n                    }\r\n                    var varvalue=new (classes.getClass(type));\r\n                    if(this._propertyEditor.codeEditor!==undefined){\r\n\t                    var varname=_this._propertyEditor.addVariableInCode(type,scope);\r\n\t                    \r\n\t                    if(varname.startsWith(\"me.\")){\r\n\t                        var me=_this._codeEditor.getObjectFromVariable(\"me\");\r\n\t                        me[varname.substring(3)]=varvalue;\r\n\t                    }else if(varname.startsWith(\"this.\")){\r\n\t                        var th= _this._codeEditor.getObjectFromVariable(\"this\");\r\n\t                        th[varname.substring(5)]=varvalue;\r\n\t                    }else\r\n\t                        _this._variables.addVariable(varname,varvalue);\r\n\t                    var newName=_this._codeEditor.getVariableFromObject(newParent);\r\n\t                    var before;\r\n\t                    if(beforeComponent!==undefined&&beforeComponent.type!==\"atEnd\"){//Designdummy atEnd\r\n\t                           //if(beforeComponent.type===\"beforeComponent\")\r\n\t                            //   beforeComponent=beforeComponent.designDummyFor;\r\n\t                            var on=_this._codeEditor.getVariableFromObject(beforeComponent);\r\n\t                            var par=_this._codeEditor.getVariableFromObject(beforeComponent._parent);\r\n\t                            before={variablename:par,property:\"add\",value:on};\r\n\t                    }\r\n\t                    _this._propertyEditor.setPropertyInCode(\"add\",varname,false,newName,before,scope);\r\n                    }\r\n                   \r\n                    if(beforeComponent!==undefined){\r\n                        newParent.addBefore(varvalue,beforeComponent);\r\n                    }else{\r\n                        newParent.add(varvalue);\r\n                    }\r\n                   /* if(newParent._components.length>1){//correct dummy\r\n\t                    if(newParent._designDummy){\r\n\t                    \t//var tmp=newParent._components[newParent._components.length-1];\r\n\t                    \tnewParent.dom.removeChild(newParent._designDummy.domWrapper)\r\n\t                    \tnewParent.dom.append(newParent._designDummy.domWrapper)\r\n\t                    }\r\n                    }*/\r\n                    _this._variables.updateCache();\r\n                    \r\n                    //set initial properties for the new component\r\n                    if(component.createFromParam!==undefined){\r\n                    \tfor(var key in component.createFromParam){\r\n                    \t\tvar val=component.createFromParam[key];\r\n                    \t\tif(typeof val==='string')\r\n                    \t\t\tval='\"'+val+'\"';\r\n                    \t\t_this._propertyEditor.setPropertyInCode(key,val,true,varname);\r\n                    \t}\r\n                    \t$.extend(varvalue,component.createFromParam);\r\n                    }\r\n                     if(top!==undefined){\r\n                        _this._propertyEditor.setPropertyInCode(\"x\",top+\"\",true,varname);\r\n                        varvalue.x=top;\r\n                    }\r\n                    if(left!==undefined){\r\n                        _this._propertyEditor.setPropertyInCode(\"y\",left+\"\",true,varname);\r\n                        varvalue.y=left;\r\n                    }\r\n                   \r\n                    //notify componentdescriptor \r\n                    var ac=varvalue.extensionCalled;\r\n                        if(ac!==undefined){\r\n                            varvalue.extensionCalled({componentDesignerComponentCreated:{\r\n                                newParent:newParent\r\n                            }});\r\n                        }\r\n                    \r\n                    //include the new element\r\n                    _this.editDialog(true);\r\n                    _this._propertyEditor.value=varvalue;\r\n                  \t\r\n                    _this._componentExplorer.update();\r\n                    //var test=_this._invisibleComponents;\r\n                    _this._updateInvisibleComponents();\r\n\t\t\t\t\treturn varvalue;\r\n       }\r\n       /**\r\n        * is there a parent that acts a repeating container?\r\n        **/\r\n       _hasRepeatingContainer(component){\r\n       \t\tif(component===undefined)\r\n       \t\t\treturn undefined;\r\n       \t\tif(this._codeEditor.getVariableFromObject(component)===undefined)\r\n       \t\t\treturn undefined;\r\n       \t\tif(component instanceof Repeater){\r\n       \t\t\treturn component;\r\n       \t\t}\r\n       \t\treturn this._hasRepeatingContainer(component._parent);\r\n       }\r\n       \r\n        /**\r\n         * @member {jassi.ui.Component} - the designed component\r\n         */\r\n        set designedComponent(component){\r\n        \tvar com=component;\r\n    \t\tif(com[\"isAbsolute\"]!==true && com.width===\"0\" && com.height===\"0\"){\r\n        \t\tcomponent.width=\"calc(100% - 1px)\";\r\n        \t\tcomponent.height=\"calc(100% - 1px)\";\r\n    \t\t}\r\n        \tif(this._codeEditor.__evalToCursorReached!==true){\r\n                    this._codeEditor._main.show(\"design\");\r\n                }\r\n            if(this._designPlaceholder._components.length>0)\r\n                this._designPlaceholder.remove(this._designPlaceholder._components[0],true);\r\n            this._designPlaceholder.add(component);\r\n          // \r\n            this._propertyEditor.updateParser();\r\n            this.editDialog(true); \r\n            \r\n            this._componentExplorer.value=component;\r\n            \r\n               $( this.dom).focus();\r\n            \r\n          \r\n            this._updateInvisibleComponents();\r\n           \r\n           \r\n            //var parser=new jassi.ui.PropertyEditor.Parser();\r\n            //parser.parse(_this.value);\r\n        }\r\n        get designedComponent(){\r\n            return this._designPlaceholder._components[0];\r\n        }\r\n        destroy(){\r\n        \t if(this._resizer!==undefined){\r\n                this._resizer.uninstall();\r\n            }\r\n            if(this._draganddropper!==undefined){\r\n            \tthis._draganddropper.isDragEnabled=undefined;\r\n                this._draganddropper.uninstall();\r\n            }\r\n        \tthis._propertyEditor.destroy();\r\n\t\t\tthis._componentPalette.destroy();\r\n            this._componentExplorer.destroy();\r\n            this._invisibleComponents.destroy();\r\n            super.destroy();\r\n        }\r\n        \r\n    }\r\n   export async function test(){\r\n        \r\n         \r\n    };\r\n   \r\n\r\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\nimport {Panel} from \"jassi/ui/Panel\";\nimport {Tree} from \"jassi/ui/Tree\";\nimport {ComponentDescriptor} from \"jassi/ui/ComponentDescriptor\";\nimport { ContextMenu } from \"jassi/ui/ContextMenu\";\nimport { Action, Actions } from \"jassi/base/Actions\";\nimport { Container } from \"jassi/ui/Container\";\nimport { CodeEditor } from \"jassi_editor/CodeEditor\";\nimport { ComponentDesigner } from \"jassi_editor/ComponentDesigner\";\nimport { PropertyEditor } from \"jassi/ui/PropertyEditor\";\nimport { propertyeditor } from \"jassi/base/PropertyEditorService\";\n\n@$Class(\"jassi_editor.ComponentExplorer\")\nexport class ComponentExplorer extends Panel {\n    codeEditor:CodeEditor;\n    propertyEditor:PropertyEditor;\n    tree:Tree;\n    //contextMenu:ContextMenu;\n    _value;\n    /**\n    * edit object properties\n    */\n    constructor(codeEditor:CodeEditor,propertyEditor:PropertyEditor) {\n        super();\n        /** @member {jassi_editor.CodeEditor} - the parent CodeEditor */\n        this.codeEditor = codeEditor;\n        this.tree = new Tree();\n        this.tree.height = \"100%\";\n        this.contextMenu=new ContextMenu();\n        this.add(this.contextMenu);\n        this.layout();\n        this.propertyEditor=propertyEditor;\n    }\n    /**\n     * @member {jassi.ui.Component}  - the rendered object \n     */\n    set value(value) {\n        this._value = value;\n        this.tree.items = value;\n        this.tree.expandAll();\n    }\n    get value() {\n        return this._value;\n    }\n    /**\n     * get the displayname of the item\n     * must be override\n     * @param {object} item\n     */\n    getComponentName(item) {\n        return item;\n    }\n    \n    /**\n     * get the child components\n     * must be override\n     * @param {object} item\n     */\n    getComponentChilds(item) {\n        if (item === this.value)\n            return item._components\n        var comps = ComponentDescriptor.describe(item.constructor).resolveEditableComponents(item);\n\n        var ret = [];\n        for (var name in comps) {\n            var comp = comps[name];\n            var complist = comp._components;\n            if (name !== \"this\" && this.getComponentName(comp) !== undefined) {\n                if (ret.indexOf(comp) === -1)\n                    ret.push(comp);\n            }\n            if (complist !== undefined) {\n                for (var y = 0; y < complist.length; y++) {\n                    if (this.getComponentName(complist[y]) !== undefined) {\n                        if (ret.indexOf(complist[y]) === -1)\n                            ret.push(complist[y]);\n                    }\n                }\n            }\n        }\n        return ret;\n    }\n    layout() {\n        var _this = this;\n        this.tree.width = \"100%\";\n        this.tree.height = \"100%\";\n        this.tree.propChilds = function (item) {\n            return _this.getComponentChilds(item);\n        }\n\n        this.tree.propDisplay = function (item) {\n            return _this.getComponentName(item);\n        }\n        this.contextMenu.getActions=async function(data:any[]):Promise<Action[]>{\n        \tvar ret=[];\n        \tvar parent=<Container> data[0]._parent;\n        \t\n        \tif(parent!==undefined&&parent._components!==undefined){\n        \t\tvar hasDummy=(parent._components[parent._components.length-1][\"designDummyFor\"]!==undefined?1:0);\n        \t\tif((parent._components.length>1+hasDummy)&&parent._components.indexOf(data[0])!==0){\n\t        \t\tvar ac:Action={\n\t        \t\t\tcall:function(){\n\t        \t\t\t\t\n\t        \t\t\t\t_this.propertyEditor.swapComponents(parent._components[parent._components.indexOf(data[0])+-1],data[0]);\n\t        \t\t\t\t_this.tree.items=_this.tree.items;\n\t        \t\t\t\t_this.tree.value=data[0];\n\t        \t\t\t},\n\t        \t\t\tname:\"move up\"\n\t        \t\t};\n\t        \t\tret.push(ac)\n\t        \t}\n\t        \t\tif(parent._components.length>1+hasDummy&&\n\t        \t      parent._components.indexOf(data[0])+hasDummy+1<parent._components.length){\n\t        \t\t\tvar ac:Action={\n\t        \t\t\tcall:function(){\n\t        \t\t\t\t_this.propertyEditor.swapComponents(data[0],parent._components[parent._components.indexOf(data[0])+1]);\n\t        \t\t\t\t_this.tree.items=_this.tree.items;\n\t        \t\t\t\t_this.tree.value=data[0];\n\t        \t\t\t},\n\t        \t\t\tname:\"move down\"\n\t        \t\t};\n\t        \t\tret.push(ac)\n\t        \t}\n        \t}\n        \treturn ret;\n        }\n        this.tree.contextMenu=this.contextMenu;\n        this.add(this.tree);\n    }\n    update() {\n        this.value = this.value;\n    }\n    onclick(handler) {\n        this.tree.addEvent(\"click\", handler);\n    }\n    destroy(){\n    \tthis._value=undefined;\n    \tsuper.destroy();\n    }\n}\njassi.test = async function () {\n    var dlg = new jassi.ui.ComponentExplorer();\n    dlg.getComponentName = function (item) {\n        return \"hallo\";\n    };\n    dlg.value = dlg;\n    return dlg;\n}\n\n\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\r\nimport {Panel} from \"jassi/ui/Panel\";\r\nimport {HTMLPanel} from \"jassi/ui/HTMLPanel\";\r\nimport {Image} from \"jassi/ui/Image\";\r\nimport registry from \"jassi/remote/Registry\";\r\nimport { classes } from \"jassi/remote/Classes\";\r\nimport { $UIComponent, UIComponentProperties } from \"jassi/ui/Component\";\r\n\r\n@$Class(\"jassi_editor.ComponentPalette\")\r\nexport class ComponentPalette extends Panel {\r\n    _service: string;\r\n    constructor() {\r\n        super();\r\n        this.layout();\r\n    }\r\n    layout() {\r\n    }\r\n    /**\r\n     * @member {string} - the service where the palette-items are registred\r\n     **/\r\n    set service(value) {\r\n        var _this = this;\r\n        this._service = value;\r\n        while (this._components.length > 0) {\r\n            this.remove(this._components[0]);\r\n        }\r\n        registry.getJSONData(this._service).then((jdata)=>{\r\n            for (var x = 0;x < jdata.length;x++) {\r\n                var mdata = jdata[x];\r\n                var data: UIComponentProperties = mdata.params[0];\r\n                if(data.fullPath===undefined||data.fullPath===\"undefined\")\r\n                    continue;\r\n                var img = new Image();\r\n                var name = data.fullPath.split(\"/\");\r\n                var sname = name[name.length - 1];\r\n                img.tooltip = sname;\r\n\r\n                img.src = data.icon === undefined ? \"mdi mdi-chart-tree mdi-18px\" : data.icon+(data.icon.startsWith(\"mdi\")?\" mdi-18px\":\"\");\r\n                //img.height = 24;\r\n                //img.width = 24;\r\n                img[\"createFromType\"] = mdata.classname;\r\n                img[\"createFromParam\"] = data.initialize;\r\n                _this._makeDraggable(img);\r\n                _this.add(img);\r\n            }\r\n        });\r\n        \r\n\r\n\r\n        /*registry.loadAllFilesForService(this._service).then(function(){\r\n            registry.getData(_this._service).forEach(function(mdata){\r\n                var data:UIComponentProperties=mdata.params[0];\r\n                var img=new Image();\r\n                var name=data.fullPath.split(\"/\");\r\n                var sname=name[name.length-1];\r\n                img.tooltip=sname;\r\n                img.src=data.icon===undefined?\"res/unknowncomponent.png\":data.icon;\r\n                img.height=24;\r\n                img.width=24;\r\n                img[\"createFromType\"]=classes.getClassName(mdata.oclass);\r\n                img[\"createFromParam\"]=data.initialize;\r\n                _this._makeDraggable(img);\r\n                _this.add(img);\r\n            });\r\n       });*/\r\n    }\r\n    get service() {\r\n        return this._service;\r\n    }\r\n    /**\r\n     * install the draggable\r\n     * @param {jassi.ui.Image} component\r\n     */\r\n    _makeDraggable(component) {\r\n        var helper = undefined;\r\n\r\n\r\n        $(component.dom).draggable({            \r\ncancel: \"false\", revert: \"invalid\",\r\n\t\t\t\r\n            appendTo: \"body\",\r\n            helper: function(event) {\r\n                if (helper === undefined) {\r\n                    var cl = classes.getClass(component.createFromType);\r\n                    if (cl === undefined) {\r\n                        classes.loadClass(component.createFromType);//for later\r\n                    \tcl=Panel;\r\n                    }\r\n                    helper = new cl();\r\n                    var img = new Image();\r\n                    img.src = component.src;\r\n                    img.height = 24;\r\n                    img.width = 24;\r\n                    img.x = component.x;\r\n                    img.y = component.y;\r\n                    helper._position = img;\r\n                    component._helper = helper;\r\n                    if (component.createFromParam !== undefined) {\r\n                        $.extend(helper, component.createFromParam);\r\n                    }\r\n                    $(\"#jassitemp\")[0].removeChild(helper.domWrapper);\r\n                    $(\"#jassitemp\")[0].removeChild(helper._position.domWrapper);\r\n                }\r\n                return helper._position.dom;//$(helper.dom);\r\n            }\r\n        });\r\n    }\r\n    destroy() {\r\n        for (var x = 0;x < this._components.length;x++) {\r\n            var comp = this._components[x];\r\n            $(comp.dom).draggable(\"destroy\");\r\n            if (comp[\"_helper\"] !== undefined)\r\n                comp[\"_helper\"].destroy();\r\n        }\r\n        super.destroy();\r\n    }\r\n}\r\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\n//https://developer.chrome.com/extensions/messaging\n@$Class(\"jassi_editor.Debugger\")\nexport class Debugger\n{\n        destroyed:boolean;\n        debugpoints;\n        /**\n         * routing of url\n         * @class jassi.base.Debugger\n         */\n\t\tconstructor(){\n   \n\t\t}\n\t\t/**\n\t\t * @param {string} file - the file to save\n\t\t * @param {string} code - the code to Transform\n\t\t * @param [number] debuglines - lines which updates the variables\n\t\t * @param {Object.<int,string>}  debuglinesConditions - is the breakpoint in line conitionally [line]->condition\n\t\t **/\n\t\tasync debugCode(file,code,debuglines,debuglinesConditions,evalToCursorPosition){\n        }\n        /**\n         * remove all breakpoints for the file\n         * @param file \n         */\n        async removeBreakpointsForFile(file:string){\n        }\n\t\t /**\n         * extract all variables in code\n         * @param {string} code - the code to inspect\n         */\n        _extractVariables(code){\n            var pos=0;\n            var ret=[];\n            while(pos!==-1){\n                pos=code.indexOf(\"var\"+\" \",pos);\n                if(pos!==-1){\n                    var p1=code.indexOf(\" \",pos+4);\n                    var p2=code.indexOf(\";\",pos+4);\n                    var p3=code.indexOf(\"=\",pos+4);\n                    var p=Math.min(p1===-1?999999999:p1,p2===-1?999999999:p2,p3===-1?999999999:p3);\n                    var variabel=code.substring(pos+4,p);\n                    var patt = new RegExp(\"\\\\W\");\n                    if(!patt.test(variabel))\n                        ret.push(variabel);\n                     pos=pos+1;\n                }\n               \n            }\n            return ret;\n        }\n        /**\n         * sets a breakpoint for debugging\n         * @param {string} file\n         * @param {number} line\n         * @param {number} enable - if true then breakpoint is set if false then removed\n         * @param {string} type - the type default undefined->stop debugging \n         **/\n        breakpointChanged(file,line,column,enable,type){\n        //\tconsole.log(\"break on\"+file);\n        }\n        /**\n         * report current variable scope\n         * @param {numer} id - id of the variablepanel\n         * @param {[Object.<string,object>]} variables \n         */\n    \treportVariables(id,variables){\n    \t\tvar editor=$(\"#\"+id)[0]._this;\n    \t\talert(editor);\n    \t    \t\n    \t\n    \t\teditor[\"addVariables\"](variables);\n    \t}\n    \t /**\n         * add debugpoints in code\n         * @param {[string]} lines - code\n         * @param {Object.<number, boolean>} debugpoints - the debugpoints\n         * @param {jassi_editor.CodeEditor} codeEditor\n         */\n        addDebugpoints(lines,debugpoints,codeEditor){\n        \tjassi.d[codeEditor._id]=undefined;\n//        \tjassi.ui.VariablePanel.get(this._id).__db=undefined;\n        \tvar hassome=undefined;\n        \tthis.debugpoints=debugpoints;\n        \tfor(var point in debugpoints){\n        \t\tif(debugpoints[point]===true){\n        \t\t\t//lines[point]=\"if(jassi.ui.VariablePanel.get(\"+this._id+\").__db===undefined){ jassi.ui.VariablePanel.get(\"+this._id+\").__db=true;debugger;}\"+lines[point];\n        \t\t\tlines[point]=\"if(jassi.d(\"+codeEditor._id+\")) debugger;\"+lines[point];\n        \t\t\t/*if(hassome===undefined){\n        \t\t\t\thassome=true;\n        \t\t\t\tlines[0]=\"var _variables_=$('#\"+this._id+\"')[0]._this;\"+lines[0];\n        \t\t\t}*/\n        \t\t}\n        \t}\n        }\n\t\t/**\n         * \n         * @param {string} code - full source code\n         * @param {jassi_editor.CodeEditor} codeEditor\n         * @returns {string}\n         */\n        getCodeForBreakpoint(code,codeEditor){\n        /*\tvar reg = /([\\w]*)[\\(][^\\)]*[\\)]/g;\n        \tvar test=reg.exec(code);\n        \ttest=reg.exec();\n        \talert(test);*/\n        \t\n            var vars=this._extractVariables(code);\n            var reg=/[A-Z,a-z,0-9,\\_]*[/w]*[\\(][A-Z,a-z,0-9,\\_,\\,]*\\)\\{/g;\n            var test=reg.exec(code);\n            while(test){\n                \n                \n                if(!test[0].startsWith(\"while\")&&!test[0].startsWith(\"if\")){\n                    var params=test[0].substring(test[0].indexOf(\"(\")+1,test[0].indexOf(\")\"));\n                    if(params.length>0){\n                        var ps=params.split(\",\");\n                        for(var p=0;p<ps.length;p++){\n                            if(vars.indexOf(ps[p])===-1)\n                                vars.push(ps[p]);\n                        }\n                    }\n                }\n                test=reg.exec(code);\n            }\n            var svars=\"{var debug_editor=$('#'+\"+codeEditor._id+\")[0]._this;var _variables_={} ;try{if(this!==jassi)_variables_['this']=this;}catch(ex){};\";\n            //svars=svars+\"try{_variables_.addParameters(arguments);}catch(ex){};\";\n            for(var x=0;x<vars.length;x++){\n        //        alert(vars[x]);\n                svars=svars+\"try{_variables_['\"+vars[x]+\"']=\"+vars[x]+\";}catch(ex){};\";\n            }\n            svars=svars+\"debug_editor.addVariables(_variables_);}\";\n            return svars;\n        }\n         destroy(){\n\t\t\tthis.destroyed=true;\n        }\n}\n\t   \n\t   if(jassi.debugger===undefined)\n           jassi.debugger=new Debugger();\n        require([\"jassi_editor/ChromeDebugger\"]);\n\n\n\n   ","import jassi from \"jassi/jassi\";\r\nimport { Component } from \"jassi/ui/Component\";\r\nimport \"jassi_editor/Debugger\";\r\nimport { $Class } from \"jassi/remote/Jassi\";\r\nimport { router } from \"jassi/base/Router\";\r\nimport \"jassi_editor/ext/monaco\";\r\nimport typescript from \"jassi_editor/util/Typescript\";\r\nimport { Server } from \"jassi/remote/Server\";\r\nimport { CodePanel } from \"jassi_editor/CodePanel\";\r\n\r\n\r\nvar inited = false;\r\nfunction __init(editor: monaco.editor.IStandaloneCodeEditor) {\r\n    if (inited)\r\n        return;\r\n    //auto import \r\n    const cs = (editor as any)._commandService\r\n    var CommandsRegistry = require(\"vs/platform/commands/common/commands\").CommandsRegistry;\r\n    CommandsRegistry.registerCommand(\"autoimport\", (o1, model: monaco.editor.ITextModel, pos) => {\r\n        var file = model.uri.path.substring(1);\r\n        var code=model.getValue();\r\n        var p = typescript.getPositionOfLineAndCharacter(file, {\r\n            line: pos.lineNumber, character: pos.column\r\n        });\r\n        setTimeout(() => {\r\n            CodePanel.getAutoimport(p, file, code).then((data) => {\r\n                if (data !== undefined) {\r\n                    model.pushEditOperations([], [{\r\n                        range: monaco.Range.fromPositions({ column: data.pos.column, lineNumber: data.pos.row+1 }),\r\n                        text: data.text\r\n                    }], () => null);\r\n                }\r\n            });\r\n\r\n        }, 100);\r\n    })\r\n    //implement go to definition\r\n    const editorService = editor[\"_codeEditorService\"];\r\n    const openEditorBase = editorService.openCodeEditor.bind(editorService);\r\n    editorService.openCodeEditor = async (input, source) => {\r\n        const result = await openEditorBase(input, source);\r\n        if (result === null) {\r\n            var file = input.resource.path.substring(1);\r\n            var line = input.options.selection.startLineNumber;\r\n\r\n            router.navigate(\"#do=jassi_editor.CodeEditor&file=\" + file + \"&line=\" + line);\r\n        }\r\n        return result; // always return the base result\r\n    };\r\n    //completion for autonimport\r\n    monaco.languages.registerCompletionItemProvider('typescript', {\r\n        provideCompletionItems: async function (model, position) {\r\n            var textUntilPosition = model.getValueInRange({ startLineNumber: 1, startColumn: 1, endLineNumber: position.lineNumber, endColumn: position.column });\r\n            var word = model.getWordUntilPosition(position);\r\n            var range = {\r\n                startLineNumber: position.lineNumber,\r\n                endLineNumber: position.lineNumber,\r\n                startColumn: word.startColumn,\r\n                endColumn: word.endColumn \r\n            };\r\n            var file = model.uri.path.substring(1);\r\n            var pos = typescript.getPositionOfLineAndCharacter(file, { line: position.lineNumber, character: position.column });\r\n            var all = await typescript.getCompletion(file, pos, undefined, { includeExternalModuleExports: true });\r\n            var sug = [];\r\n            for (var x = 0; x < all.entries.length; x++) {\r\n                var it = all.entries[x];\r\n                if ((it.kindModifiers === \"export\"||it.kindModifiers === \"\") && it.hasAction === true) {\r\n                    var item: monaco.languages.CompletionItem = {\r\n                        label: it.name,\r\n                        kind: <monaco.languages.CompletionItemKind>it.kind,\r\n                        documentation: \"import from \" + it.source,\r\n                        insertText: it.name,\r\n                        range: range,\r\n                        command: {\r\n                            arguments: [model, position],\r\n                            id: \"autoimport\",\r\n                            title: \"autoimport\"\r\n                        }\r\n                    }\r\n                    sug.push(item);\r\n                }\r\n            }\r\n            return {\r\n                suggestions: sug\r\n            };\r\n        }\r\n    });\r\n    inited = true;\r\n}\r\n\r\n/**\r\n* wrapper for the Ace-Code editor with Typesccript-Code-Completion an other features\r\n* @class jassi.ui.CodePanel\r\n*/\r\n@$Class(\"jassi_editor.MonacoPanel\")\r\nexport class MonacoPanel extends CodePanel {\r\n    private _mode: string;\r\n    private _editor: monaco.editor.IStandaloneCodeEditor;\r\n    private _isInited: boolean;\r\n    //   private _lastCursorPosition;\r\n    file: string;\r\n    private static _tooltipdiv;\r\n    private _lastTooltipRefresh;\r\n    constructor() {\r\n        super();\r\n        var _this = this;\r\n        // super.init($('<div style=\"width: 800px; height: 600px; border: 1px solid grey\"></div>')[0]);\r\n        var test = $('<div class=\"MonacoPanel\" style=\"height: 100px; width: 100px\"></div>')[0];\r\n\r\n        super.init(test);\r\n\r\n        $(this.domWrapper).css(\"overflow\", \"hidden\");\r\n        $(this.domWrapper).css(\"display\", \"\");\r\n\r\n        /* _this._editor.on(\"guttermousedown\", function(e) {\r\n \r\n             var row = e.getDocumentPosition().row;\r\n             var breakpoints = e.editor.session.getBreakpoints(row, 0);\r\n             var type = \"debugpoint\";\r\n             if (e.domEvent.ctrlKey)\r\n                 type = \"checkpoint\";\r\n             var column = _this._editor.session.getLine(row).length;\r\n             if (typeof breakpoints[row] === typeof undefined) {\r\n                 e.editor.session.setBreakpoint(row);\r\n                 _this.callEvent(\"breakpointChanged\", row, column, true, type);\r\n             } else {\r\n                 e.editor.session.clearBreakpoint(row, false, undefined);\r\n                 _this.callEvent(\"breakpointChanged\", row, column, false, type);\r\n             }\r\n         });*/\r\n\r\n        this._editor = monaco.editor.create(this.dom, {\r\n            //value:  monaco.editor.getModels()[0], //['class A{b:B;};\\nclass B{a:A;};\\nfunction x() {', '\\tconsole.log(\"Hello world!\");', '}'].join('\\n'),\r\n            language: 'typescript',\r\n            theme: \"vs-light\",\r\n            glyphMargin: true,\r\n            fontSize: 12,\r\n            automaticLayout: true\r\n        });\r\n\r\n        __init(this._editor);\r\n        this._editor.onMouseDown(function (e) {\r\n            _this._mouseDown(e);\r\n        });\r\n        //this._editor.setModel(monaco.editor.getModels() [1]);\r\n\r\n    }\r\n    private getBreakpointDecoration(line:number):monaco.editor.IModelDecoration{\r\n        var decs=this._editor.getLineDecorations(line);\r\n        for(var x=0;x<decs.length;x++){\r\n            if(decs[x].options.glyphMarginClassName===\"jbreackpoint\")\r\n                return decs[x];\r\n        }\r\n        return undefined;\r\n    }\r\n    private _mouseDown(e) {\r\n        if (e.target.type === 2) {\r\n            var line=e.target.position.lineNumber;\r\n            var column = this._editor.getModel().getLineContent(line-1).length;\r\n            var type = \"debugpoint\";\r\n            var dec=this.getBreakpointDecoration(line);\r\n            if(dec){\r\n                this._editor.deltaDecorations([dec.id],[]);\r\n                this.callEvent(\"breakpointChanged\", line-1, column, false, type);\r\n            }else{\r\n                this.callEvent(\"breakpointChanged\", line-1, column, true, type);\r\n                var decorations = this._editor.deltaDecorations([], [\r\n                    {\r\n                        range: new monaco.Range(line, 1, line, 1),\r\n                        options: {\r\n                            isWholeLine: true,\r\n                            className: 'jbreackpointclass',\r\n                            glyphMarginClassName: 'jbreackpoint'\r\n                        }\r\n                    }\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * gets a list of all lines with breakpoint\r\n     * @returns {Object.<number, boolean>}\r\n     */\r\n    getBreakpoints(): { [line: number]: boolean } {\r\n        var ret = {};\r\n        var decs=this._editor.getModel().getLineCount();\r\n        for (var x = 1; x <= this._editor.getModel().getLineCount(); x++) {\r\n            if (this.getBreakpointDecoration(x)) {\r\n                ret[x-1] = true;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    /**\r\n     * breakpoint changed\r\n     * @param {function} handler - function(line,enabled,type)\r\n     */\r\n    onBreakpointChanged(handler) {\r\n        this.addEvent(\"breakpointChanged\", handler);\r\n    }\r\n    /**\r\n     * component get focus\r\n     * @param {function} handler\r\n     */\r\n    onfocus(handler) {\r\n        //   this._editor.on(\"focus\", handler);\r\n    }\r\n    /**\r\n     * component lost focus\r\n     * @param {function} handler\r\n     */\r\n    onblur(handler) {\r\n        // this._editor.on(\"blur\", handler);\r\n    }\r\n    /**\r\n     * @param - the codetext\r\n     */\r\n    set value(value: string) { //the Code\r\n        var lastcursor = this.cursorPosition;\r\n        if (this.file) {\r\n            var ffile = monaco.Uri.from({ path: \"/\" + this.file, scheme: 'file' });\r\n            var mod = monaco.editor.getModel(ffile);\r\n            if (!mod) {\r\n                mod = monaco.editor.createModel(value, \"typescript\", ffile);\r\n                this._editor.setModel(mod);\r\n                 this._editor.setValue(value);\r\n            } else if (mod !== this._editor.getModel()) {\r\n                this._editor.setModel(mod);\r\n                 this._editor.setValue(value);\r\n            }else{\r\n\t            this._editor.getModel().pushEditOperations([], [{\r\n\t                        range: this._editor.getModel().getFullModelRange(),// monaco.Range.fromPositions({ column: data.pos.column, lineNumber: data.pos.row }),\r\n\t                        text: value\r\n\t                    }], () => null);\r\n\t            }\r\n        } else\r\n\r\n            this._editor.setValue(value);\r\n    }\r\n\r\n    get value(): string {\r\n        return this._editor.getValue();\r\n    }\r\n    /**\r\n     * @param {object} position - the current cursor position {row= ,column=}\r\n     */\r\n    set cursorPosition(cursor: { row: number, column: number }) {\r\n        this._editor.focus();\r\n        try {\r\n            this._editor.revealLine(cursor.row);\r\n            //this._editor.setPosition({ column: cursor.column, lineNumber: cursor.row });\r\n        } catch {\r\n\r\n        }\r\n    }\r\n    get cursorPosition(): { row: number, column: number } {\r\n        var pos = this._editor.getPosition();\r\n        return {\r\n            row: pos.lineNumber,\r\n            column: pos.column\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        //this._editor.destroy();\r\n        super.destroy();\r\n    }\r\n\r\n    /**\r\n    * undo action\r\n    */\r\n    undo() {\r\n        //@ts-ignore\r\n        this._editor.getModel().undo();\r\n    }\r\n    /**\r\n     * resize the editor\r\n     * */\r\n    resize() {\r\n        //\r\n        //   this._editor.resize();\r\n    }\r\n    /**\r\n   * @member {string} - the language of the editor e.g. \"ace/mode/javascript\"\r\n   */\r\n    set mode(mode) {\r\n        //  alert(mode);\r\n        this._mode = mode;\r\n        //  this._editor.getSession().setMode(\"ace/mode/\" + mode);\r\n    }\r\n    get mode() {\r\n        return this._mode;\r\n    }\r\n    async loadsample() {\r\n        var code = await new Server().loadFile(\"a/Dialog.ts\");\r\n        this.file = \"a/Dialog.ts\";\r\n        this.value = code;\r\n    }\r\n}\r\n\r\nexport async function test() {\r\n\r\n    var dlg = new MonacoPanel();\r\n    var code = await new Server().loadFile(\"a/Dialog.ts\");\r\n    dlg.file = \"a/Dialog.ts\";\r\n    dlg.value = code;\r\n    dlg.width = \"800\";\r\n    dlg.height = \"800\";\r\n    //@ts-ignore\r\n    dlg._editor.layout();\r\n    \r\n    //    dlg.value = \"var h;\\r\\nvar k;\\r\\nvar k;\\r\\nvar k;\\r\\nconsole.debug('ddd');\";\r\n    //  dlg.mode = \"javascript\";\r\n    //dlg._editor.renderer.setShowGutter(false);\t\t\r\n    //dlg._editor.getSession().addGutterDecoration(1,\"error_line\");\r\n    //  dlg._editor.getSession().setBreakpoint(1);\r\n    // dlg._editor.getSession().setBreakpoint(2);\r\n\r\n    return dlg;\r\n}\r\n\r\n","\r\n\r\n\r\nimport {FileExplorer} from \"jassi/ui/FileExplorer\";\r\nimport windows from \"jassi/base/Windows\";\r\nimport {Panel} from \"jassi/ui/Panel\";\r\nimport {Button} from \"jassi/ui/Button\";\r\nimport { router } from \"jassi/base/Router\";\r\nimport {SearchExplorer} from \"jassi/ui/SearchExplorer\";\r\nimport { DBObjectExplorer } from \"jassi/ui/DBObjectExplorer\";\r\nimport { ActionNodeMenu } from \"jassi/ui/ActionNodeMenu\";\r\n\r\n\r\n\r\n\r\n\r\n//var h=new RemoteObject().test();\r\n\r\nasync function test() {\r\n  //  jassi.myRequire(\"https://unpkg.com/source-map@0.7.3/dist/source-map.js\");\r\n    var body = new Panel({ id: \"body\" });\r\n    body.max();\r\n    windows.addLeft(new DBObjectExplorer(), \"DBObjects\");\r\n    windows.addLeft(new SearchExplorer(), \"Search\");\r\n    windows.addLeft(new FileExplorer(), \"Files\");\r\n    var bt=new Button();\r\n    windows._desktop.add(bt);\r\n    bt.icon=\"mdi mdi-refresh\";\r\n    var am=new ActionNodeMenu();\r\n    bt.onclick(()=>{\r\n        windows._desktop.remove(am);\r\n        am=new ActionNodeMenu()\r\n        windows._desktop.add(am);\r\n    });\r\n    windows._desktop.add(am);\r\n    router.navigate(window.location.hash);\r\n\r\n\r\n}\r\ntest().then();\r\n\r\n\r\n\r\n","export default {\r\n    \"css\":{\"jassi_editor.css\":\"jassi_editor.css\"},\r\n    \"types\":{\r\n        \"node_modules/monaco.d.ts\":\"https://cdn.jsdelivr.net/npm/monaco-editor@0.22.3/monaco.d.ts\",\r\n    },\r\n    \"require\":{ \r\n        paths: {\r\n            'ace': '//cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/',\r\n            'ace/ext/language_tools': '//cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/ext-language_tools',\r\n            monacoLib:\"jassi_editor/ext/monacoLib\",\r\n            vs: \"https://cdn.jsdelivr.net/npm/monaco-editor@0.21.2/dev/vs\"\r\n        },\r\n        shim: {\r\n            'ace/ext/language_tools': ['ace/ace'],\r\n        }\r\n    \r\n    }\r\n}","//this file is autogenerated don't modify\ndefine(\"jassi_editor/registry\",[\"require\"], function(require) {\n return {\n  default: {\n\t\"jassi_editor/AcePanel.ts\": {\n\t\t\"date\": 1613218566582,\n\t\t\"jassi.ui.AcePanel\": {}\n\t},\n\t\"jassi_editor/ChromeDebugger.ts\": {\n\t\t\"date\": 1615316996160,\n\t\t\"jassi_editor.ChromeDebugger\": {}\n\t},\n\t\"jassi_editor/CodeEditor.ts\": {\n\t\t\"date\": 1616191203135,\n\t\t\"jassi_editor.CodeEditor\": {}\n\t},\n\t\"jassi_editor/CodeEditorInvisibleComponents.ts\": {\n\t\t\"date\": 1615231329957,\n\t\t\"jassi_editor.CodeEditorInvisibleComponents\": {}\n\t},\n\t\"jassi_editor/CodePanel.ts\": {\n\t\t\"date\": 1613218544158,\n\t\t\"jassi_editor.CodePanel\": {}\n\t},\n\t\"jassi_editor/ComponentDesigner.ts\": {\n\t\t\"date\": 1613218544160,\n\t\t\"jassi_editor.ComponentDesigner\": {}\n\t},\n\t\"jassi_editor/ComponentExplorer.ts\": {\n\t\t\"date\": 1613218544158,\n\t\t\"jassi_editor.ComponentExplorer\": {}\n\t},\n\t\"jassi_editor/ComponentPalette.ts\": {\n\t\t\"date\": 1614028739796,\n\t\t\"jassi_editor.ComponentPalette\": {}\n\t},\n\t\"jassi_editor/Debugger.ts\": {\n\t\t\"date\": 1613218544158,\n\t\t\"jassi_editor.Debugger\": {}\n\t},\n\t\"jassi_editor/modul.ts\": {\n\t\t\"date\": 1614109063764\n\t},\n\t\"jassi_editor/MonacoPanel.ts\": {\n\t\t\"date\": 1613573828092,\n\t\t\"jassi_editor.MonacoPanel\": {}\n\t},\n\t\"jassi_editor/StartEditor.ts\": {\n\t\t\"date\": 1615231921384\n\t},\n\t\"jassi_editor/util/DragAndDropper.ts\": {\n\t\t\"date\": 1613218544158,\n\t\t\"jassi_editor.util.DragAndDropper\": {}\n\t},\n\t\"jassi_editor/util/monaco.ts\": {\n\t\t\"date\": 1613148168781\n\t},\n\t\"jassi_editor/util/Parser.ts\": {\n\t\t\"date\": 1616105244530,\n\t\t\"jassi_editor.base.Parser\": {}\n\t},\n\t\"jassi_editor/util/Resizer.ts\": {\n\t\t\"date\": 1613218544158,\n\t\t\"jassi_editor.util.Resizer\": {}\n\t},\n\t\"jassi_editor/util/TSSourceMap.ts\": {\n\t\t\"date\": 1613550062397,\n\t\t\"jassi_editor.util.TSSourceMap\": {}\n\t},\n\t\"jassi_editor/util/Typescript.ts\": {\n\t\t\"date\": 1615138014146,\n\t\t\"jassi_editor.util.Typescript\": {}\n\t}\n}\n }\n});","/*\r\nrequirejs.config({\r\n    paths: {\r\n        'ace': '//cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/',\r\n        'ace/ext/language_tools': '//cdnjs.cloudflare.com/ajax/libs/ace/1.4.7/ext-language_tools'\r\n    },\r\n    shim: {\r\n        'ace/ext/language_tools': ['ace/ace'],\r\n    }\r\n});*/\r\ndefine(\"jassi_editor/ext/acelib\",[\"require\",'ace/ace',\r\n    'ace/ext/language_tools'], function (require,ac) {\r\n              //  var tsmode= require(\"ace/mode/typescript\");\r\n              /*  var WorkerClient = require(\"ace/worker/worker_client\").WorkerClient;\r\n                var createWorker = function (session) {\r\n                    var worker = new WorkerClient([\"ace\"], \"jassi/ext/ace_tsmode\", \"WorkerModule\");\r\n                    worker.attachToDocument(session.getDocument());\r\n\r\n                    worker.on(\"lint\", function (results) {\r\n                        session.setAnnotations(results.data);\r\n                    });\r\n\r\n                    worker.on(\"terminate\", function () {\r\n                        session.clearAnnotations();\r\n                    });\r\n\r\n                    return worker;\r\n                };*/\r\n\r\n\r\n\r\n                return {\r\n                    default: ac,\r\n                  /*  createWorker:createWorker,\r\n                    changeTSMode:function(session){\r\n                      //  var tsmode=session.$mode;\r\n                        session.$mode.createWorker=createWorker;\r\n                        var k=9;\r\n                    }*/\r\n                }\r\n            });\r\n","\n\n//require.config({ paths: { vs: '//cdn.jsdelivr.net/npm/monaco-editor@0.20.0/dev/vs' } });\n//require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.21.2/dev/vs' } });\n//require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min/vs' } });\n//let monacopath=\"https://cdn.jsdelivr.net/npm/monaco-editor@0.21.2/dev\";\n/*require.config({ paths: {\n    monacoLib:\"jassi_editor/ext/monacoLib\",\n    vs: monacopath+\"/vs\"\n } \n});\n*/\ndefine(\"jassi_editor/ext/monacoLib\",[\"require\"], function (require,editor) {\n    window[\"module\"]={};\n    window[\"module\"].exports={};\n   \n    return {\n    }\n});\n\n\ndefine(\"jassi_editor/ext/monaco\",[\"jassi_editor/ext/monacoLib\",\"require\", 'vs/editor/editor.main',\"vs/language/typescript/tsWorker\"/*,\"monacoLib_editorWorkerServiceImpl\",\"monacoLib_editorSimpleWorker\",\"tsWorker\"*/], function(mlib,require, monaco,tsWorker/*,editorWorkerServiceImpl,editorSimpleWorker,tsWorker*/) {\n    //let monacopath=\"https://cdn.jsdelivr.net/npm/monaco-editor@0.21.2/dev\";\n    let monacopath=require(\"jassi_editor/modul\").default.require.paths.vs.replace(\"/vs\",\"\");\n    //get Typescript instance\n    window.ts=window[\"module\"].exports;\n    delete window[\"module\"];\n    var platform_1=require(\"vs/base/common/platform\");\n    platform_1.globals.MonacoEnvironment={};\n    \n    function myfunc(){\n        var worker=require(['vs/language/typescript/tsWorker'],function(tsWorker){\n            tsWorker.TypeScriptWorker.prototype.getCompletionsAtPosition=async function(fileName, position,properties){\n               \n                return await this._languageService.getCompletionsAtPosition(fileName, position, properties);\n            }\n          \n        });\n    }\n   platform_1.globals.MonacoEnvironment.getWorker=function(workerId, label){\n\t\t\t\tvar js=\"/*editorWorkerService*/self.MonacoEnvironment={baseUrl: '\"+monacopath+\"/'};importScripts('\"+monacopath+\"/vs/base/worker/workerMain.js');/*editorWorkerService*/\"+myfunc.toString()+\";myfunc();\";\n\t\t\t\tconst blob = new Blob([js], { type: 'application/javascript' });\n\t\t\t\tvar workerUrl=URL.createObjectURL(blob);\n\t\t\t\treturn new Worker(workerUrl, { name: label });\n\t\t\t}\n\t\t\t\n\n\n\n   \n    return {};\n});\n/*\n //hack to get languageService\n    /*var orgLS=ts.createLanguageService;\n    \n    var funcResolve=undefined;\n    var waiter=new Promise((resolve)=>{\n        funcResolve=resolve;\n    });\n    ts.createLanguageService=function(host, documentRegistry, syntaxOnlyOrLanguageServiceMode){\n            let ret=orgLS(host, documentRegistry, syntaxOnlyOrLanguageServiceMode);\n            funcResolve(ret);\n            return ret;\n    }\n    var ret = {\n        getLanguageService:async function(){\n            return await waiter;\n        }\n    }\n    //hack monaco allways create a worker which not run as serviceWorker - so we can share the languageservice\n    var EditorWorkerHost = require(\"vs/editor/common/services/editorWorkerServiceImpl\").EditorWorkerHost;\n    var EditorSimpleWorker = require(\"vs/editor/common/services/editorSimpleWorker\").EditorSimpleWorker;\n    var EditorWorkerClient = require(\"vs/editor/common/services/editorWorkerServiceImpl\").EditorWorkerClient;\n    class SynchronousWorkerClient {\n        constructor(instance) {\n            this._instance = instance;\n            this._proxyObj = Promise.resolve(this._instance);\n        }\n        dispose() {\n            this._instance.dispose();\n        }\n        getProxyObject() {\n            return this._proxyObj;\n        }\n    }\n    EditorWorkerClient.prototype._getOrCreateWorker = function() {\n        if (!this._worker)\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n        return this._worker;\n\n    }*/","import jassi, { $Class } from \"jassi/remote/Jassi\";\nimport { Component } from \"jassi/ui/Component\";\n\n@$Class(\"jassi_editor.util.DragAndDropper\")\nexport class DragAndDropper {\n    onpropertychanged;\n    onpropertyadded;\n    lastDropCanceled: boolean;\n    allIDs: string;\n    _isDragging: boolean;\n    parentPanel: Component;\n    draggableComponents: JQuery<Element>;\n    droppableComponents: JQuery<Element>;\n    constructor() {\n        /** @member {function} - called when an element is resized function(component,top,left) */\n        this.onpropertychanged = undefined;\n        this.onpropertyadded = undefined;\n        this.lastDropCanceled = false;\n        this.allIDs = \"\";//all ids\n    }\n    isDragEnabled(event, ui) {\n        var mouse = event.target._this.dom.style.cursor;\n        if (mouse === \"e-resize\" || mouse === \"s-resize\" || mouse === \"se-resize\")\n            return true;\n        else\n            return false;\n    }\n    isDragging() {\n\n        return this._isDragging;\n    }\n    canDrop(enable) {\n        $(this.allIDs).find(\".jcontainer\").not(\".jdesigncontainer\").draggable(enable ? \"enable\" : \"disable\");\n    }\n   /* testDropDesignDummy(target, event, ui) {\n        var _this = this;\n        if (target._this._designDummyPre !== undefined) {\n            var dummy = target._this._designDummyPre;\n            var oldParent = ui.draggable[0]._this._parent;\n            var oldx = $(ui.helper).offset().left;\n            var oldy = $(ui.helper).offset().top;\n            if (ui.draggable[0]._this.createFromType !== undefined) {\n                oldx = parseInt($(ui.helper).css('left'));\n                oldy = parseInt($(ui.helper).css('top'));\n            }\n\n            var com = dummy;\n            var posx = $(com.dom).offset().left;\n            var posy = $(com.dom).offset().top;\n            var w = $(com.dom).outerWidth();\n            var h = $(com.dom).outerHeight();\n\n            if ((oldx >= posx && oldx <= posx + w) && (oldy >= posy && oldy <= posy + h) && com !== ui.draggable[0]._this) {\n                //com=com.designDummyFor;\n                $(ui.draggable).css({ 'top': \"\", 'left': \"\", \"position\": \"relative\" });\n                if (ui.draggable[0]._this.createFromType !== undefined) {\n                    if (this.onpropertyadded !== undefined)\n                        this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, undefined, undefined, target._this._parent, com);\n                    return true;\n                }\n                com.designDummyFor._parent.addBefore(ui.draggable[0]._this, com);\n                if (_this.onpropertychanged !== undefined) {\n                    _this.onpropertychanged(ui.draggable[0]._this, undefined, undefined, oldParent, target._this._parent, com.designDummyFor);\n                }\n                return true;\n            }\n        }\n        return false;\n    }*/\n    _drop(target, event, ui) {\n        var _this = this;\n        var newComponent=ui.draggable[0]._this;\n        var newParent=target._this;\n        var beforeComponent=target._this;\n        var designDummyAtEnd;\n        if(beforeComponent?.type===\"atEnd\"){\n            designDummyAtEnd=beforeComponent;\n            beforeComponent=undefined;\n            newParent=newParent.designDummyFor;\n        }\n         if(beforeComponent?.type===\"beforeComponent\"){\n            beforeComponent=newParent.designDummyFor;\n            newParent=newParent.designDummyFor._parent;\n        }\n        if (target._this.isAbsolute) {\n \n            var left =parseInt($(ui.helper).css('left'));\n            var top = parseInt($(ui.helper).css('top'));\n            if (ui.draggable[0]._this.createFromType !== undefined) {\n                var offsetNewParent = $(target._this.dom).offset();\n                left = -offsetNewParent.left + parseInt($(ui.helper).css('left'));\n                top = -offsetNewParent.top + parseInt($(ui.helper).css('top'));\n                //      ui.helper[0]._this.left=left;\n                //    ui.helper[0]._this.y=top;\n                if (this.onpropertyadded !== undefined)\n                    this.onpropertyadded(ui.draggable[0]._this.createFromType, newComponent, left, top,newParent);\n                return;\n            }\n            //snap to 5\n            if (top !== 1) {\n                top = Math.round(top / 5) * 5;\n            }\n            if (left !== 1) {\n                left = Math.round(left / 5) * 5;\n            }\n            var oldParent = ui.draggable[0]._this._parent;\n            oldParent.remove(ui.draggable[0]._this);\n            $(ui.draggable).css({ 'top': top, 'left': left, position: 'absolute' });\n            target._this.add(ui.draggable[0]._this);\n            if (_this.onpropertychanged !== undefined) {\n                _this.onpropertychanged(newComponent, left, top, oldParent, newParent);\n            }\n        } else {//relative layout\n\n            var oldParent = ui.draggable[0]._this._parent;\n            \n           if(!$(newParent.domWrapper).hasClass(\"jcontainer\")&&newParent._parent){\n            \tnewParent=newParent._parent;\n           }\n            $(ui.draggable).css({ 'top': \"\", 'left': \"\", \"position\": \"relative\" });\n           if (ui.draggable[0]._this.createFromType !== undefined) {\n                if (this.onpropertyadded !== undefined)\n                    this.onpropertyadded(newComponent.createFromType, ui.draggable[0]._this, undefined, undefined, newParent,beforeComponent);\n\n            }else{\n                 //newParent.add(ui.draggable[0]._this);\n                 if(target._this!==newParent)\n                    newParent.addBefore(ui.draggable[0]._this, target._this);\n                 else\n                 newParent.add(ui.draggable[0]._this);\n                if (_this.onpropertychanged !== undefined) {\n                    _this.onpropertychanged(newComponent, undefined, undefined, oldParent, newParent,beforeComponent);\n                }\n            }\n            /*var t = $(ui.draggable).css('left');\n            var oldx = event.clientX;//[\"originalEvent\"].offsetX; //$(ui.helper).offset().left;\n            var oldy = event.clientY;//[\"originalEvent\"].offsetY;//$(ui.helper).offset().top;\n            var called = false;\n\n            //  $(ui.draggable).css({ 'top': \"\", 'left': \"\", \"position\": \"relative\" });\n\n\n\n            var all = [];\n            for (var x = 0;x < target._this._components.length;x++) {\n                all.push(target._this._components[x]);\n            }\n            \n            for (var x = 0;x < all.length;x++) {\n                var com = all[x];\n                var postest = $(com.dom).position();\n                var posx = $(com.dom).offset().left;\n                var posy = $(com.dom).offset().top;\n                var w = $(com.dom).outerWidth();\n                var h = $(com.dom).outerHeight();\n                if (com.designDummyFor)\n                    com = com.designDummyFor;\n                if ((oldx >= posx && oldx <= posx + w) && (oldy >= posy && oldy <= posy + h) && com !== ui.draggable[0]._this) {\n                    if (ui.draggable[0]._this.createFromType !== undefined) {\n                        if (this.onpropertyadded !== undefined)\n                            this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, undefined, undefined, target._this, com);\n                        return;\n                    }\n                    var h = 0;\n                    console.debug(com._id);\n                    com._parent.addBefore(ui.draggable[0]._this, com);\n                    called = true;\n                    if (_this.onpropertychanged !== undefined) {\n                        _this.onpropertychanged(ui.draggable[0]._this, undefined, undefined, oldParent, target._this, com);\n                    }\n                    break;\n                }\n\n            }\n            if (!called) {//insert at the end\n                if (ui.draggable[0]._this.createFromType !== undefined) {\n                    if (this.onpropertyadded !== undefined)\n                        this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, undefined, undefined, target._this);\n                    return;\n                }\n                target._this.add(ui.draggable[0]._this);\n                if (_this.onpropertychanged !== undefined) {\n                    _this.onpropertychanged(ui.draggable[0]._this, undefined, undefined, oldParent, target._this);\n                }\n            }*/\n        }\n        if(designDummyAtEnd){//this Component should stand at last\n            var par=designDummyAtEnd._parent;\n            par.remove(designDummyAtEnd);\n            par.add(designDummyAtEnd);\n            par.designDummies.push(designDummyAtEnd);//bug insert dummy again\n        }\n    }\n    _dropoldsicherung(target, event, ui) {\n        var _this = this;\n        var l = $(ui.helper).offset().left; \n        var t = $(ui.helper).offset().top;\n        var lp = $(ui.helper[0].parentNode).offset().left;\n        var tp = $(ui.helper[0].parentNode).offset().top;\n\n        console.debug(l + \":\" + t + \"-->\" + (l - lp) + \":\" + (t - tp));\n        if (target._this.isAbsolute) {\n            var offsetNewParent = $(target._this.dom).offset();\n            var offsetOldParent = $(ui.draggable[0]._this._parent.dom).offset();\n            var x = offsetNewParent.left - offsetOldParent.left;\n            var y = offsetNewParent.top - offsetOldParent.top;\n            let t = $(ui.draggable).css('left');\n            var to = offsetOldParent.left;\n            var tn = offsetNewParent.left;\n            var tl = $(ui.draggable).offset().left;\n            var test = $(ui.draggable).offset();\n            var top = parseInt($(ui.helper).css('top')) - y;\n            var left = parseInt($(ui.helper).css('left')) - x;\n\n            if (ui.draggable[0]._this.createFromType !== undefined) {\n                left = -offsetNewParent.left + parseInt($(ui.helper).css('left'));\n                top = -offsetNewParent.top + parseInt($(ui.helper).css('top'));\n                ui.helper[0]._this.left = top;\n                ui.helper[0]._this.y = top;\n                if (this.onpropertyadded !== undefined)\n                    this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, left, top, target._this);\n                return;\n            }\n            //snap to 5\n            if (top !== 1) {\n                top = Math.round(top / 5) * 5;\n            }\n            if (left !== 1) {\n                left = Math.round(left / 5) * 5;\n            }\n            var oldParent = ui.draggable[0]._this._parent;\n            oldParent.remove(ui.draggable[0]._this);\n            $(ui.draggable).css({ 'top': top, 'left': left, position: 'absolute' });\n            target._this.add(ui.draggable[0]._this);\n            if (_this.onpropertychanged !== undefined) {\n                _this.onpropertychanged(ui.draggable[0]._this, left, top, oldParent, target._this);\n            }\n        } else {//relative layout\n\n            var oldParent = ui.draggable[0]._this._parent;\n            var newParent = target._this;\n            if (!$(newParent.dom).hasClass(\"jcontainer\")) {\n                newParent = newParent._parent;\n            }\n            if (ui.draggable[0]._this.createFromType !== undefined) {\n                if (this.onpropertyadded !== undefined)\n                    this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, undefined, undefined, target._this);\n                return;\n            }\n            newParent.add(ui.draggable[0]._this);\n            if (_this.onpropertychanged !== undefined) {\n                _this.onpropertychanged(ui.draggable[0]._this, undefined, undefined, oldParent, newParent);\n            }\n\n            /*\n            \n            let t = $(ui.draggable).css('left');\n            var oldx = $(ui.helper).offset().left;\n            var oldy = $(ui.helper).offset().top;\n            var called = false;\n            if (ui.draggable[0]._this.createFromType !== undefined) {\n                oldx = parseInt($(ui.helper).css('left'));\n                oldy = parseInt($(ui.helper).css('top'));\n            }\n            $(ui.draggable).css({ 'top': \"\", 'left': \"\", \"position\": \"relative\" });\n\n\t\t\tvar comps=[];\n\t\t\tfor(var xx=0;xx<target._this._components.length;x++){\n\t\t\t\tcomps.push(target._this._components[x]);\n\t\t\t}\n\t\t\t\n            for (var x = 0;x < comps.length;x++) {\n                var com = comps[x];\n                var postest = $(com.dom).position();\n                var posx = $(com.dom).offset().left;\n                var posy = $(com.dom).offset().top;\n                var w = $(com.dom).outerWidth();\n                var h = $(com.dom).outerHeight();\n\n                if ((oldx >= posx && oldx <= posx + w) && (oldy >= posy && oldy <= posy + h) && com !== ui.draggable[0]._this) {\n                    if (ui.draggable[0]._this.createFromType !== undefined) {\n                        if (this.onpropertyadded !== undefined)\n                            this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, undefined, undefined, target._this, com);\n                        return;\n                    }\n                    var h = 0;\n                    console.debug(com._id);\n                    com._parent.addBefore(ui.draggable[0]._this, com);\n                    called = true;\n                    if (_this.onpropertychanged !== undefined) {\n                        _this.onpropertychanged(ui.draggable[0]._this, undefined, undefined, oldParent, target._this, com);\n                    }\n                    break;\n                }\n\n            }\n            if (!called) {//insert at the end\n                if (ui.draggable[0]._this.createFromType !== undefined) {\n                    if (this.onpropertyadded !== undefined)\n                        this.onpropertyadded(ui.draggable[0]._this.createFromType, ui.draggable[0]._this, undefined, undefined, target._this);\n                    return;\n                }\n                target._this.add(ui.draggable[0]._this);\n                if (_this.onpropertychanged !== undefined) {\n                    _this.onpropertychanged(ui.draggable[0]._this, undefined, undefined, oldParent, target._this);\n                }\n            }*/\n        }\n    }\n    /**\n    * install the DragAndDropper\n    * all child jomponents are draggable\n    * all child containers are droppable\n    * @param {jassi.ui.Component} parentPanel - all childs are effected\n    * @param {string} all - ID's of all editable components e.g. #10,#12\n    * @returns {unresolved}\n    */\n    install(parentPanel, all) {\n        //$(this.parentPainer\");\n        var _this = this;\n        if (parentPanel !== undefined)\n            this.parentPanel = parentPanel;\n        if (all !== undefined)\n            this.allIDs = all;\n\n\n        // this.draggableComponents = $(this.parentPanel.dom).find(\".jcomponent\").not(\".jdesigncontainer\").not(\".designerNoDraggable\");\n        this.draggableComponents = $(this.allIDs).find(\".jcomponent\").not(\".jdesigncontainer\").not(\".designerNoDraggable\");\n\n\n        this.draggableComponents.draggable({\n            cancel: \"false\", \n            revert: \"invalid\",\n            drag: function(event, ui) {\n                _this.lastDropCanceled = _this.isDragEnabled(event, ui);\n                setTimeout(function() {\n                    _this.lastDropCanceled = false;\n                }, 100);\n                return !_this.lastDropCanceled;\n            },\n            start: function() {\n                _this._isDragging = true;\n            },\n            stop: function() {\n                _this._isDragging = false;\n            },\n            //appendTo: \"body\"\n            helper: \"clone\",\n\n        });\n\n        $(this.parentPanel.dom).find(\".jcomponent\").not(\".jdesigncontainer\").not(\".designerNoDraggable\").draggable('disable');\n        $(this.allIDs).find(\".jcomponent\").not(\".jdesigncontainer\").not(\".designerNoDraggable\").draggable('enable');\n\n        var _this = this;\n        //all jcompoenents are proptargets                                         also jdesignummy     but no jcomponents in absolute Layout  no jcomponens that contains a jdesigndummy  absolutelayout container\n        this.droppableComponents = $(this.parentPanel.dom).parent().parent().find(\".jdesigndummy,.jcomponent:not(.jabsolutelayout>.jcomponent, :has(.jdesigndummy)),                      .jcontainer>.jabsolutelayout\")\n        console.log(this.droppableComponents.length);\n        var isDropping = false;\n        var dropWnd;\n        var dropEvent;\n        var dropUI;\n        this.droppableComponents.droppable({\n            greedy: true,\n            hoverClass: \"ui-state-highlight\",\n            tolerance:\"pointer\",\n            drop: function(event, ui) {\n\n\n                //function is called for every Window in z-Index - we need the last one\n                if (_this.lastDropCanceled)\n                    return;\n                dropWnd = this;\n                dropEvent = event;\n                dropUI = ui;\n                if (!isDropping) {\n                    isDropping = true;\n                    window.setTimeout(function() {\n                        isDropping = false;\n                        _this._drop(dropWnd, dropEvent, dropUI);\n                    }, 50);\n                }\n            }\n        });\n        //this.droppableComponents.droppable(\"enable\");\n        //$(this.allIDs).eq(\".jcontainer\").not(\".jdesigncontainer\").droppable(\"enable\");\n        //$(this.allIDs).filter(\".jcontainer\").not(\".jdesigncontainer\").droppable(\"enable\");\n    }\n    enableDraggable(enable: boolean) {\n        //  this.onpropertychanged = undefined;\n        // this.onpropertyadded = undefined;\n        if (this.draggableComponents !== undefined) {\n            if (!enable)\n                this.draggableComponents.draggable('disable');\n            else\n                this.draggableComponents.draggable('enable');\n        }\n\n    }\n    /**\n     * uninstall the DragAndDropper\n     */\n    uninstall() {\n        this.onpropertychanged = undefined;\n        this.onpropertyadded = undefined;\n        // \t$(this.allIDs).eq(\".jcontainer\").not(\".jdesigncontainer\").droppable(\"disable\");  \n        //$(this.parentPanel.dom).parent().parent().find(\".jcontainer\").droppable(\"destroy\");\n        // var components=$(this.allIDs);\n        if (this.draggableComponents !== undefined) {\n\n            this.draggableComponents.draggable();\n            this.draggableComponents.draggable('destroy');\n            delete $.ui[\"ddmanager\"].current;//memory leak https://bugs.jqueryui.com/ticket/10667\n            this.draggableComponents = undefined;\n        }\n        if (this.droppableComponents !== undefined) {\n            this.droppableComponents.droppable();\n            this.droppableComponents.droppable(\"destroy\");\n        }\n    }\n}\n","\r\nimport { $Class } from \"jassi/remote/Jassi\";\r\n\r\n\r\nimport typescript from \"jassi_editor/util/Typescript\";\r\n\r\n\r\ninterface Properties {\r\n    [details: string]: Entry;\r\n}\r\ninterface Entry {\r\n    value?: any;\r\n    node?: ts.Node;\r\n}\r\nclass ParsedDecorator {\r\n    node?: ts.Decorator;\r\n    name?: string;\r\n    parsedParameter?: object[] = [];\r\n    parameter?: string[] = [];\r\n\r\n}\r\nclass ParsedMember {\r\n    node?: ts.Node;\r\n    name?: string;\r\n    decorator?: { [name: string]: ParsedDecorator } = {};\r\n    type?: string;\r\n}\r\nexport class ParsedClass {\r\n    parent?: Parser;\r\n    node?: ts.ClassElement;\r\n    name?: string;\r\n    fullClassname?: string;\r\n    members?: { [name: string]: ParsedMember } = {};\r\n    decorator?: { [name: string]: ParsedDecorator } = {};\r\n}\r\n@$Class(\"jassi_editor.base.Parser\")\r\nexport class Parser {\r\n    sourceFile: ts.SourceFile = undefined;\r\n    typeMeNode: ts.Node;\r\n    typeMe: { [name: string]: Entry } = {};\r\n    classes: { [name: string]: ParsedClass } = {};\r\n    imports: { [name: string]: string } = {};\r\n    functions: { [name: string]: ts.Node } = {};\r\n\r\n    collectProperties: { classname: string, methodname: string }[];\r\n    code: string;\r\n    /**\r\n    * @member {Object.<string,Object.<string,[object]>> - all properties\r\n    * e.g. data[\"textbox1\"][value]->Entry\r\n    */\r\n    data: { [variable: string]: { [property: string]: Entry[] } };\r\n    /**\r\n     * parses Code for UI relevant settings\r\n     * @class jassi_editor.util.Parser\r\n     */\r\n    constructor() {\r\n\r\n        this.data = {};\r\n        /** {[string]} - all code lines*/\r\n    }\r\n\r\n    getModifiedCode(): string {\r\n        const printer = ts.createPrinter({ newLine: ts.NewLineKind.LineFeed });\r\n        const resultFile = ts.createSourceFile(\"dummy.ts\", \"\", ts.ScriptTarget.Latest, /*setParentNodes*/ false, ts.ScriptKind.TS);\r\n        const result = printer.printNode(ts.EmitHint.Unspecified, this.sourceFile, resultFile);\r\n        return result;\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * add a property\r\n     * @param {string} variable - name of the variable\r\n     * @param {string} property - name of the property\r\n     * @param {string} value  - code - the value\r\n     * @param node - the node of the statement\r\n     */\r\n    private add(variable: string, property: string, value: string, node: ts.Node) {\r\n\r\n        if (value === undefined || value === null)\r\n            return;\r\n        value = value.trim();\r\n        property = property.trim();\r\n        if (this.data[variable] === undefined) {\r\n            this.data[variable] = {};\r\n        }\r\n        if (this.data[variable][property] === undefined) {\r\n            this.data[variable][property] = [];\r\n        }\r\n        if (Array.isArray(this.data[variable][property])) {\r\n            this.data[variable][property].push({\r\n                value: value,\r\n                node: node\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * read a property value from code\r\n     * @param {string} variable - the name of the variable \r\n     * @param {string} property - the name of the property\r\n     */\r\n    getPropertyValue(variable, property): any {\r\n        if (this.data[variable] !== undefined) {\r\n            if (this.data[variable][property] !== undefined) {\r\n                var ret = this.data[variable][property][0].value;\r\n                return ret;\r\n            }\r\n        }\r\n        return undefined;\r\n        /* variable=\"this.\"+variable;\r\n         if(this.data[variable]!==undefined){\r\n             if(this.data[variable][property]!==undefined){\r\n                 return this.data[variable][property][0].value;\r\n             }\r\n         }*/\r\n        //this \r\n        //   var value=this.propertyEditor.parser.getPropertyValue(this.variablename,this.property.name);\r\n\r\n    }\r\n\r\n    addTypeMe(name: string, type: string) {\r\n        if (!this.typeMeNode)\r\n            return;\r\n        var tp = ts.createTypeReferenceNode(type, []);\r\n        var newnode = ts.createPropertySignature(undefined, name + \"?\", undefined, tp, undefined);\r\n        this.typeMeNode[\"members\"].push(newnode);\r\n    }\r\n    addImportIfNeeded(name: string, file: string) {\r\n        if (this.imports[name] === undefined) {\r\n            var imp = ts.createNamedImports([ts.createImportSpecifier(undefined, ts.createIdentifier(name))]);\r\n            const importNode = ts.createImportDeclaration(undefined, undefined, ts.createImportClause(undefined, imp), ts.createLiteral(file));\r\n            this.sourceFile = ts.updateSourceFileNode(this.sourceFile, [importNode, ...this.sourceFile.statements]);\r\n        }\r\n    }\r\n    private parseTypeMeNode(node: ts.Node) {\r\n        var _this = this;\r\n        if (node.kind === ts.SyntaxKind.TypeLiteral) {\r\n            if (node[\"members\"])\r\n                this.typeMeNode = node;\r\n            node[\"members\"].forEach(function (tnode: any) {\r\n                if (tnode.name) {\r\n                    var name = tnode.name.text;\r\n                    var stype = tnode.type.typeName.text;\r\n                    _this.typeMe[name] = { node: tnode, value: stype };\r\n                }\r\n                //            this.add(\"me\", name, \"typedeclaration:\" + stype, undefined, aline, aline);\r\n            });\r\n        }\r\n        node.getChildren().forEach(c => this.parseTypeMeNode(c));\r\n    }\r\n    convertArgument(arg: any) {\r\n        if (arg === undefined)\r\n            return undefined;\r\n\r\n        if (arg.kind === ts.SyntaxKind.ObjectLiteralExpression) {\r\n            var ret = {};\r\n            var props = arg.properties;\r\n            if (props !== undefined) {\r\n                for (var p = 0; p < props.length; p++) {\r\n                    ret[props[p].name.text] = this.convertArgument(props[p].initializer);\r\n                }\r\n            }\r\n            return ret;\r\n        } else if (arg.kind === ts.SyntaxKind.StringLiteral) {\r\n            return arg.text;\r\n        } else if (arg.kind === ts.SyntaxKind.ArrayLiteralExpression) {\r\n            let ret = [];\r\n            for (var p = 0; p < arg.elements.length; p++) {\r\n                ret.push(this.convertArgument(arg.elements[p]));\r\n            }\r\n            return ret;\r\n        } else if (arg.kind === ts.SyntaxKind.Identifier) {\r\n            return arg.text;\r\n        } else if (arg.kind === ts.SyntaxKind.TrueKeyword) {\r\n            return true;\r\n        } else if (arg.kind === ts.SyntaxKind.FalseKeyword) {\r\n            return false;\r\n        } else if (arg.kind === ts.SyntaxKind.NumericLiteral) {\r\n            return Number(arg.text);\r\n        } else if (arg.kind === ts.SyntaxKind.ArrowFunction) {\r\n            return arg.getText();\r\n        }\r\n\r\n        throw \"Error type not found\";\r\n    }\r\n    private parseDecorator(dec: ts.Decorator): ParsedDecorator {\r\n        var ex: any = dec.expression;\r\n        var ret = new ParsedDecorator();\r\n        if (ex.expression === undefined) {\r\n            ret.name = ex.text;\r\n        } else {\r\n\r\n            ret.name = ex.expression.escapedText;\r\n            if (ex.expression !== undefined) {\r\n                for (var a = 0; a < ex.arguments.length; a++) {\r\n                    ret.parsedParameter.push(this.convertArgument(ex.arguments[a]));\r\n                    ret.parameter.push(ex.arguments[a].getText());\r\n                }\r\n\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    private parseClass(node: ts.ClassElement) {\r\n        if (node.kind === ts.SyntaxKind.ClassDeclaration) {\r\n            var parsedClass = new ParsedClass();\r\n            parsedClass.parent = this;\r\n            parsedClass.name = node.name.getText();\r\n            parsedClass.node = node;\r\n            this.classes[parsedClass.name] = parsedClass;\r\n            if (node.decorators !== undefined) {\r\n                var dec = {};\r\n                for (let x = 0; x < node.decorators.length; x++) {\r\n                    var parsedDec = this.parseDecorator(node.decorators[x]);\r\n                    parsedClass.decorator[parsedDec.name] = parsedDec;\r\n                    if (parsedClass.decorator[\"$Class\"] && parsedDec.parameter.length > 0)\r\n                        parsedClass.fullClassname = parsedDec.parameter[0].replaceAll('\"', \"\");\r\n                }\r\n            }\r\n\r\n            for (var x = 0; x < node[\"members\"].length; x++) {\r\n                var parsedMem = new ParsedMember()\r\n                var mem = node[\"members\"][x];\r\n                if (mem.name === undefined)\r\n                    continue;//Constructor\r\n                parsedMem.name = mem.name.escapedText;\r\n                parsedMem.node = node[\"members\"][x];\r\n                parsedMem.type = (mem.type ? mem.type.getFullText().trim() : undefined);\r\n                parsedClass.members[parsedMem.name] = parsedMem;\r\n                var params = [];\r\n                if (mem.decorators) {\r\n                    for (let i = 0; i < mem.decorators.length; i++) {\r\n                        let parsedDec = this.parseDecorator(mem.decorators[i]);\r\n                        parsedMem.decorator[parsedDec.name] = parsedDec;\r\n                    }\r\n                }\r\n            }\r\n            if (this.collectProperties) {\r\n                for (let x = 0; x < this.collectProperties.length; x++) {\r\n                    var col = this.collectProperties[x];\r\n                    if (col.classname === parsedClass.name && parsedClass.members[col.methodname]) {\r\n                        var nd = parsedClass.members[col.methodname].node;\r\n                        this.parseProperties(nd);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    parseProperties(node: ts.Node) {\r\n        if (ts.isVariableDeclaration(node)) {\r\n            var name = node.name.getText();\r\n            var value = node.initializer.getText();\r\n            this.add(name, \"_new_\", value, node.parent.parent);\r\n        }\r\n        if ((ts.isBinaryExpression(node) && node.operatorToken.kind === ts.SyntaxKind.EqualsToken) ||\r\n            ts.isCallExpression(node)) {\r\n            var node1;\r\n            var node2;\r\n            var left: string;\r\n            var value: string;\r\n            if (ts.isBinaryExpression(node)) {\r\n                node1 = node.left;\r\n                node2 = node.right;\r\n                left = node1.getText();// this.code.substring(node1.pos, node1.end).trim();\r\n                value = node2.getText();//this.code.substring(node2.pos, node2.end).trim();\r\n                if (value.startsWith(\"new \"))\r\n                    this.add(left, \"_new_\", value, node.parent);\r\n            }\r\n            if (ts.isCallExpression(node)) {\r\n                node1 = node.expression;\r\n                node2 = node.arguments;\r\n                left = node1.getText();// this.code.substring(node1.pos, node1.end).trim();\r\n                var params = [];\r\n                node.arguments.forEach((arg) => { params.push(arg.getText()) });\r\n                value = params.join(\", \");//this.code.substring(node2.pos, node2.end).trim();//\r\n            }\r\n\r\n            var lastpos = left.lastIndexOf(\".\");\r\n            var variable = left;\r\n            var prop = \"\";\r\n            if (lastpos !== -1) {\r\n                variable = left.substring(0, lastpos);\r\n                prop = left.substring(lastpos + 1);\r\n            }\r\n            this.add(variable, prop, value, node.parent);\r\n        }\r\n        node.getChildren().forEach(c => this.parseProperties(c));\r\n    }\r\n    private visitNode(node: ts.Node) {\r\n        var _this = this;\r\n        if (node.kind === ts.SyntaxKind.ImportDeclaration) {\r\n            var nd: any = node;\r\n            var file = nd.moduleSpecifier.text;\r\n            if (nd.importClause && nd.importClause.namedBindings) {\r\n                var names = nd.importClause.namedBindings.elements;\r\n                for (var e = 0; e < names.length; e++) {\r\n                    this.imports[names[e].name.escapedText] = file;\r\n                }\r\n            }\r\n        }\r\n        if (node.kind == ts.SyntaxKind.TypeAliasDeclaration && node[\"name\"].text === \"Me\") {\r\n            this.parseTypeMeNode(node);\r\n        } else if (node.kind === ts.SyntaxKind.ClassDeclaration) {\r\n            this.parseClass(<ts.ClassElement>node);\r\n\r\n        } else if (node && node.kind === ts.SyntaxKind.FunctionDeclaration) {//functions out of class\r\n            this.functions[node[\"name\"].text] = node;\r\n            if (this.collectProperties) {\r\n                for (let x = 0; x < this.collectProperties.length; x++) {\r\n                    var col = this.collectProperties[x];\r\n                    if (col.classname === undefined && node[\"name\"].text === col.methodname)\r\n                        this.parseProperties(node);\r\n                }\r\n            }\r\n        } else\r\n            node.getChildren().forEach(c => this.visitNode(c));\r\n        //TODO remove this block\r\n        if (node.kind === ts.SyntaxKind.FunctionDeclaration && node[\"name\"].text === \"test\") {\r\n            this.add(node[\"name\"].text, \"\", \"\", undefined);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * parse the code \r\n    * @param {string} code - the code\r\n    * @param {string} onlyfunction - only the code in the function is parsed, e.g. \"layout()\"\r\n    */\r\n    parse(code: string, collectProperties: { classname: string, methodname: string }[] = undefined) {\r\n        this.data = {};\r\n        this.code = code;\r\n        this.collectProperties = collectProperties;\r\n\r\n        this.sourceFile = ts.createSourceFile('dummy.ts', code, ts.ScriptTarget.ES5, true);\r\n        this.visitNode(this.sourceFile);\r\n\r\n        //return this.parseold(code,onlyfunction);\r\n    }\r\n    private removeNode(node: ts.Node) {\r\n        if (node.parent[\"statements\"]) {\r\n            var pos = node.parent[\"statements\"].indexOf(node);\r\n            if (pos >= 0)\r\n                node.parent[\"statements\"].splice(pos, 1);\r\n        } else if (node.parent.parent[\"type\"] !== undefined) {\r\n            var pos = node.parent.parent[\"type\"][\"members\"].indexOf(node);\r\n            if (pos >= 0)\r\n                node.parent.parent[\"type\"][\"members\"].splice(pos, 1);\r\n        } else if (node.parent[\"members\"] !== undefined) {\r\n            var pos = node.parent[\"members\"].indexOf(node);\r\n            if (pos >= 0)\r\n                node.parent[\"members\"].splice(pos, 1);\r\n        } else\r\n            throw Error(node.getFullText() + \"could not be removed\");\r\n    }\r\n    /** \r\n     * modify a member \r\n     **/\r\n    addOrModifyMember(member: ParsedMember, pclass: ParsedClass) {\r\n        //member.node\r\n        //var newmember=ts.createProperty\r\n        var newdec: ts.Decorator[] = undefined;\r\n        for (var key in member.decorator) {\r\n            var dec = member.decorator[key];\r\n            if (!newdec)\r\n                newdec = [];\r\n            //ts.createDecorator()\r\n            //member.decorator[key].name;\r\n            var params = undefined;\r\n            if (dec.parameter) {\r\n                params = [];\r\n                for (var i = 0; i < dec.parameter.length; i++) {\r\n                    params.push(ts.createIdentifier(dec.parameter[i]));\r\n                }\r\n            }\r\n            var call = ts.createCall(ts.createIdentifier(dec.name), undefined, params);\r\n            newdec.push(ts.createDecorator(call));\r\n        }\r\n        //var type=ts.createTy\r\n        var newmember = ts.createProperty(newdec, undefined, member.name, undefined, ts.createTypeReferenceNode(member.type, []), undefined);\r\n        var node = undefined;\r\n        for (var key in pclass.members) {\r\n            if (key === member.name)\r\n                node = pclass.members[key].node\r\n        }\r\n        if (node === undefined) {\r\n            pclass.node[\"members\"].push(newmember);\r\n\r\n        } else {\r\n            var pos = pclass.node[\"members\"].indexOf(node);\r\n            pclass.node[\"members\"][pos] = newmember;\r\n        }\r\n        pclass.members[member.name] = member;\r\n        member.node = newmember;\r\n    }\r\n    /**\r\n    * removes the property from code\r\n    * @param {type} property - the property to remove\r\n    * @param {type} [onlyValue] - remove the property only if the value is found\r\n    * @param {string} [variablename] - thpe name of the variable - default=this.variablename\r\n    */\r\n    removePropertyInCode(property: string, onlyValue = undefined, variablename: string = undefined) {\r\n        if (this.data[variablename] !== undefined && this.data[variablename][property] !== undefined) {\r\n            var prop: Entry = undefined;\r\n            if (onlyValue !== undefined) {\r\n                for (var x = 0; x < this.data[variablename][property].length; x++) {\r\n                    if (this.data[variablename][property][x].value === onlyValue) {\r\n                        prop = this.data[variablename][property][x];\r\n                    }\r\n                }\r\n            } else\r\n                prop = this.data[variablename][property][0];\r\n            if (prop == undefined)\r\n                return;\r\n            this.removeNode(prop.node);\r\n            /*var oldvalue = this.lines[prop.linestart - 1];\r\n            for (let x = prop.linestart;x <= prop.lineend;x++) {\r\n                this.lines[x - 1] = undefined;\r\n                if (x > 1 && this.lines[x - 2].endsWith(\",\"))//type Me={ bt2?:Button,\r\n                    this.lines[x - 2] = this.lines[x - 2].substring(0, this.lines[x - 2].length);\r\n            }*/\r\n            //var text = this.parser.linesToString();\r\n            //this.codeEditor.value = text;\r\n            //this.updateParser();\r\n        }\r\n    }\r\n    /**\r\n     * removes the variable from code\r\n     * @param {string} varname - the variable to remove\r\n     */\r\n    removeVariableInCode(varname: string) {\r\n\r\n        var prop = this.data[varname];\r\n        var allprops: Entry[] = [];\r\n        if (varname.startsWith(\"me.\") && this.typeMe[varname.substring(3)] !== undefined)\r\n            allprops.push(this.typeMe[varname.substring(3)]);\r\n        //remove properties\r\n        for (var key in prop) {\r\n            let props = prop[key];\r\n            props.forEach((p) => {\r\n                allprops.push(p);\r\n            });\r\n        }\r\n        if (varname.startsWith(\"me.\")) {\r\n            let props = this.data.me[varname.substring(3)];\r\n            props?.forEach((p) => {\r\n                allprops.push(p);\r\n            });\r\n        }\r\n        for (var x = 0; x < allprops.length; x++) {\r\n            this.removeNode(allprops[x].node);\r\n        }\r\n        //remove lines where used as parameter\r\n        for (var propkey in this.data) {\r\n            var prop = this.data[propkey];\r\n            for (var key in prop) {\r\n                var props = prop[key];\r\n                for (var x = 0; x < props.length; x++) {\r\n                    let p = props[x];\r\n                    var params = p.value.split(\",\");\r\n                    for (var i = 0; i < params.length; i++) {\r\n                        if (params[i] === varname || params[i] === \"this.\" + varname) {\r\n                            this.removeNode(p.node);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private getNodeFromScope(classscope: { classname: string, methodname: string }[], variablescope: { variablename: string, methodname } = undefined): ts.Node {\r\n        var scope;\r\n        if (variablescope) {\r\n            scope = this.data[variablescope.variablename][variablescope.methodname][0]?.node;\r\n            scope = scope.expression.arguments[0];\r\n        } else {\r\n            for (var i = 0; i < classscope.length; i++) {\r\n                var sc = classscope[i];\r\n                if (sc.classname) {\r\n                    scope = this.classes[sc.classname]?.members[sc.methodname]?.node;\r\n                    if (scope)\r\n                        break;\r\n                } else {//exported function\r\n                    scope = this.functions[sc.methodname];\r\n                }\r\n            }\r\n        }\r\n        return scope;\r\n    }\r\n    /**\r\n     * gets the next variablename\r\n     * */\r\n    getNextVariableNameForType(type: string) {\r\n        var varname = type.split(\".\")[type.split(\".\").length - 1].toLowerCase();\r\n        for (var counter = 1; counter < 1000; counter++) {\r\n            if (this.data.me === undefined || this.data.me[varname + counter] === undefined)\r\n                break;\r\n        }\r\n        return varname + counter;\r\n    }\r\n    /**\r\n    * modify the property in code\r\n    * @param variablename - the name of the variable\r\n    * @param  property - the property \r\n    * @param value - the new value\r\n    * @param classscope  - the property would be insert in this block\r\n    * @param isFunction  - true if the property is a function\r\n    * @param [replace]  - if true the old value is deleted\r\n    * @param [before] - the new property is placed before this property\r\n    * @param [variablescope] - if this scope is defined - the new property would be insert in this variable\r\n    */\r\n    setPropertyInCode(variableName: string, property: string, value: string,\r\n        classscope: { classname: string, methodname: string }[],\r\n        isFunction: boolean = false, replace: boolean = undefined,\r\n        before: { variablename: string, property: string, value?} = undefined,\r\n        variablescope: { variablename: string, methodname } = undefined) {\r\n        var scope = this.getNodeFromScope(classscope, variablescope);\r\n        var newExpression = undefined;\r\n        var statements: ts.Statement[] = scope[\"body\"].statements\r\n        if (property === \"new\") { //me.panel1=new Panel({});\r\n            let prop = this.data[variableName][\"_new_\"][0];//.substring(3)];\r\n            var constr = prop.value;\r\n            value = constr.substring(0, constr.indexOf(\"(\") + 1) + value + constr.substring(constr.lastIndexOf(\")\"));\r\n            replace = true;\r\n            var left = prop.node.getText();\r\n            left = left.substring(0, left.indexOf(\"=\") - 1);\r\n            property = \"_new_\";\r\n            newExpression = ts.createExpressionStatement(ts.createAssignment(ts.createIdentifier(left), ts.createIdentifier(value)));\r\n            /*\t}else{//var hh=new Panel({})\r\n                    let prop = this.data[variableName][0];\r\n                    var constr = prop[0].value;\r\n                    value = constr.substring(0, constr.indexOf(\"(\") + 1) + value + constr.substring(constr.lastIndexOf(\")\"));\r\n                    replace = true;\r\n                    isFunction=true;\r\n                    newExpression=ts.createExpressionStatement(ts.createAssignment(ts.createIdentifier(\"me.\"+property), ts.createIdentifier(value)));\t\r\n                }*/\r\n        } else if (isFunction) {\r\n            newExpression = ts.createExpressionStatement(ts.createCall(ts.createIdentifier(variableName + \".\" + property), undefined, [ts.createIdentifier(value)]));\r\n        } else\r\n            newExpression = ts.createExpressionStatement(ts.createAssignment(ts.createIdentifier(variableName + \".\" + property), ts.createIdentifier(value)));\r\n        if (replace !== false && this.data[variableName] !== undefined && this.data[variableName][property] !== undefined) {//edit existing\r\n            let node = this.data[variableName][property][0].node;\r\n            var pos = node.parent[\"statements\"].indexOf(node);\r\n            node.parent[\"statements\"][pos] = newExpression;\r\n            //if (pos >= 0)\r\n            //  node.parent[\"statements\"].splice(pos, 1);\r\n        } else {//insert new\r\n            if (before) {\r\n                if (before.value === undefined)\r\n                    throw \"not implemented\";\r\n                let node = undefined;\r\n                for (var o = 0; o < this.data[before.variablename][before.property].length; o++) {\r\n                    if (this.data[before.variablename][before.property][o].value === before.value) {\r\n                        node = this.data[before.variablename][before.property][o].node;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!node)\r\n                    throw Error(\"Property not found \" + before.variablename + \".\" + before.property + \" value \" + before.value);\r\n                var pos = node.parent[\"statements\"].indexOf(node);\r\n                if (pos >= 0)\r\n                    node.parent[\"statements\"].splice(pos, 0, newExpression);\r\n            } else {\r\n                var lastprop: ts.Node = undefined;\r\n                for (let prop in this.data[variableName]) {\r\n                    if (prop === \"_new_\")\r\n                        continue;\r\n                    var testnode: ts.Node = this.data[variableName][prop][this.data[variableName][prop].length - 1].node;\r\n                    if (testnode.parent === scope[\"body\"])\r\n                        lastprop = testnode;\r\n                }\r\n                if (lastprop) {\r\n                    var pos = lastprop.parent[\"statements\"].indexOf(lastprop);\r\n                    if (pos >= 0)\r\n                        lastprop.parent[\"statements\"].splice(pos + 1, 0, newExpression);\r\n                } else {\r\n                    var pos = statements.length;\r\n                    if (pos>0&&statements[statements.length - 1].getText().startsWith(\"return \"))\r\n                        pos--;\r\n                    statements.splice(pos, 0, newExpression);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * swaps two statements indendified by  functionparameter in a variable.property(parameter1) with variable.property(parameter2)\r\n     **/\r\n    swapPropertyWithParameter(variable: string, property: string, parameter1: string, parameter2: string) {\r\n        var first: ts.Node = undefined;\r\n        var second: ts.Node = undefined;\r\n        var parent = this.data[variable][property];\r\n        for (var x = 0; x < parent.length; x++) {\r\n            if (parent[x].value.split(\",\")[0].trim() === parameter1)\r\n                first = parent[x].node;\r\n            if (parent[x].value.split(\",\")[0].trim() === parameter2)\r\n                second = parent[x].node;\r\n        }\r\n        if (!first)\r\n            throw Error(\"Parameter not found \" + parameter1);\r\n        if (!second)\r\n            throw Error(\"Parameter not found \" + parameter2);\r\n        var ifirst = first.parent[\"statements\"].indexOf(first);\r\n        var isecond = second.parent[\"statements\"].indexOf(second);\r\n        first.parent[\"statements\"][ifirst] = second;\r\n        first.parent[\"statements\"][isecond] = first;\r\n\r\n\r\n    }\r\n    /**\r\n    * adds an Property\r\n    * @param type - name of the type o create\r\n    * @param classscope - the scope (methodname) where the variable should be insert Class.layout\r\n    * @param variablescope - the scope where the variable should be insert e.g. hallo.onclick\r\n    * @returns  the name of the object\r\n    */\r\n    addVariableInCode(fulltype: string, classscope: { classname: string, methodname: string }[], variablescope: { variablename: string, methodname } = undefined): string {\r\n        let type = fulltype.split(\".\")[fulltype.split(\".\").length - 1];\r\n        var varname = this.getNextVariableNameForType(type);\r\n        //var if(scopename)\r\n        var prefix = \"me.\";\r\n        var node = this.getNodeFromScope(classscope, variablescope);\r\n        var statements: ts.Statement[] = node[\"body\"].statements;\r\n        if (node === undefined)\r\n            throw Error(\"no scope to insert a variable could be found\");\r\n        for (var x = 0; x < statements.length; x++) {\r\n            if (!statements[x].getText().includes(\"new \") && !statements[x].getText().includes(\"var \"))\r\n                break;\r\n        }\r\n        var ass = ts.createAssignment(ts.createIdentifier(prefix + varname), ts.createIdentifier(\"new \" + type + \"()\"));\r\n        statements.splice(x, 0, ts.createStatement(ass));\r\n        this.addTypeMe(varname, type);\r\n        return \"me.\" + varname;\r\n    }\r\n}\r\n\r\nexport async function test() {\r\n    var code = typescript.getCode(\"remote/de/AR.ts\");\r\n    var parser = new Parser();\r\n    parser.parse(code, undefined);\r\n    const printer = ts.createPrinter({ newLine: ts.NewLineKind.LineFeed });\r\n    const resultFile = ts.createSourceFile(\"dummy.ts\", \"\", ts.ScriptTarget.Latest, false, ts.ScriptKind.TS);\r\n    const result = printer.printNode(ts.EmitHint.Unspecified, parser.sourceFile, resultFile);\r\n    console.log(result);\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","import jassi, { $Class } from \"jassi/remote/Jassi\";\nimport {Component} from \"jassi/ui/Component\";\nimport {DragAndDropper} from \"jassi_editor/util/DragAndDropper\";\n\n@$Class(\"jassi_editor.util.Resizer\")\nexport class Resizer {\n    cursorType: string;\n    isCursorOnBorder: boolean;\n    resizedElement: string;\n    isMouseDown: boolean;\n    elements: string;\n    toResizedElement: JQuery<HTMLElement>;\n    mousedownElements: JQuery<Element>;\n    onelementselected;\n    onpropertychanged;\n    parentPanel: Component;\n    lastSelected: string[];\n    componentUnderCursor: Element;\n    lassoMode: boolean;\n    draganddropper: DragAndDropper;\n    topElement: string;\n\tpropertyChangetimer;\n    constructor() {\n        this.cursorType = \"\";\n        this.isCursorOnBorder = false;\n        this.isMouseDown = false;\n        this.resizedElement = \"\";\n        this.elements = undefined;\n        this.toResizedElement = undefined;\n        /** @member {function} - called when and element is selected function(domid,mouseevent */\n        this.onelementselected = undefined;\n        /** @member {function} - called when an element is resized function(component,property,value) */\n        this.onpropertychanged = undefined;\n        /** @member {jassi.ui.Component} - the parent panel */\n        this.parentPanel = undefined;\n        this.lastSelected = undefined;\n        this.componentUnderCursor = undefined;\n        this.lassoMode = false;\n        this.draganddropper = undefined;\n\n        /* this.mouseDown=function(event){\n                 this._activateResize($(this).attr('id'),event);\n         }\n         this.mouseMove=function(event){\n             this._resizeDiv(event); \n         };\n         this.mouseUp=function(event){\n             this._deActivateResize(event);\n         }*/\n    }\n    mouseDown(event) {\n        event.data._resizeDiv(event);\n        event.data._activateResize($(this).attr('id'), event);\n    }\n    mouseMove(event) {\n        event.data._resizeDiv(event);\n    };\n    mouseUp(event) {\n        if (event.data !== undefined)\n            event.data._deActivateResize(event);\n    }\n\t//not every event is fired there nly the last with delay\n\tfirePropertyChange(...param:any[]){\n\t\tvar _this=this;\n\t\tif(this.propertyChangetimer){\n\t\t\tclearTimeout(this.propertyChangetimer);\n\t\t}\n\t\t\t\n\t\tthis.propertyChangetimer=setTimeout(()=>{\n\t\t\tif (_this.onpropertychanged !== undefined) {\n                        _this.onpropertychanged(...param);\n            }\t\t\n\t\t},200);\n\t}\n\n\t/**\n         * resize the component\n         * this is an onmousemove event called from _changeCursor()\n         * @param {type} event\n         */\n    _resizeDiv(e) {\n\n        //window.status = event1.type;\n        //check drag is activated or not\n        if (this.isMouseDown) {\n            // console.debug(\"drag\");\n            var curevent = e;\n            //coordiantes of the event position\n            var x = curevent.clientX;\n            var y = curevent.clientY;\n            //var element = document.getElementById(this.resizedElement);\n            var element: HTMLElement = <HTMLElement>this.componentUnderCursor;\n\n            if (element === undefined) {\n                var cursor = this.cursorType.substring(0, this.cursorType.indexOf('-'));\n                this._changeCursor(e);\n                return;\n            }\n            //top left positions of the div element\n            var topLeftX = $(element._this.dom).offset().left;//element.offsetLeft;\n            var topLeftY = $(element._this.dom).offset().top;//element.offsetTop;\n\n            //width and height of the element\n            var width = element.offsetWidth;\n            var height = element.offsetHeight;\n\n            //get the cursor sytle [e,w,n,s,ne,nw,se,sw]\n            var cursor = this.cursorType.substring(0, this.cursorType.indexOf('-'));\n            var _this = this;\n            if (cursor.indexOf('e') !== -1) {\n                var w = Math.max(x - topLeftX, 8);\n                w = Math.round(w / 5) * 5;\n                element._this.width = w;\n                this.firePropertyChange(element._this, \"width\", w);\n                /*if (this.onpropertychanged !== undefined) {\n                \t    this.onpropertychanged(element._this, \"width\", w);\n                }*/\n                //\telement.style.width = Math.max(x - topLeftX,8)+'px';\n\n            }\n            if (cursor.indexOf('s') !== -1) {\n                var h = Math.max(y - topLeftY, 8);\n                h = Math.round(h / 5) * 5;\n                element._this.height = h;//+'px';\n                this.firePropertyChange(element._this, \"height\", h);\n                /*if (this.onpropertychanged !== undefined) {\n                        this.onpropertychanged(element._this, \"height\", h);\n                }*/\n            }\n        } else {\n            //  document.getElementById(elementID).style.cursor = cursorType;\n            this._changeCursor(e);\n        }\n\n    }\n    /**\n             * activate resizing\n             * @param {string} elementID\n             * @param {type} e\n             */\n    _activateResize(elementID: string, e) {\n        var _this = this;\n\n        if (this.onelementselected !== undefined) {\n\n            //select with click\n            //delegate only the top window - this is the first event????\n            if (this.topElement === undefined) {\n                if ($(\"#\" + elementID).hasClass(\"designerNoSelectable\")) {\n                    return;\n                }\n                this.topElement = elementID;\n\n                setTimeout(function() {\n                    $(\".jselected\").removeClass(\"jselected\");\n                    $(\"#\" + _this.topElement).addClass(\"jselected\");\n                    _this.lastSelected = [_this.topElement];\n                    if(!_this.onelementselected)\n                    \tconsole.log(\"onselected undefined\");\n                    _this.onelementselected(_this.lastSelected, e);\n                    _this.topElement = undefined;\n                }, 50);\n            }\n\n            var lastTime = new Date().getTime();\n            //select with lasso\n\n        }\n        if (this.resizedElement === \"\" || this.resizedElement === undefined) {//if also parentcontainer will be fired->ignore\n            this.resizedElement = elementID.toString();\n            this.isMouseDown = true;\n        }\n    }\n\t/**\n         * switch off the resizing\n         * @param {type} event\n         */\n    _deActivateResize(event) {\n        this.isMouseDown = false;\n        this.isCursorOnBorder = false;\n        this.cursorType = \"default\";\n        if (this.resizedElement !== \"\" && this.resizedElement !== undefined) {\n            document.getElementById(this.resizedElement).style.cursor = this.cursorType;\n            this.resizedElement = \"\";\n        }\n\n    }\n\n\t/**\n         * changes the cursor and determine the toResizedElement\n         * @param {type} e\n         */\n    _changeCursor(e) {\n        var borderSize = 4;\n        this.cursorType = \"default\";\n\n        // var els=$(\".one\");//document.getElementsByClassName(\"one\");\n        var els = $(this.parentPanel.dom).find(this.elements);\n        for (var i = 0;i < els.length;i++) {\n            var element: HTMLElement = <HTMLElement>els[i];\n            if ($(element).hasClass(\"designerNoResizable\")) {\n                continue;\n            }\n            //code start for changing the cursor\n            //var element2 = document.getElementById(elementID);\n            var topLeftX = $(element).offset().left;//element.offsetLeft;\n            var topLeftY = $(element).offset().top;//element.offsetTop;\n            var bottomRightX = topLeftX + element.offsetWidth;\n            var bottomRightY = topLeftY + element.offsetHeight;\n            var curevent = e;\n            var x = curevent.clientX;\n            var y = curevent.clientY;\n            //window.status = topLeftX +\"--\"+topLeftY+\"--\"+bottomRightX+\"--\"+bottomRightY+\"--\"+x+\"--\"+y+\"--\"+isMouseDown;\n\n            //change the cursor style when it is on the border or even at a distance of 8 pixels around the border\n            if (x >= bottomRightX - borderSize && x <= bottomRightX + borderSize) {\n                /*  if(y >= bottomRightY-borderSize && y <= bottomRightY+borderSize){\n                          this.isCursorOnBorder = true;\n                          this.cursorType = \"se-resize\";\n                  }*/\n                if (y > topLeftY - borderSize && y < bottomRightY + borderSize) {\n                    this.isCursorOnBorder = true;\n                    this.cursorType = \"e-resize\";\n                }\n            }\n            else if (x > topLeftX - borderSize && x < bottomRightX + borderSize) {\n                if (y >= bottomRightY - borderSize && y <= bottomRightY + borderSize) {\n                    this.isCursorOnBorder = true;\n                    this.cursorType = \"s-resize\";\n                }\n            }\n            if (this.cursorType === \"e-resize\" || this.cursorType === \"s-resize\") {\n                var test = $(element).closest(\".jcomponent\");\n                if (test !== undefined && test.hasClass(\"ui-draggable\")) {\n                    this.toResizedElement = test;\n                    // test.draggable( \"disable\" );\n                    //  if(this.toResizedElement[0]._this!=undefined&&this.toResizedElement[0]._this.dom!=undefined)\n                    //    $(this.toResizedElement[0]._this.dom).prop('disabled', true);\n                }\n                var isDragging = false;\n                if (this.draganddropper !== undefined) {\n                    element == undefined;\n                    isDragging = this.draganddropper.isDragging();\n                }\n                if (!this.lassoMode && !isDragging) {\n                    this.componentUnderCursor = test[0];\n                    element.style.cursor = this.cursorType;\n                } else {\n                    this.cursorType = \"default\";\n                    this.componentUnderCursor = undefined;\n                    element.style.cursor = this.cursorType;\n                }\n                return;\n            }\n            this.componentUnderCursor = undefined;\n            element.style.cursor = this.cursorType;\n        }\n        if (this.toResizedElement !== undefined) {\n            //     this.toResizedElement.draggable( \"enable\" );\n        }\n    }\n    setLassoMode(enable) {\n        this.lassoMode = enable;\n        this.lastSelected = [];\n        this.resizedElement = \"\";\n        this.cursorType = \"\";\n        this.isCursorOnBorder = false;\n        this.isMouseDown = false;\n\n        this.toResizedElement = undefined;\n        var lastTime = new Date().getTime();\n        var _this = this;\n        if (enable === true) {\n            $(this.parentPanel.dom).selectable({\n                selected: function(event, ui) {\n                    if (new Date().getTime() - lastTime > 500) {//new selection\n                        _this.lastSelected = [];\n                        $(\".jselected\").removeClass(\"jselected\");\n                        setTimeout(function() {\n                            _this.onelementselected(_this.lastSelected);\n                            _this.lastSelected = undefined;\n                        }, 50);\n                    }\n                    lastTime = new Date().getTime();\n                    var a = 9;\n                    if (ui.selected._this && $(ui.selected).hasClass(\"jcomponent\") && !$(ui.selected).hasClass(\"designerNoSelectable\")) {\n                        var ids = _this.elements + \",\";\n                        if (ids.indexOf(\"#\" + ui.selected._this._id + \",\") > -1) {\n                            _this.lastSelected.push(ui.selected._this._id);\n                            $(\"#\" + ui.selected._this._id).addClass(\"jselected\");\n                        }\n                    }\n                }\n            });\n        } else {\n\n            $(this.parentPanel.dom).selectable(\"destroy\");\n        }\n\n    }\n    /**\n     * install the resizer\n     * @param {jassi.ui.Component} parentPanel - the parent component\n     * @param {string} elements - the search pattern for the components to resize e.q. \".jresizeable\"\n     */\n    install(parentPanel, elements) {\n        var _this = this;\n        $(parentPanel.domWrapper).resizable({\n            resize: function(evt: any) {\n                var h = evt.target.offsetHeight;\n                var w = evt.target.offsetWidth;\n                if (_this.onpropertychanged !== undefined) {\n                    evt.target._this.width = w;\n                    evt.target._this.height = h;\n                    _this.onpropertychanged(evt.target._this, \"width\", w);\n                    _this.onpropertychanged(evt.target._this, \"height\", h);\n                    $(evt.target._this.domWrapper).css(\"width\", w + \"px\");\n                    $(evt.target._this.domWrapper).css(\"height\", h + \"px\");\n                }\n            }\n        });\n        if (parentPanel !== undefined)\n            this.parentPanel = parentPanel;\n        if (elements !== undefined)\n            this.elements = elements;\n        $(this.parentPanel.dom).on(\"mousedown\", this, this.mouseDown);\n        this.mousedownElements = $(this.parentPanel.dom).find(this.elements);\n        this.mousedownElements.on(\"mousedown\", this, this.mouseDown);\n        $(this.parentPanel.dom).on(\"mousemove\", this, this.mouseMove);\n        $(this.parentPanel.dom).on(\"mouseup\", this, this.mouseUp);\n\n        //this.setLassoMode(true);\n        //this.setLassoMode(false);\n\n    }\n    tt(){\n    \t if (this.parentPanel !== undefined) {\n            $(this.parentPanel.dom).off(\"mousedown\", this.mouseDown);\n            if (this.mousedownElements !== undefined)\n                this.mousedownElements.off(\"mousedown\", this.mouseDown);\n            this.mousedownElements = undefined;\n            $(this.parentPanel.dom).off(\"mousemove\", this.mouseMove);\n            $(this.parentPanel.dom).on(\"mouseup\", this.mouseUp);\n        }\n    }\n    /**\n     * uninstall the resizer\n     */\n    uninstall() {\n        this.onelementselected = undefined;\n        this.onpropertychanged = undefined;\n        if (this.parentPanel !== undefined) {\n            $(this.parentPanel.dom).off(\"mousedown\", this.mouseDown);\n            if (this.mousedownElements !== undefined)\n                this.mousedownElements.off(\"mousedown\", this.mouseDown);\n            this.mousedownElements = undefined;\n            $(this.parentPanel.dom).off(\"mousemove\", this.mouseMove);\n            $(this.parentPanel.dom).on(\"mouseup\", this.mouseUp);\n        }\n        this.resizedElement = \"\";\n        this.elements = undefined;\n        this.toResizedElement = undefined;\n        this.parentPanel = undefined;\n        this.lastSelected = undefined;\n        this.componentUnderCursor = undefined;\n        this.draganddropper = undefined;\n\n        /*  this.mouseDown.bound=undefined;\n          this.mouseMove.bound=undefined;\n          this.mouseUp.bound=undefined;*/\n\n    }\n}\n","/*requirejs.config({\r\n    baseUrl: 'https://unpkg.com/source-map@0.7.3/dist/source-map',\r\n    paths: {\r\n        'mozilla.sourcemap':\"https://unpkg.com/source-map@0.7.3/dist/source-map\"\r\n    }\r\n\r\n});*/\r\n//@ts-ignore\r\nimport sourceMap from \"jassi/ext/sourcemap\";\r\n\r\n\r\nimport jassi from \"jassi/jassi\";\r\nimport { Server } from \"jassi/remote/Server\";\r\nimport { $Class } from \"jassi/remote/Jassi\";\r\n//var sourceMap=window[\"sourceMap\"];\r\n@$Class(\"jassi_editor.util.TSSourceMap\")\r\nexport class TSSourceMap {\r\n    async getLineFromTS(tsfile: string, line, column):Promise<{line:number,column:number,jsfilename:string}> {\r\n        var jscode;\r\n        var mapcode = \"\";\r\n        var filenumber=0;\r\n        var jsfilename;\r\n        if (Server.filesInMap && Server.filesInMap[tsfile]) {\r\n            var mod = Server.filesInMap[tsfile].modul;\r\n            jsfilename = jassi.modules[mod];\r\n            mapcode = await $.ajax({ url: jsfilename+\".map\", dataType: \"text\" });\r\n            filenumber=Server.filesInMap[tsfile].id;\r\n        } else {\r\n            jsfilename=\"js/\" + tsfile.replace(\".ts\", \".js\");\r\n            jscode = await $.ajax({ url: jsfilename, dataType: \"text\" });\r\n\r\n            var pos = jscode.indexOf(\"//\" + \"# sourceMappingURL=\");\r\n            if (jscode.indexOf(\"//\" + \"# sourceMappingURL=data:application\") > -1) {\r\n                var b64 = jscode.substring(pos + 50);\r\n                mapcode = ts[\"base64decode\"](undefined, b64);\r\n                //mapcode = decodeURIComponent(escape((b64)));\r\n            } else {\r\n                mapcode = await $.ajax({ url: \"js/\" + tsfile.replace(\".ts\", \".js.map\"), dataType: \"text\" });\r\n            }\r\n        }\r\n        var ret:Promise<{line:number,column:number,jsfilename:string}> = new Promise((resolve, reject) => { // eslint-disable-line no-unused-vars\r\n            var isinline = false;\r\n            sourceMap.SourceMapConsumer.initialize({\r\n                \"lib/mappings.wasm\": \"https://unpkg.com/source-map@0.7.3/lib/mappings.wasm\"\r\n            });\r\n            var rawSourceMap = JSON.parse(mapcode);\r\n            sourceMap.SourceMapConsumer.with(rawSourceMap, null, consumer => {\r\n                var test = consumer.sources;\r\n                var l = consumer.generatedPositionFor({\r\n                    source: rawSourceMap.sources[filenumber],\r\n                    line: line,\r\n                    column: column\r\n                })\r\n                l.jsfilename=jsfilename;\r\n                return l;\r\n            }).then(function (whatever) {\r\n                resolve(whatever);\r\n            });\r\n        });\r\n        return ret;\r\n    }\r\n\r\n    async getLineFromJS(jsfile, line, column) {\r\n        var jscode = await $.ajax({ url: jsfile, dataType: \"text\" });\r\n        var mapcode = \"\";\r\n        var pos = jscode.indexOf(\"//\" + \"# sourceMappingURL=\");\r\n        if (jscode.indexOf(\"//\" + \"# sourceMappingURL=data:application\") > -1) {\r\n            var b64 = jscode.substring(pos + 50);\r\n            mapcode = atob(b64);\r\n        } else {\r\n            mapcode = await $.ajax({ url: jsfile.replace(\".js\", \".js.map\"), dataType: \"text\" });\r\n        }\r\n\r\n        var ret = new Promise((resolve, reject) => { // eslint-disable-line no-unused-vars\r\n            sourceMap.SourceMapConsumer.initialize({\r\n                \"lib/mappings.wasm\": \"https://unpkg.com/source-map@0.7.3/lib/mappings.wasm\"\r\n            });\r\n            var rawSourceMap = JSON.parse(mapcode);\r\n            sourceMap.SourceMapConsumer.with(rawSourceMap, null, consumer => {\r\n                var test = consumer.sources;\r\n                var l = consumer.originalPositionFor({\r\n                    bias: sourceMap.SourceMapConsumer.GREATEST_LOWER_BOUND,\r\n                    line: line,\r\n                    column: column\r\n                })\r\n                return l;\r\n            }).then(function (whatever) {\r\n                resolve(whatever.line);\r\n            });\r\n        });\r\n\r\n        return ret;\r\n        //  jassi.myRequire(\"https://unpkg.com/source-map@0.7.3/dist/source-map.js\",function(data){\r\n    }\r\n}\r\n\r\n","\r\nimport jassi, { $Class } from \"jassi/remote/Jassi\";\r\nimport { Server } from \"jassi/remote/Server\"; \r\nimport { FileNode } from \"jassi/remote/FileNode\";\r\n//@ts-ignore\r\nimport \"jassi_editor/ext/monaco\";\r\nimport \"jassi/ext/requestidlecallback\";\r\nimport { Editor } from \"jassi/ui/PropertyEditors/Editor\";\r\n\r\n@$Class(\"jassi_editor.util.Typescript\")\r\nexport class Typescript {\r\n    waitForInited: Promise<boolean>;\r\n    tsWorker: monaco.languages.typescript.TypeScriptWorker;\r\n\r\n    static languageServiceHost: ts.LanguageServiceHost;\r\n    static ts;\r\n\r\n\r\n    /**\r\n    * resolved if the service is inited\r\n    */\r\n    private static _isInited: boolean = undefined;\r\n    static compilerSettings = {\r\n        baseUrl: \"./\",\r\n        target: \"ES2017\",\r\n        module: \"AMD\",\r\n        sourceMap: true,\r\n        outDir: \"./js\",\r\n        emitDecoratorMetadata: true,\r\n        experimentalDecorators: true,\r\n    }\r\n    public isInited(file) {\r\n\r\n        return Typescript._isInited === true;\r\n    }\r\n    /**\r\n     * transpile the ts-file an returns all reflected files\r\n     * @param fileName \r\n     * @param content \r\n     */\r\n    async transpile(fileName: string, content: string,compilerSettings:any=undefined): Promise<{ fileNames: string[]; contents: string[] }> {\r\n        //@ts-ignore\r\n        //await import(\"jassi/ext/typescript\");\r\n        var ret = { fileNames: [fileName], contents: [content] }\r\n        /*  var opt = {\r\n            //  compilerOptions: {\r\n                  baseUrl: \"./\",\r\n                  target: ts.ScriptTarget.ES2017,\r\n                  module: ts.ModuleKind.AMD,\r\n                  sourceMap: true\r\n           //   }\r\n          };*/\r\n        var prefix = \"\";\r\n        for (let x = 0; x < fileName.split(\"/\").length; x++) {\r\n            prefix = \"../\" + prefix;\r\n        }\r\n        var opt = {\r\n            compilerOptions: compilerSettings?compilerSettings:Typescript.compilerSettings,\r\n            fileName: prefix + fileName,\r\n        };\r\n        //@ts-ignore\r\n        var comp: any = ts.transpileModule(content, opt);\r\n\r\n        ret.fileNames.push(\"js/\" + fileName.substring(0,fileName.length-3)+\".js\");\r\n        ret.contents.push(comp.outputText);\r\n        ret.fileNames.push(\"js/\" + fileName.substring(0,fileName.length-3)+\".js.map\");\r\n        ret.contents.push(comp.sourceMapText);\r\n        return ret;\r\n    }\r\n    private constructor() {\r\n\r\n        if (Typescript._isInited === undefined)\r\n            this.waitForInited = this.initService();\r\n\r\n    }\r\n\r\n    static initMonaco() {\r\n        /* monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\r\n             \"baseUrl\": \"./\",\r\n             rootDir: \"./\",\r\n         })*/\r\n        monaco.languages.typescript.typescriptDefaults.setCompilerOptions({\r\n            \"target\": monaco.languages.typescript.ScriptTarget.Latest,\r\n            \"baseUrl\": \"./\",\r\n            \"module\": monaco.languages.typescript.ModuleKind.AMD,\r\n            //@ts-ignore\r\n            \"moduleResolution\": monaco.languages.typescript.ModuleResolutionKind.node,\r\n\r\n            rootDir: \"./\",\r\n            \"sourceMap\": true,\r\n            \"outDir\": \"./js\",\r\n            emitDecoratorMetadata: true,\r\n            allowNonTsExtensions: true,\r\n            allowJs: true,\r\n            experimentalDecorators: true,\r\n        });\r\n\r\n    }\r\n    initInIdle = true;\r\n    //load  d.ts from modulpackage\r\n    private async includeModulTypes(){\r\n        var nodeFiles={}\r\n        for(var mod in jassi.modules){\r\n            var config=(await import(mod+\"/modul\")).default;\r\n            if(config.types){\r\n                for(var key in config.types){\r\n                    var file=config.types[key];\r\n                    nodeFiles[key]=new Server().loadFile(file);\r\n\r\n                }\r\n            }\r\n        }\r\n        return nodeFiles;\r\n    }\r\n    /**\r\n     * initialize the services tooks any seconds\r\n     * functions which uses the languageservice are blocked until ready\r\n     */\r\n    async initService(): Promise<boolean> {\r\n        if (Typescript._isInited !== undefined)\r\n            return;\r\n        Typescript._isInited = false;\r\n        Typescript.initMonaco();\r\n        //@ts-ignore\r\n        //  import(\"jassi/ext/typescript\").then(async function(ts1) {\r\n        Typescript.ts = ts;\r\n\r\n        var _this = this;\r\n        var f: { [path: string]: FileNode } = (await new Server().dir(true)).resolveChilds();\r\n        \r\n        var nodeFiles =await  this.includeModulTypes();\r\n        //Load all files to in cache\r\n        //node_modules with ajax - so we kann cache \r\n        var myfiles = [];\r\n        for (let x in f) {\r\n            let fname = f[x].fullpath;\r\n            let fdat = f[x].date;\r\n\r\n\r\n            //include js in jassi/ext\r\n            if (fname.startsWith(\"node_modules\"))\r\n                continue;\r\n            if (fname.toLowerCase().endsWith(\".ts\") || fname.toLowerCase().endsWith(\".js\") || fname.toLowerCase().endsWith(\".json\")) {\r\n                if (fname.toLocaleLowerCase().endsWith(\".js\")) {\r\n                    monaco.languages.typescript.typescriptDefaults.addExtraLib(\"export default const test=1;\", \"file:///\" + fname);\r\n                }\r\n                if(fdat===undefined){\r\n                    nodeFiles[fname]=new Server().loadFile(fname);\r\n                }else{\r\n                    nodeFiles[fname] = $.ajax({\r\n                        url: fname,\r\n                        beforeSend: function (request) {\r\n                            request.setRequestHeader(\"X-Custom-FromCache\", fdat);\r\n                        },\r\n                        dataType: \"text\"\r\n                    });\r\n                }\r\n                //}\r\n            }\r\n        }\r\n        //load TS sources\r\n\r\n        //wait for each nodefiles\r\n        var code = {};\r\n        for (let key in nodeFiles) {\r\n            code[key] = await nodeFiles[key];\r\n\r\n        }\r\n        for (let key in nodeFiles) {\r\n            //monaco\r\n\r\n            //@ts-ignore\r\n            //\t\r\n            var type = \"typescript\";\r\n\r\n            if (key.toLocaleLowerCase().endsWith(\".ts\")) {\r\n                //\r\n                if (this.initInIdle) {\r\n                    var ffile = monaco.Uri.from({ path: \"/\" + key, scheme: 'file' });\r\n                    //console.log(key);\r\n                    if (!monaco.editor.getModel(ffile))\r\n                        monaco.editor.createModel(code[key], \"typescript\", ffile);\r\n                    //});\r\n                } else {\r\n                    monaco.languages.typescript.typescriptDefaults.addExtraLib(code[key], \"file:///\" + key);\r\n                }\r\n            }\r\n            if (key.toLocaleLowerCase().endsWith(\".json\"))\r\n                type = \"json\";\r\n\r\n        }\r\n        //initialize monaco\r\n        if (!this.initInIdle)\r\n            monaco.editor.createModel(\"var a=1;\", \"typescript\", monaco.Uri.from({ path: \"/__mydummy.ts\", scheme: 'file' }));\r\n        this.tsWorker = await (await monaco.languages.typescript.getTypeScriptWorker())()\r\n        Typescript._isInited = true;\r\n        return true;\r\n    }\r\n    /**\r\n     * unused\r\n     */\r\n    async getDefinitionAtPosition(file: string, position: number) {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        return await this.tsWorker.getDefinitionAtPosition(\"file:///\" + file, position);\r\n\r\n    }\r\n    /**\r\n     * unused\r\n     */\r\n    async getSignatureHelpItems(file: string, position: number) {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        //@ts-ignore\r\n        return await this.tsWorker.getSignatureHelpItems(\"file:///\" + file, position,undefined);\r\n\r\n    }\r\n    async includefileIfNeeded(file: string) {\r\n\r\n    }\r\n    async renameFile(oldfile: string, newfile: string) {\r\n        var ffile = monaco.Uri.from({ path: \"/\" + oldfile, scheme: 'file' });\r\n        var oldmodell = monaco.editor.getModel(ffile); \r\n        oldmodell.dispose();\r\n        var text = await $.ajax({\r\n            url: newfile,\r\n            beforeSend: function (request) {\r\n                request.setRequestHeader(\"X-Custom-FromCache\", newfile);\r\n            },\r\n            dataType: \"text\"\r\n        });\r\n        await this.setCode(newfile, text);\r\n        var snap = Typescript.languageServiceHost.getScriptSnapshot(newfile);\r\n    }\r\n\r\n    /**\r\n     * @returns all code filenames\r\n     */\r\n    getFiles(): string[] {\r\n        var ret: string[] = [];\r\n        var mods = monaco.editor.getModels();\r\n        for (var x = 0; x < mods.length; x++) {\r\n            var f = mods[x].uri.path.substring(1);\r\n            ret.push(f);\r\n        }\r\n        return ret;\r\n    }\r\n    /**\r\n     * get the code for a file\r\n     * @params file - the filename e.g. jassi/base/Parser.ts\r\n     */\r\n    getCode(file: string): string {\r\n        var ffile = monaco.Uri.from({ path: \"/\" + file, scheme: 'file' });\r\n        var mod = monaco.editor.getModel(ffile);\r\n        if (mod)\r\n            return mod.getValue();\r\n        else\r\n            return undefined;\r\n    }\r\n    /**\r\n     * put file in cache\r\n     * @param file - the ts file\r\n     * @param text - the text of the ts file\r\n     */\r\n    setCode(file: string, text: string) {\r\n        var ffile = monaco.Uri.from({ path: \"/\" + file, scheme: 'file' });\r\n        var mod = monaco.editor.getModel(ffile);\r\n        if (!mod) {\r\n            mod = monaco.editor.createModel(text, \"typescript\", ffile);\r\n        }\r\n        var waiter = new Promise(function (resolve) {\r\n            var disp = mod.onDidChangeContent((evt) => {\r\n                if (evt.changes[0].text === text) {\r\n                    disp.dispose();\r\n                    resolve(mod);\r\n                }\r\n            });\r\n        });\r\n        mod.setValue(text);\r\n        return waiter;\r\n    }\r\n    /**\r\n     * get info for a completionentry\r\n     * @param file - the ts file\r\n     * @param position - the position in string\r\n     * @param item -the item we are interested\r\n     * @param formatOptions -unused\r\n     * @param source -unused\r\n     * @param preferences - unused\r\n     */\r\n    async getCompletionEntryDetails(file: string, position: number, item: string, formatOptions = {}, source = undefined, preferences = {}) {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        const info = await this.tsWorker.getCompletionEntryDetails(\"file:///\" + file, position, item);\r\n        return info;\r\n    }\r\n    /**\r\n     * get all completions at a  position\r\n     * @param file -the ts file\r\n     * @param position -the position in string\r\n     * @param text - the text of the file is saved to cache\r\n     */\r\n    async getCompletion(file: string, position: number, text: string = undefined, options) {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        if (text !== undefined) {\r\n            var p = this.setCode(file, text);\r\n            await p;\r\n            // Typescript.languageServiceHost.getScriptSnapshot(file);\r\n        }\r\n        //@ts-ignore\r\n        const info = await this.tsWorker.getCompletionsAtPosition(\"file:///\" + file, position, options);\r\n        //            { includeExternalModuleExports: true });\r\n        return info;\r\n    }\r\n    async getQuickInfoAtPosition(file: string, position: number, text: string) {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        if (text !== undefined) {\r\n            await this.setCode(file, text);\r\n        }\r\n        return await this.tsWorker.getQuickInfoAtPosition(\"file:///\" + file, position);\r\n    }\r\n    async getCodeFixesAtPosition(file: string, text: string = undefined, start: number, end: number, errorCodes: []): Promise<any> {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        if (text !== undefined) {\r\n            await this.setCode(file, text);\r\n        }\r\n        return await this.tsWorker.getCodeFixesAtPosition(\"file:///\" + file, start, end, errorCodes, {});\r\n    }\r\n    async formatDocument(filePath: string, text: string = undefined) {\r\n        await this.waitForInited;\r\n        await this.setCode(filePath, text);\r\n\r\n        var textChanges = await this.tsWorker.getFormattingEditsForDocument(\"file:///\" + filePath, {\r\n            convertTabsToSpaces: true,\r\n            insertSpaceAfterCommaDelimiter: true,\r\n            insertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            insertSpaceBeforeAndAfterBinaryOperators: true,\r\n            newLineCharacter: \"\\n\",\r\n            indentStyle: ts.IndentStyle.Smart,\r\n            indentSize: 4,\r\n            tabSize: 4\r\n        });\r\n\r\n        let finalText = text;\r\n        textChanges = textChanges.sort((a, b) => b.span.start - a.span.start);\r\n        for (var i = 0; i < textChanges.length; i++) {\r\n            var textChange = textChanges[i];\r\n            const { span } = textChange;\r\n            finalText = finalText.slice(0, span.start) + textChange.newText\r\n                + finalText.slice(span.start + span.length);\r\n        }\r\n        return finalText;\r\n    }\r\n    async getDiagnosticsForAll(): Promise<ts.Diagnostic[]> {\r\n        var mods=monaco.editor.getModels();\r\n        var ret=[]; \r\n        for(var x=0;x<mods.length;x++){\r\n            var url=\"file:///\"+mods[x].uri.path;\r\n            if(url.indexOf(\"node_modules/\")>0)\r\n                continue;\r\n            var sug=await this.tsWorker.getSemanticDiagnostics(url);\r\n            for(var s=0;s<sug.length;s++){\r\n                //@ts-ignore\r\n                sug[s][\"file\"]={\r\n                    fileName:mods[x].uri.path.substring(1)\r\n                }\r\n                ret.push(sug[s]);\r\n            }\r\n            sug=await this.tsWorker.getSyntacticDiagnostics(url);\r\n            for(var s=0;s<sug.length;s++){\r\n                //@ts-ignore\r\n                sug[s][\"file\"]={\r\n                    fileName:mods[x].uri.path.substring(1)\r\n                }\r\n                ret.push(sug[s]);\r\n            }\r\n        }\r\n        return ret;\r\n        /* var prog=Typescript.languageService.getProgram();\r\n         let all=Typescript.ts.getPreEmitDiagnostics(prog);\r\n         let all2=prog.emit().diagnostics;\r\n         let ret=[];\r\n         all.forEach((diag)=>{\r\n             if(diag.file!==undefined&&!diag.file.fileName.startsWith(\"node_modules\"))\r\n                 ret.push(diag);\r\n         });\r\n         return ret;*/\r\n    }\r\n    getLineAndCharacterOfPosition(fileName: string, pos: number): { line, character } {\r\n        var p = monaco.editor.getModel(monaco.Uri.from({ path: \"/\" + fileName, scheme: 'file' })).getPositionAt(pos);\r\n        return {\r\n            line: p.lineNumber,\r\n            character: p.column\r\n        }\r\n    }\r\n    getPositionOfLineAndCharacter(fileName: string, pos: { line, character }): number {\r\n        var p = monaco.editor.getModel(monaco.Uri.from({ path: \"/\" + fileName, scheme: 'file' })).getOffsetAt({\r\n            column: pos.character,\r\n            lineNumber: pos.line\r\n        })\r\n        return p;\r\n    }\r\n    async getDiagnostics(file: string, text: string = undefined) {\r\n        await this.waitForInited;\r\n        if (Typescript._isInited !== true) {\r\n            throw Error(\"check isInited before call \")\r\n        }\r\n        if (text !== undefined) {\r\n            this.setCode(file, text);\r\n        }\r\n\r\n        return {\r\n            semantic: await this.tsWorker.getSemanticDiagnostics(\"file:///\" + file),\r\n            suggestion: await this.tsWorker.getSuggestionDiagnostics(\"file:///\" + file),\r\n            syntactic: await this.tsWorker.getSyntacticDiagnostics(\"file:///\" + file)\r\n            //      declaration:Typescript.languageService.getDeclarationDiagnostics(file)\r\n        }\r\n    }\r\n}\r\n//@ts-ignore\r\nvar typescript: Typescript = new Typescript();\r\nexport default typescript;","import { Component } from \"jassi/ui/Component\";\n//@ts-ignore\nimport {getLanguageService} from \"jassi_editor/ext/monaco\";\nimport { Panel } from \"jassi/ui/Panel\";\nimport { Typescript } from \"jassi_editor/util/Typescript\";\n\nexport class MonacoEditor extends Component{\n       /* get dom(){\n            return this.dom;\n        }*/\n        constructor(){ \n            super();    \n            super.init($('<div style=\"width: 800px; height: 600px; border: 1px solid grey\"></div>')[0]);\n        }\n}\n\nexport function test(){\n\tvar ed=new MonacoEditor();\n\t var hh=monaco.languages.typescript.typescriptDefaults;\n\t \n\tdebugger;\n\t//@ts-ignore\n\tvar editor = monaco.editor.create(ed.dom, {\n\t\t\t\t\tvalue: ['class A{b:B;};\\nclass B{a:A;};\\nfunction x() {', '\\tconsole.log(\"Hello world!\");', '}'].join('\\n'),\n\t\t\t\t\tlanguage: 'typescript'\n\t\t\t\t});\n\t\t\t\n\n\n\treturn ed;\n\n}"]}