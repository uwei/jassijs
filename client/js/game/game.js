define(["require", "exports", "game/citydialog", "game/world", "game/airplanedialog", "game/icons", "game/product", "game/diagramdialog", "game/savedialog"], function (require, exports, citydialog_1, world_1, airplanedialog_1, icons_1, product_1, diagramdialog_1, savedialog_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.test = exports.Game = exports.Parameter = void 0;
    window.onbeforeunload = function () {
        return "Do you want to exit?";
    };
    class Statistic {
        constructor() {
            this.today = {};
            this.yesterday = {};
        }
    }
    class Parameter {
        constructor() {
            this.ratePurchase = 1.125;
            this.rateSelling = 1.25;
            this.ratePriceMin = 0.66;
            this.ratePriceMax = 1.33;
            this.rateBuyAirplane = 1;
            this.rateBuyBuilding = 1;
            this.rateBuyBuildingGrowFactor = 5000;
            this.rateCostsAirplaine = 1;
            this.rateCostShop = 100;
            this.rateCostsShopMany = 1000;
            this.workerInCompany = 20;
            this.neutralStartPeople = 200;
            this.neutralProductionRate = 2;
            this.newAirportRate = 1.05;
            this.capacityShop = 5000;
            this.daysBuildBuilding = 4;
            this.costsAdvertising = 2000;
            this.numberBuildWithContextMenu = 10;
            this.allAirplaneTypes = [
                { typeid: 0, model: "Airplane A", speed: 200, capacity: 200, costs: 60, buildDays: 20, buildingCosts: 20000, buildingMaterial: [0, 0, 0, 10, 0, 10, 0, 10, 0, 10, 0, 0, 0, 0, 10] },
                { typeid: 1, model: "Airplane B", speed: 210, capacity: 300, costs: 90, buildDays: 25, buildingCosts: 40000, buildingMaterial: [0, 0, 0, 20, 0, 20, 0, 20, 0, 20, 0, 0, 0, 0, 20] },
                { typeid: 2, model: "Airplane C", speed: 220, capacity: 400, costs: 150, buildDays: 35, buildingCosts: 60000, buildingMaterial: [0, 0, 0, 30, 0, 30, 0, 30, 0, 30, 0, 0, 0, 0, 30] },
                { typeid: 3, model: "Airplane D", speed: 240, capacity: 700, costs: 180, buildDays: 40, buildingCosts: 80000, buildingMaterial: [0, 0, 0, 40, 0, 40, 0, 40, 0, 40, 0, 0, 0, 0, 40] },
                { typeid: 4, model: "Airplane E", speed: 260, capacity: 1500, costs: 270, buildDays: 50, buildingCosts: 200000, buildingMaterial: [0, 0, 0, 50, 0, 50, 0, 50, 0, 50, 0, 0, 0, 0, 50] },
                { typeid: 5, model: "Airplane F", speed: 300, capacity: 3000, costs: 700, buildDays: 80, buildingCosts: 350000, buildingMaterial: [0, 0, 0, 100, 0, 100, 0, 100, 0, 100, 0, 0, 0, 0, 100] },
            ];
        }
    }
    exports.Parameter = Parameter;
    window.parameter = new Parameter();
    globalThis.parameter = new Parameter();
    parameter.allProducts = [
        new product_1.Product({ id: 0, name: "Stein", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 5 }),
        new product_1.Product({ id: 1, name: "Holz", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 4.5 }),
        new product_1.Product({ id: 2, name: "Getreide", dailyProduce: 7, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 23, distribution: 3, amountForPeople: 4 }),
        new product_1.Product({ id: 3, name: "Eisen", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 3 }),
        new product_1.Product({ id: 4, name: "Wolle", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 2.5 }),
        new product_1.Product({ id: 5, name: "Öl", dailyProduce: 5, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 32, distribution: 3, amountForPeople: 3 }),
        new product_1.Product({ id: 6, name: "Brot", dailyProduce: 6, input1: 2, input1Amount: 2, input2: undefined, input2Amount: 0, priceProduction: 49, distribution: 2, amountForPeople: 5 }),
        new product_1.Product({ id: 7, name: "Plaste", dailyProduce: 6, input1: 5, input1Amount: 2, input2: undefined, input2Amount: 0, priceProduction: 57, distribution: 2, amountForPeople: 5 }),
        new product_1.Product({ id: 8, name: "Fleisch", dailyProduce: 2, input1: 2, input1Amount: 1, input2: undefined, input2Amount: 0, priceProduction: 109, distribution: 2, amountForPeople: 2 }),
        new product_1.Product({ id: 9, name: "Möbel", dailyProduce: 2, input1: 1, input1Amount: 0.5, input2: 3, input2Amount: 1, priceProduction: 117, distribution: 2, amountForPeople: 2 }),
        new product_1.Product({ id: 10, name: "Kleidung", dailyProduce: 1, input1: 4, input1Amount: 2, input2: undefined, input2Amount: 0, priceProduction: 286, distribution: 2, amountForPeople: 1 }),
        new product_1.Product({ id: 11, name: "Fisch", dailyProduce: 3, input1: undefined, input1Amount: undefined, input2: undefined, input2Amount: 0, priceProduction: 60, distribution: 2, amountForPeople: 2 }),
        new product_1.Product({ id: 12, name: "Apfel", dailyProduce: 4, input1: undefined, input1Amount: undefined, input2: undefined, input2Amount: 0, priceProduction: 45, distribution: 2, amountForPeople: 3 }),
        new product_1.Product({ id: 13, name: "Saft", dailyProduce: 3, input1: 12, input1Amount: 1, input2: undefined, input2Amount: 0, priceProduction: 85, distribution: 8, amountForPeople: 3 }),
        new product_1.Product({ id: 14, name: "Gold", dailyProduce: 2, input1: undefined, input1Amount: 0, input2: undefined, input2Amount: 0, priceProduction: 100, distribution: 1, amountForPeople: 1 }),
        new product_1.Product({ id: 15, name: "Schmuck", dailyProduce: 2, input1: 14, input1Amount: 1, input2: undefined, input2Amount: 0, priceProduction: 184, distribution: 1, amountForPeople: 2 }),
        new product_1.Product({ id: 16, name: "Spielzeug", dailyProduce: 1, input1: 4, input1Amount: 0.5, input2: 7, input2Amount: 0.5, priceProduction: 274, distribution: 1, amountForPeople: 1 }),
        new product_1.Product({ id: 17, name: "Fahrrad", dailyProduce: 1, input1: 3, input1Amount: 1, input2: 7, input2Amount: 0.5, priceProduction: 274, distribution: 1, amountForPeople: 1 }),
        new product_1.Product({ id: 18, name: "Fischbrot", dailyProduce: 1, input1: 11, input1Amount: 1, input2: 6, input2Amount: 1, priceProduction: 382, distribution: 1, amountForPeople: 1 })
    ];
    //global.parameter=new Parametetr();
    class Game {
        constructor() {
            this.parameter = parameter;
            this.speed = 1;
            this.mapWidth = 1000;
            this.mapHeight = 600;
            this.statistic = new Statistic();
            var _this = this;
            Game.instance = this;
            this.lastUpdate = Date.now();
            this.date = new Date("Sat Jan 01 2000 00:00:00");
            citydialog_1.CityDialog.instance = undefined;
            this.nevercallthisfunction();
        }
        updateTitle() {
            try {
                document.getElementById("gamemoney").innerHTML = new Number(this.getMoney()).toLocaleString();
                document.getElementById("gamedate").innerHTML = this.date.toLocaleDateString();
                this.world.update();
            }
            catch (_a) {
                console.log("stop game");
                return;
            }
        }
        updateSize() {
            this.domWorld.style.width = (this.mapWidth + 80) + "px";
            this.domWorld.style.height = (this.mapHeight + 100) + "px";
            this.domWorld.parentNode.style.width = (this.mapWidth + 80) + "px";
            this.domWorld.parentNode.style.height = (this.mapHeight + 100) + "px";
        }
        //never call this outside the timer - then would be 2 updates
        nevercallthisfunction() {
            //var t=new Date().getTime();
            var intervall = 1000 / this.speed;
            var _this = this;
            var diff = 1000 * 60 * 60; //update always at full clock//((Date.now() - this.lastUpdate)) * 60 * 60 * this.speed;
            this.date = new Date(this.date.getTime() + diff);
            this.updateTitle();
            this.lastUpdate = Date.now();
            this.timer = setTimeout(() => {
                _this.nevercallthisfunction();
            }, intervall);
            //console.log("tooks"+(new Date().getTime()-t));
            citydialog_1.CityDialog.getInstance().update();
            airplanedialog_1.AirplaneDialog.getInstance().update();
        }
        newGame() {
            this.world = new world_1.World();
            this.world.game = this;
            this._money = 20000;
            this.world.newGame();
        }
        getMoney() {
            return this._money;
        }
        changeMoney(change, why, city = undefined) {
            this._money += change;
            if (this.statistic.today[why] === undefined)
                this.statistic.today[why] = 0;
            this.statistic.today[why] += change;
            //  console.log(change+" "+why);
        }
        render(dom) {
            var _this = this;
            dom.innerHTML = "";
            dom.style.backgroundColor = "lightblue";
            this.dom = dom;
            var sdomHeader = `
          <div style="height:15px;position:fixed;z-index:10000;background-color:lightblue;">
            Traffics- 
            <button id="game-slower"  class="mybutton">` + icons_1.Icons.minus + `</button> 
            <span id="gamedate"></span>   
            <button id="game-faster"  class="mybutton">` + icons_1.Icons.plus + `</button> 
            Money:<span id="gamemoney"></span>` + icons_1.Icons.money + `
            <button id="save-game"  class="mybutton">` + icons_1.Icons.save + `</button> 
            <button id="show-diagram"  class="mybutton">` + icons_1.Icons.diagram + `</button> 
          </div>  
        `;
            this.domHeader = document.createRange().createContextualFragment(sdomHeader).children[0];
            var sdomWorld = `
          <div id="world" style="position:absolute;top:20px;">
          </div>  
        `;
            this.domWorld = document.createRange().createContextualFragment(sdomWorld).children[0];
            this.dom.appendChild(this.domHeader);
            // var headerPlaceeholder = <any>document.createRange().createContextualFragment('<div style="height:15px"></div>').children[0]
            // this.dom.appendChild(headerPlaceeholder);
            this.dom.appendChild(this.domWorld);
            this.world.render(this.domWorld);
            this.updateSize();
            setTimeout(() => {
                _this.bindActions();
            }, 500);
        }
        bindActions() {
            var _this = this;
            document.getElementById("gamedate").addEventListener("mousedown", () => {
                console.log("down");
            });
            document.getElementById("save-game").addEventListener("click", () => {
                savedialog_1.SaveDialog.getInstance().game = this;
                savedialog_1.SaveDialog.getInstance().show();
            });
            /*   document.getElementById("debug-game").addEventListener("click", () => {
                 for (var x = 0; x < parameter.allProducts.length; x++) {
                   _this.world.cities[0].shop[x] = 5000;
                 }
                 _this._money = 1000000;
               });*/
            document.getElementById("show-diagram").addEventListener("click", () => {
                diagramdialog_1.DiagramDialog.getInstance().world = this.world;
                diagramdialog_1.DiagramDialog.getInstance().show();
            });
            document.getElementById("game-slower").addEventListener("click", () => {
                if (_this.speed === Game.temposcale[0]) {
                    _this.pause();
                    console.log("pause");
                    return;
                }
                var pos = Game.temposcale.indexOf(_this.speed);
                pos--;
                if (pos == -1)
                    return;
                _this.speed = Game.temposcale[pos];
                _this.pause();
                _this.resume();
            });
            document.getElementById("game-faster").addEventListener("click", () => {
                if (_this.isPaused()) {
                    _this.resume();
                    return;
                }
                var pos = Game.temposcale.indexOf(_this.speed);
                pos++;
                if (pos >= Game.temposcale.length) {
                    console.log("max");
                    return;
                }
                _this.speed = Game.temposcale[pos];
                _this.pause();
                _this.resume();
            });
        }
        resume() {
            if (this.timer === 0)
                this.nevercallthisfunction();
        }
        isPaused() {
            return this.timer === 0;
        }
        pause() {
            clearTimeout(this.timer);
            this.timer = 0;
        }
        destroy() {
            this.world.destroy();
            clearTimeout(this.timer);
        }
    }
    exports.Game = Game;
    Game.temposcale = [0.01, 0.5, 1, 2, 4, 8, 16, 32, 64, 128];
    function test() {
    }
    exports.test = test;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dhbWUvZ2FtZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0lBY0EsTUFBTSxDQUFDLGNBQWMsR0FBRztRQUN0QixPQUFPLHNCQUFzQixDQUFDO0lBRWhDLENBQUMsQ0FBQztJQUNGLE1BQU0sU0FBUztRQUFmO1lBQ0UsVUFBSyxHQUE4QixFQUFFLENBQUM7WUFDdEMsY0FBUyxHQUE4QixFQUFFLENBQUM7UUFDNUMsQ0FBQztLQUFBO0lBTUQsTUFBYSxTQUFTO1FBQXRCO1lBQ0UsaUJBQVksR0FBRyxLQUFLLENBQUM7WUFDckIsZ0JBQVcsR0FBRyxJQUFJLENBQUM7WUFDbkIsaUJBQVksR0FBRyxJQUFJLENBQUM7WUFDcEIsaUJBQVksR0FBRyxJQUFJLENBQUM7WUFDcEIsb0JBQWUsR0FBRyxDQUFDLENBQUM7WUFDcEIsb0JBQWUsR0FBRyxDQUFDLENBQUM7WUFDcEIsOEJBQXlCLEdBQUcsSUFBSSxDQUFDO1lBQ2pDLHVCQUFrQixHQUFHLENBQUMsQ0FBQztZQUN2QixpQkFBWSxHQUFHLEdBQUcsQ0FBQztZQUNuQixzQkFBaUIsR0FBRyxJQUFJLENBQUM7WUFDekIsb0JBQWUsR0FBRyxFQUFFLENBQUM7WUFDckIsdUJBQWtCLEdBQUcsR0FBRyxDQUFDO1lBQ3pCLDBCQUFxQixHQUFHLENBQUMsQ0FBQztZQUMxQixtQkFBYyxHQUFDLElBQUksQ0FBQztZQUNwQixpQkFBWSxHQUFDLElBQUksQ0FBQztZQUVsQixzQkFBaUIsR0FBQyxDQUFDLENBQUM7WUFDcEIscUJBQWdCLEdBQUMsSUFBSSxDQUFDO1lBQ3RCLCtCQUEwQixHQUFDLEVBQUUsQ0FBQztZQUM5QixxQkFBZ0IsR0FBQztnQkFDZixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUNySixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUNySixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUN0SixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxHQUFHLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUN0SixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxNQUFNLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxFQUFDO2dCQUN4SixFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxJQUFJLEVBQUUsS0FBSyxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsRUFBRSxFQUFDLGFBQWEsRUFBQyxNQUFNLEVBQUMsZ0JBQWdCLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLEdBQUcsQ0FBQyxFQUFDO2FBQzVKLENBQUM7UUFDTixDQUFDO0tBQUE7SUE1QkQsOEJBNEJDO0lBQ0QsTUFBTSxDQUFDLFNBQVMsR0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDO0lBQ2pDLFVBQVUsQ0FBQyxTQUFTLEdBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQztJQUdyQyxTQUFTLENBQUMsV0FBVyxHQUFFO1FBQ3JCLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEVBQUUsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUUsQ0FBQztRQUN4TCxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFHLGVBQWUsRUFBRSxFQUFFLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUMsR0FBRyxFQUFFLENBQUM7UUFDMUwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUUsRUFBRSxFQUFDLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQzFMLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUcsQ0FBQztRQUN4TCxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFHLGVBQWUsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBQyxlQUFlLEVBQUMsR0FBRyxFQUFHLENBQUM7UUFDMUwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUMsRUFBRSxFQUFHLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQ3JMLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUcsQ0FBQztRQUM5SyxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBRSxFQUFFLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUMsQ0FBQyxFQUFFLENBQUM7UUFDakwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQ25MLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEdBQUcsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBQyxDQUFDLEVBQUcsQ0FBQztRQUM1SyxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFHLGVBQWUsRUFBRSxHQUFHLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBQyxlQUFlLEVBQUMsQ0FBQyxFQUFHLENBQUM7UUFDdEwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUUsRUFBRSxFQUFDLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFDLENBQUMsRUFBRyxDQUFDO1FBQy9MLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUMsZUFBZSxFQUFFLEVBQUUsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBQyxDQUFDLEVBQUUsQ0FBQztRQUNoTSxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFDLGVBQWUsRUFBRSxFQUFFLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxlQUFlLEVBQUMsQ0FBQyxFQUFFLENBQUM7UUFDaEwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRyxlQUFlLEVBQUUsR0FBRyxFQUFHLFlBQVksRUFBRSxDQUFDLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBQyxDQUFDO1FBQzFMLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBQyxDQUFDLEVBQUUsQ0FBQztRQUNyTCxJQUFJLGlCQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFHLGVBQWUsRUFBRSxHQUFHLEVBQUcsWUFBWSxFQUFFLENBQUMsRUFBQyxlQUFlLEVBQUMsQ0FBQyxFQUFHLENBQUM7UUFDbkwsSUFBSSxpQkFBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLEdBQUcsRUFBRyxlQUFlLEVBQUUsR0FBRyxFQUFHLFlBQVksRUFBRSxDQUFDLEVBQUUsZUFBZSxFQUFDLENBQUMsRUFBRSxDQUFDO1FBQy9LLElBQUksaUJBQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUcsZUFBZSxFQUFFLEdBQUcsRUFBRyxZQUFZLEVBQUUsQ0FBQyxFQUFFLGVBQWUsRUFBQyxDQUFDLEVBQUUsQ0FBQztLQUNqTCxDQUFDO0lBQ0Ysb0NBQW9DO0lBQ3BDLE1BQWEsSUFBSTtRQWtCZjtZQWpCQSxjQUFTLEdBQUMsU0FBUyxDQUFDO1lBVXBCLFVBQUssR0FBVyxDQUFDLENBQUM7WUFHbEIsYUFBUSxHQUFHLElBQUksQ0FBQztZQUNoQixjQUFTLEdBQUcsR0FBRyxDQUFDO1lBQ2hCLGNBQVMsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO1lBRzFCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztZQUNqQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUVyQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUM7WUFDakQsdUJBQVUsQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1lBQ2hDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBQy9CLENBQUM7UUFDTSxXQUFXO1lBQ2hCLElBQUk7Z0JBQ0YsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQzlGLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztnQkFDL0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQzthQUNyQjtZQUFDLFdBQU07Z0JBQ04sT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDekIsT0FBTzthQUNSO1FBQ0gsQ0FBQztRQUNELFVBQVU7WUFDUixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUN4RCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUM3QyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVcsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7WUFDcEUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBRXZGLENBQUM7UUFDRCw2REFBNkQ7UUFDckQscUJBQXFCO1lBQzNCLDZCQUE2QjtZQUM3QixJQUFJLFNBQVMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUNsQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDakIsSUFBSSxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQSx1RkFBdUY7WUFDakgsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNuQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxHQUFHLEVBQUU7Z0JBQzNCLEtBQUssQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1lBRWhDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNkLGdEQUFnRDtZQUNoRCx1QkFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2xDLCtCQUFjLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFeEMsQ0FBQztRQUNELE9BQU87WUFDTCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksYUFBSyxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdkIsQ0FBQztRQUNELFFBQVE7WUFDTixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDckIsQ0FBQztRQUNELFdBQVcsQ0FBQyxNQUFjLEVBQUUsR0FBVyxFQUFFLE9BQWEsU0FBUztZQUM3RCxJQUFJLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQztZQUN0QixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFNBQVM7Z0JBQ3pDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNoQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUM7WUFDcEMsZ0NBQWdDO1FBQ2xDLENBQUM7UUFDRCxNQUFNLENBQUMsR0FBZ0I7WUFDckIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO1lBQ2pCLEdBQUcsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBQ25CLEdBQUcsQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLFdBQVcsQ0FBQztZQUN4QyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUNmLElBQUksVUFBVSxHQUFHOzs7d0RBR21DLEdBQUUsYUFBSyxDQUFDLEtBQUssR0FBRzs7d0RBRWhCLEdBQUUsYUFBSyxDQUFDLElBQUksR0FBRzsrQ0FDeEIsR0FBRSxhQUFLLENBQUMsS0FBSyxHQUFHO3NEQUNULEdBQUUsYUFBSyxDQUFDLElBQUksR0FBRzt5REFDWixHQUFFLGFBQUssQ0FBQyxPQUFPLEdBQUc7O1NBRWxFLENBQUM7WUFDTixJQUFJLENBQUMsU0FBUyxHQUFRLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFOUYsSUFBSSxTQUFTLEdBQUc7OztTQUdYLENBQUM7WUFFTixJQUFJLENBQUMsUUFBUSxHQUFRLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3JDLCtIQUErSDtZQUMvSCw0Q0FBNEM7WUFDNUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFFbEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDdEIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsQ0FBQztRQUNELFdBQVc7WUFDVCxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDakIsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFO2dCQUNyRSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RCLENBQUMsQ0FBQyxDQUFDO1lBQ0gsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO2dCQUNsRSx1QkFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksR0FBQyxJQUFJLENBQUM7Z0JBQ25DLHVCQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDbEMsQ0FBQyxDQUFDLENBQUM7WUFFTjs7Ozs7b0JBS1E7WUFDTCxRQUFRLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7Z0JBQ3JFLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQy9DLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDckMsQ0FBQyxDQUFDLENBQUM7WUFDSCxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7Z0JBQ3BFLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFO29CQUN0QyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDckIsT0FBTztpQkFDUjtnQkFDRCxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQy9DLEdBQUcsRUFBRSxDQUFDO2dCQUNOLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQztvQkFDWCxPQUFPO2dCQUNULEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDbkMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNkLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNqQixDQUFDLENBQUMsQ0FBQztZQUNILFFBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtnQkFDcEUsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLEVBQUU7b0JBQ3BCLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztvQkFDZixPQUFPO2lCQUNSO2dCQUNELElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDL0MsR0FBRyxFQUFFLENBQUM7Z0JBQ04sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7b0JBQ2pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ25CLE9BQU87aUJBQ1I7Z0JBQ0QsS0FBSyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2QsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2pCLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztRQUVELE1BQU07WUFDSixJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssQ0FBQztnQkFDbEIsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDakMsQ0FBQztRQUNELFFBQVE7WUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBQzFCLENBQUM7UUFDRCxLQUFLO1lBQ0gsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNqQixDQUFDO1FBRUQsT0FBTztZQUNMLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDckIsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixDQUFDOztJQW5MSCxvQkFvTEM7SUFuS1EsZUFBVSxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFxSzlELFNBQWdCLElBQUk7SUFFcEIsQ0FBQztJQUZELG9CQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2l0eURpYWxvZyB9IGZyb20gXCJnYW1lL2NpdHlkaWFsb2dcIjtcclxuaW1wb3J0IHsgV29ybGQgfSBmcm9tIFwiZ2FtZS93b3JsZFwiO1xyXG5pbXBvcnQgeyBQYW5lbCB9IGZyb20gXCJqYXNzaWpzL3VpL1BhbmVsXCI7XHJcbmltcG9ydCB3aW5kb3dzIGZyb20gXCJqYXNzaWpzL2Jhc2UvV2luZG93c1wiO1xyXG5pbXBvcnQgeyBBaXJwbGFuZURpYWxvZyB9IGZyb20gXCJnYW1lL2FpcnBsYW5lZGlhbG9nXCI7XHJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcImdhbWUvaWNvbnNcIjtcclxuaW1wb3J0IHsgQ29tcGFueSB9IGZyb20gXCJnYW1lL2NvbXBhbnlcIjtcclxuaW1wb3J0IHsgQWlycGxhbmUgfSBmcm9tIFwiZ2FtZS9haXJwbGFuZVwiO1xyXG5pbXBvcnQgeyBDaXR5IH0gZnJvbSBcImdhbWUvY2l0eVwiO1xyXG5pbXBvcnQgeyBSb3V0ZSB9IGZyb20gXCJnYW1lL3JvdXRlXCI7XHJcbmltcG9ydCB7ICBQcm9kdWN0IH0gZnJvbSBcImdhbWUvcHJvZHVjdFwiO1xyXG5pbXBvcnQgeyBEaWFncmFtRGlhbG9nIH0gZnJvbSBcImdhbWUvZGlhZ3JhbWRpYWxvZ1wiO1xyXG5pbXBvcnQgeyBTYXZlRGlhbG9nIH0gZnJvbSBcImdhbWUvc2F2ZWRpYWxvZ1wiO1xyXG5cclxud2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBcIkRvIHlvdSB3YW50IHRvIGV4aXQ/XCI7XHJcblxyXG59O1xyXG5jbGFzcyBTdGF0aXN0aWMge1xyXG4gIHRvZGF5OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbiAgeWVzdGVyZGF5OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbn1cclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICB2YXIgcGFyYW1ldGVyOlBhcmFtZXRlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFtZXRlciB7XHJcbiAgcmF0ZVB1cmNoYXNlID0gMS4xMjU7XHJcbiAgcmF0ZVNlbGxpbmcgPSAxLjI1O1xyXG4gIHJhdGVQcmljZU1pbiA9IDAuNjY7XHJcbiAgcmF0ZVByaWNlTWF4ID0gMS4zMztcclxuICByYXRlQnV5QWlycGxhbmUgPSAxO1xyXG4gIHJhdGVCdXlCdWlsZGluZyA9IDE7XHJcbiAgcmF0ZUJ1eUJ1aWxkaW5nR3Jvd0ZhY3RvciA9IDUwMDA7XHJcbiAgcmF0ZUNvc3RzQWlycGxhaW5lID0gMTtcclxuICByYXRlQ29zdFNob3AgPSAxMDA7XHJcbiAgcmF0ZUNvc3RzU2hvcE1hbnkgPSAxMDAwO1xyXG4gIHdvcmtlckluQ29tcGFueSA9IDIwO1xyXG4gIG5ldXRyYWxTdGFydFBlb3BsZSA9IDIwMDtcclxuICBuZXV0cmFsUHJvZHVjdGlvblJhdGUgPSAyO1xyXG4gIG5ld0FpcnBvcnRSYXRlPTEuMDU7XHJcbiAgY2FwYWNpdHlTaG9wPTUwMDA7XHJcbiAgYWxsUHJvZHVjdHM6UHJvZHVjdFtdO1xyXG4gIGRheXNCdWlsZEJ1aWxkaW5nPTQ7XHJcbiAgY29zdHNBZHZlcnRpc2luZz0yMDAwO1xyXG4gIG51bWJlckJ1aWxkV2l0aENvbnRleHRNZW51PTEwO1xyXG4gIGFsbEFpcnBsYW5lVHlwZXM9W1xyXG4gICAge3R5cGVpZDowLG1vZGVsOlwiQWlycGxhbmUgQVwiLHNwZWVkOjIwMCxjYXBhY2l0eToyMDAsIGNvc3RzOjYwLGJ1aWxkRGF5czoyMCxidWlsZGluZ0Nvc3RzOjIwMDAwLGJ1aWxkaW5nTWF0ZXJpYWw6WzAsMCwwLDEwLDAsMTAsMCwxMCwwLDEwLDAsMCwwLDAsMTBdfSxcclxuICAgIHt0eXBlaWQ6MSxtb2RlbDpcIkFpcnBsYW5lIEJcIixzcGVlZDoyMTAsY2FwYWNpdHk6MzAwLCBjb3N0czo5MCxidWlsZERheXM6MjUsYnVpbGRpbmdDb3N0czo0MDAwMCxidWlsZGluZ01hdGVyaWFsOlswLDAsMCwyMCwwLDIwLDAsMjAsMCwyMCwwLDAsMCwwLDIwXX0sXHJcbiAgICB7dHlwZWlkOjIsbW9kZWw6XCJBaXJwbGFuZSBDXCIsc3BlZWQ6MjIwLGNhcGFjaXR5OjQwMCwgY29zdHM6MTUwLGJ1aWxkRGF5czozNSxidWlsZGluZ0Nvc3RzOjYwMDAwLGJ1aWxkaW5nTWF0ZXJpYWw6WzAsMCwwLDMwLDAsMzAsMCwzMCwwLDMwLDAsMCwwLDAsMzBdfSxcclxuICAgIHt0eXBlaWQ6Myxtb2RlbDpcIkFpcnBsYW5lIERcIixzcGVlZDoyNDAsY2FwYWNpdHk6NzAwLCBjb3N0czoxODAsYnVpbGREYXlzOjQwLGJ1aWxkaW5nQ29zdHM6ODAwMDAsYnVpbGRpbmdNYXRlcmlhbDpbMCwwLDAsNDAsMCw0MCwwLDQwLDAsNDAsMCwwLDAsMCw0MF19LFxyXG4gICAge3R5cGVpZDo0LG1vZGVsOlwiQWlycGxhbmUgRVwiLHNwZWVkOjI2MCxjYXBhY2l0eToxNTAwLCBjb3N0czoyNzAsYnVpbGREYXlzOjUwLGJ1aWxkaW5nQ29zdHM6MjAwMDAwLGJ1aWxkaW5nTWF0ZXJpYWw6WzAsMCwwLDUwLDAsNTAsMCw1MCwwLDUwLDAsMCwwLDAsNTBdfSxcclxuICAgIHt0eXBlaWQ6NSxtb2RlbDpcIkFpcnBsYW5lIEZcIixzcGVlZDozMDAsY2FwYWNpdHk6MzAwMCwgY29zdHM6NzAwLGJ1aWxkRGF5czo4MCxidWlsZGluZ0Nvc3RzOjM1MDAwMCxidWlsZGluZ01hdGVyaWFsOlswLDAsMCwxMDAsMCwxMDAsMCwxMDAsMCwxMDAsMCwwLDAsMCwxMDBdfSxcclxuICAgIF07XHJcbn1cclxud2luZG93LnBhcmFtZXRlcj1uZXcgUGFyYW1ldGVyKCk7XHJcbmdsb2JhbFRoaXMucGFyYW1ldGVyPW5ldyBQYXJhbWV0ZXIoKTtcclxuXHJcblxyXG5wYXJhbWV0ZXIuYWxsUHJvZHVjdHM9IFtcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAwLCBuYW1lOiBcIlN0ZWluXCIsIGRhaWx5UHJvZHVjZTogNSwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjogMzIsICBkaXN0cmlidXRpb246IDMsYW1vdW50Rm9yUGVvcGxlOjUgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMSwgbmFtZTogXCJIb2x6XCIsIGRhaWx5UHJvZHVjZTogNSwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjogMzIsICBkaXN0cmlidXRpb246IDMgLGFtb3VudEZvclBlb3BsZTo0LjUgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMiwgbmFtZTogXCJHZXRyZWlkZVwiLCBkYWlseVByb2R1Y2U6IDcsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDIzLGRpc3RyaWJ1dGlvbjogMyxhbW91bnRGb3JQZW9wbGU6NCAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMywgbmFtZTogXCJFaXNlblwiLCBkYWlseVByb2R1Y2U6IDUsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IDAsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDMyLCBkaXN0cmlidXRpb246IDMsYW1vdW50Rm9yUGVvcGxlOjMgIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDQsIG5hbWU6IFwiV29sbGVcIiwgZGFpbHlQcm9kdWNlOiA1LCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCAgcHJpY2VQcm9kdWN0aW9uOiAzMiwgZGlzdHJpYnV0aW9uOiAzLGFtb3VudEZvclBlb3BsZToyLjUgIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDUsIG5hbWU6IFwiw5ZsXCIsIGRhaWx5UHJvZHVjZTogNSwgaW5wdXQxOiB1bmRlZmluZWQsIGlucHV0MUFtb3VudDogMCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgIHByaWNlUHJvZHVjdGlvbjozMiwgIGRpc3RyaWJ1dGlvbjogMyxhbW91bnRGb3JQZW9wbGU6MyAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogNiwgbmFtZTogXCJCcm90XCIsIGRhaWx5UHJvZHVjZTogNiwgaW5wdXQxOiAyLCBpbnB1dDFBbW91bnQ6IDIsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIHByaWNlUHJvZHVjdGlvbjogNDksIGRpc3RyaWJ1dGlvbjogMixhbW91bnRGb3JQZW9wbGU6NSAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogNywgbmFtZTogXCJQbGFzdGVcIiwgZGFpbHlQcm9kdWNlOiA2LCBpbnB1dDE6IDUsIGlucHV0MUFtb3VudDogMiwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCwgcHJpY2VQcm9kdWN0aW9uOiA1NywgIGRpc3RyaWJ1dGlvbjogMiAsYW1vdW50Rm9yUGVvcGxlOjUgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogOCwgbmFtZTogXCJGbGVpc2NoXCIsIGRhaWx5UHJvZHVjZTogMiwgaW5wdXQxOiAyLCBpbnB1dDFBbW91bnQ6IDEsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDEwOSwgZGlzdHJpYnV0aW9uOiAyLGFtb3VudEZvclBlb3BsZToyICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiA5LCBuYW1lOiBcIk3DtmJlbFwiLCBkYWlseVByb2R1Y2U6IDIsIGlucHV0MTogMSwgaW5wdXQxQW1vdW50OiAwLjUsIGlucHV0MjogMywgaW5wdXQyQW1vdW50OiAxLCAgcHJpY2VQcm9kdWN0aW9uOiAxMTcsICBkaXN0cmlidXRpb246IDIsYW1vdW50Rm9yUGVvcGxlOjIgIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDEwLCBuYW1lOiBcIktsZWlkdW5nXCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiA0LCBpbnB1dDFBbW91bnQ6IDIsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsICBwcmljZVByb2R1Y3Rpb246IDI4NiwgIGRpc3RyaWJ1dGlvbjogMixhbW91bnRGb3JQZW9wbGU6MSAgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMTEsIG5hbWU6IFwiRmlzY2hcIiwgZGFpbHlQcm9kdWNlOiAzLCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiB1bmRlZmluZWQsIGlucHV0MjogdW5kZWZpbmVkLCBpbnB1dDJBbW91bnQ6IDAsIHByaWNlUHJvZHVjdGlvbjogNjAsZGlzdHJpYnV0aW9uOiAyLGFtb3VudEZvclBlb3BsZToyICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxMiwgbmFtZTogXCJBcGZlbFwiLCBkYWlseVByb2R1Y2U6IDQsIGlucHV0MTogdW5kZWZpbmVkLCBpbnB1dDFBbW91bnQ6IHVuZGVmaW5lZCwgaW5wdXQyOiB1bmRlZmluZWQsIGlucHV0MkFtb3VudDogMCxwcmljZVByb2R1Y3Rpb246IDQ1LCAgZGlzdHJpYnV0aW9uOiAyICxhbW91bnRGb3JQZW9wbGU6MyB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxMywgbmFtZTogXCJTYWZ0XCIsIGRhaWx5UHJvZHVjZTogMywgaW5wdXQxOiAxMiwgaW5wdXQxQW1vdW50OiAxLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLHByaWNlUHJvZHVjdGlvbjogODUsICBkaXN0cmlidXRpb246IDggLGFtb3VudEZvclBlb3BsZTozIH0pLFxyXG4gIG5ldyBQcm9kdWN0KHsgaWQ6IDE0LCBuYW1lOiBcIkdvbGRcIiwgZGFpbHlQcm9kdWNlOiAyLCBpbnB1dDE6IHVuZGVmaW5lZCwgaW5wdXQxQW1vdW50OiAwLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCAgcHJpY2VQcm9kdWN0aW9uOiAxMDAsICBkaXN0cmlidXRpb246IDEgLGFtb3VudEZvclBlb3BsZTogMX0pLCBcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxNSwgbmFtZTogXCJTY2htdWNrXCIsIGRhaWx5UHJvZHVjZTogMiwgaW5wdXQxOiAxNCwgaW5wdXQxQW1vdW50OiAxLCBpbnB1dDI6IHVuZGVmaW5lZCwgaW5wdXQyQW1vdW50OiAwLCAgcHJpY2VQcm9kdWN0aW9uOiAxODQsIGRpc3RyaWJ1dGlvbjogMSAsYW1vdW50Rm9yUGVvcGxlOjIgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMTYsIG5hbWU6IFwiU3BpZWx6ZXVnXCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiA0LCBpbnB1dDFBbW91bnQ6IDAuNSwgaW5wdXQyOiA3LCBpbnB1dDJBbW91bnQ6IDAuNSwgIHByaWNlUHJvZHVjdGlvbjogMjc0LCAgZGlzdHJpYnV0aW9uOiAxLGFtb3VudEZvclBlb3BsZToxICB9KSxcclxuICBuZXcgUHJvZHVjdCh7IGlkOiAxNywgbmFtZTogXCJGYWhycmFkXCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiAzLCBpbnB1dDFBbW91bnQ6IDEsIGlucHV0MjogNywgaW5wdXQyQW1vdW50OiAwLjUsICBwcmljZVByb2R1Y3Rpb246IDI3NCwgIGRpc3RyaWJ1dGlvbjogMSAsYW1vdW50Rm9yUGVvcGxlOjEgfSksXHJcbiAgbmV3IFByb2R1Y3QoeyBpZDogMTgsIG5hbWU6IFwiRmlzY2hicm90XCIsIGRhaWx5UHJvZHVjZTogMSwgaW5wdXQxOiAxMSwgaW5wdXQxQW1vdW50OiAxLCBpbnB1dDI6IDYsIGlucHV0MkFtb3VudDogMSwgIHByaWNlUHJvZHVjdGlvbjogMzgyLCAgZGlzdHJpYnV0aW9uOiAxICxhbW91bnRGb3JQZW9wbGU6MSB9KVxyXG5dO1xyXG4vL2dsb2JhbC5wYXJhbWV0ZXI9bmV3IFBhcmFtZXRldHIoKTtcclxuZXhwb3J0IGNsYXNzIEdhbWUge1xyXG4gIHBhcmFtZXRlcj1wYXJhbWV0ZXI7XHJcbiAgc3RhdGljIGluc3RhbmNlOiBHYW1lO1xyXG4gIGRvbTogSFRNTEVsZW1lbnQ7XHJcbiAgd29ybGQ6IFdvcmxkO1xyXG4gIGRvbUhlYWRlcjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgZG9tV29ybGQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gIF9tb25leTtcclxuICB2ZXJzaW9uOlwiMS4wXCI7XHJcbiAgZGF0ZTogRGF0ZTtcclxuICBsYXN0VXBkYXRlOiBudW1iZXI7XHJcbiAgc3BlZWQ6IG51bWJlciA9IDE7XHJcbiAgcGF1c2VkU3BlZWQ6IG51bWJlcjtcclxuICB0aW1lcjtcclxuICBtYXBXaWR0aCA9IDEwMDA7XHJcbiAgbWFwSGVpZ2h0ID0gNjAwO1xyXG4gIHN0YXRpc3RpYyA9IG5ldyBTdGF0aXN0aWMoKTtcclxuICBzdGF0aWMgdGVtcG9zY2FsZSA9IFswLjAxLCAwLjUsIDEsIDIsIDQsIDgsIDE2LCAzMiwgNjQsIDEyOF1cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICBHYW1lLmluc3RhbmNlID0gdGhpcztcclxuXHJcbiAgICB0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpO1xyXG4gICAgdGhpcy5kYXRlID0gbmV3IERhdGUoXCJTYXQgSmFuIDAxIDIwMDAgMDA6MDA6MDBcIik7XHJcbiAgICBDaXR5RGlhbG9nLmluc3RhbmNlID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5uZXZlcmNhbGx0aGlzZnVuY3Rpb24oKTtcclxuICB9XHJcbiAgcHVibGljIHVwZGF0ZVRpdGxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lbW9uZXlcIikuaW5uZXJIVE1MID0gbmV3IE51bWJlcih0aGlzLmdldE1vbmV5KCkpLnRvTG9jYWxlU3RyaW5nKCk7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZWRhdGVcIikuaW5uZXJIVE1MID0gdGhpcy5kYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgICB0aGlzLndvcmxkLnVwZGF0ZSgpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwic3RvcCBnYW1lXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG4gIHVwZGF0ZVNpemUoKSB7XHJcbiAgICB0aGlzLmRvbVdvcmxkLnN0eWxlLndpZHRoID0gKHRoaXMubWFwV2lkdGggKyA4MCkgKyBcInB4XCI7XHJcbiAgICB0aGlzLmRvbVdvcmxkLnN0eWxlLmhlaWdodCA9ICh0aGlzLm1hcEhlaWdodCArIDEwMCkgKyBcInB4XCI7XHJcbiAgICAoPEhUTUxFbGVtZW50PnRoaXMuZG9tV29ybGQucGFyZW50Tm9kZSkuc3R5bGUud2lkdGggPSAodGhpcy5tYXBXaWR0aCArIDgwKSArIFwicHhcIjtcclxuICAgICg8SFRNTEVsZW1lbnQ+dGhpcy5kb21Xb3JsZC5wYXJlbnROb2RlKS5zdHlsZS5oZWlnaHQgPSAodGhpcy5tYXBIZWlnaHQgKyAxMDApICsgXCJweFwiO1xyXG5cclxuICB9XHJcbiAgLy9uZXZlciBjYWxsIHRoaXMgb3V0c2lkZSB0aGUgdGltZXIgLSB0aGVuIHdvdWxkIGJlIDIgdXBkYXRlc1xyXG4gIHByaXZhdGUgbmV2ZXJjYWxsdGhpc2Z1bmN0aW9uKCkge1xyXG4gICAgLy92YXIgdD1uZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIHZhciBpbnRlcnZhbGwgPSAxMDAwIC8gdGhpcy5zcGVlZDtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICB2YXIgZGlmZiA9IDEwMDAgKiA2MCAqIDYwOy8vdXBkYXRlIGFsd2F5cyBhdCBmdWxsIGNsb2NrLy8oKERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGUpKSAqIDYwICogNjAgKiB0aGlzLnNwZWVkO1xyXG4gICAgdGhpcy5kYXRlID0gbmV3IERhdGUodGhpcy5kYXRlLmdldFRpbWUoKSArIGRpZmYpO1xyXG4gICAgdGhpcy51cGRhdGVUaXRsZSgpO1xyXG4gICAgdGhpcy5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKTtcclxuICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgX3RoaXMubmV2ZXJjYWxsdGhpc2Z1bmN0aW9uKCk7XHJcblxyXG4gICAgfSwgaW50ZXJ2YWxsKTtcclxuICAgIC8vY29uc29sZS5sb2coXCJ0b29rc1wiKyhuZXcgRGF0ZSgpLmdldFRpbWUoKS10KSk7XHJcbiAgICBDaXR5RGlhbG9nLmdldEluc3RhbmNlKCkudXBkYXRlKCk7XHJcbiAgICBBaXJwbGFuZURpYWxvZy5nZXRJbnN0YW5jZSgpLnVwZGF0ZSgpO1xyXG5cclxuICB9XHJcbiAgbmV3R2FtZSgpIHtcclxuICAgIHRoaXMud29ybGQgPSBuZXcgV29ybGQoKTtcclxuICAgIHRoaXMud29ybGQuZ2FtZSA9IHRoaXM7XHJcbiAgICB0aGlzLl9tb25leSA9IDIwMDAwO1xyXG4gICAgdGhpcy53b3JsZC5uZXdHYW1lKCk7XHJcbiAgfVxyXG4gIGdldE1vbmV5KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21vbmV5O1xyXG4gIH1cclxuICBjaGFuZ2VNb25leShjaGFuZ2U6IG51bWJlciwgd2h5OiBzdHJpbmcsIGNpdHk6IENpdHkgPSB1bmRlZmluZWQpIHtcclxuICAgIHRoaXMuX21vbmV5ICs9IGNoYW5nZTtcclxuICAgIGlmICh0aGlzLnN0YXRpc3RpYy50b2RheVt3aHldID09PSB1bmRlZmluZWQpXHJcbiAgICAgIHRoaXMuc3RhdGlzdGljLnRvZGF5W3doeV0gPSAwO1xyXG4gICAgdGhpcy5zdGF0aXN0aWMudG9kYXlbd2h5XSArPSBjaGFuZ2U7XHJcbiAgICAvLyAgY29uc29sZS5sb2coY2hhbmdlK1wiIFwiK3doeSk7XHJcbiAgfVxyXG4gIHJlbmRlcihkb206IEhUTUxFbGVtZW50KSB7XHJcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgZG9tLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBkb20uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJsaWdodGJsdWVcIjtcclxuICAgIHRoaXMuZG9tID0gZG9tO1xyXG4gICAgdmFyIHNkb21IZWFkZXIgPSBgXHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OjE1cHg7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDAwMDtiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZTtcIj5cclxuICAgICAgICAgICAgVHJhZmZpY3MtIFxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiZ2FtZS1zbG93ZXJcIiAgY2xhc3M9XCJteWJ1dHRvblwiPmArIEljb25zLm1pbnVzICsgYDwvYnV0dG9uPiBcclxuICAgICAgICAgICAgPHNwYW4gaWQ9XCJnYW1lZGF0ZVwiPjwvc3Bhbj4gICBcclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImdhbWUtZmFzdGVyXCIgIGNsYXNzPVwibXlidXR0b25cIj5gKyBJY29ucy5wbHVzICsgYDwvYnV0dG9uPiBcclxuICAgICAgICAgICAgTW9uZXk6PHNwYW4gaWQ9XCJnYW1lbW9uZXlcIj48L3NwYW4+YCsgSWNvbnMubW9uZXkgKyBgXHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJzYXZlLWdhbWVcIiAgY2xhc3M9XCJteWJ1dHRvblwiPmArIEljb25zLnNhdmUgKyBgPC9idXR0b24+IFxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwic2hvdy1kaWFncmFtXCIgIGNsYXNzPVwibXlidXR0b25cIj5gKyBJY29ucy5kaWFncmFtICsgYDwvYnV0dG9uPiBcclxuICAgICAgICAgIDwvZGl2PiAgXHJcbiAgICAgICAgYDtcclxuICAgIHRoaXMuZG9tSGVhZGVyID0gPGFueT5kb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChzZG9tSGVhZGVyKS5jaGlsZHJlblswXTtcclxuXHJcbiAgICB2YXIgc2RvbVdvcmxkID0gYFxyXG4gICAgICAgICAgPGRpdiBpZD1cIndvcmxkXCIgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtcIj5cclxuICAgICAgICAgIDwvZGl2PiAgXHJcbiAgICAgICAgYDtcclxuXHJcbiAgICB0aGlzLmRvbVdvcmxkID0gPGFueT5kb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChzZG9tV29ybGQpLmNoaWxkcmVuWzBdO1xyXG4gICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5kb21IZWFkZXIpO1xyXG4gICAgLy8gdmFyIGhlYWRlclBsYWNlZWhvbGRlciA9IDxhbnk+ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoJzxkaXYgc3R5bGU9XCJoZWlnaHQ6MTVweFwiPjwvZGl2PicpLmNoaWxkcmVuWzBdXHJcbiAgICAvLyB0aGlzLmRvbS5hcHBlbmRDaGlsZChoZWFkZXJQbGFjZWVob2xkZXIpO1xyXG4gICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5kb21Xb3JsZCk7XHJcbiAgICB0aGlzLndvcmxkLnJlbmRlcih0aGlzLmRvbVdvcmxkKTtcclxuICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBfdGhpcy5iaW5kQWN0aW9ucygpO1xyXG4gICAgfSwgNTAwKTtcclxuICB9XHJcbiAgYmluZEFjdGlvbnMoKSB7XHJcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lZGF0ZVwiKS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJkb3duXCIpO1xyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhdmUtZ2FtZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBTYXZlRGlhbG9nLmdldEluc3RhbmNlKCkuZ2FtZT10aGlzO1xyXG4gICAgICBTYXZlRGlhbG9nLmdldEluc3RhbmNlKCkuc2hvdygpO1xyXG4gICAgfSk7XHJcbiAgIFxyXG4gLyogICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnVnLWdhbWVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBwYXJhbWV0ZXIuYWxsUHJvZHVjdHMubGVuZ3RoOyB4KyspIHtcclxuICAgICAgICBfdGhpcy53b3JsZC5jaXRpZXNbMF0uc2hvcFt4XSA9IDUwMDA7XHJcbiAgICAgIH1cclxuICAgICAgX3RoaXMuX21vbmV5ID0gMTAwMDAwMDtcclxuICAgIH0pOyovXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3ctZGlhZ3JhbVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBEaWFncmFtRGlhbG9nLmdldEluc3RhbmNlKCkud29ybGQgPSB0aGlzLndvcmxkO1xyXG4gICAgICBEaWFncmFtRGlhbG9nLmdldEluc3RhbmNlKCkuc2hvdygpO1xyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtc2xvd2VyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmIChfdGhpcy5zcGVlZCA9PT0gR2FtZS50ZW1wb3NjYWxlWzBdKSB7XHJcbiAgICAgICAgX3RoaXMucGF1c2UoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInBhdXNlXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB2YXIgcG9zID0gR2FtZS50ZW1wb3NjYWxlLmluZGV4T2YoX3RoaXMuc3BlZWQpO1xyXG4gICAgICBwb3MtLTtcclxuICAgICAgaWYgKHBvcyA9PSAtMSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIF90aGlzLnNwZWVkID0gR2FtZS50ZW1wb3NjYWxlW3Bvc107XHJcbiAgICAgIF90aGlzLnBhdXNlKCk7XHJcbiAgICAgIF90aGlzLnJlc3VtZSgpO1xyXG4gICAgfSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtZmFzdGVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmIChfdGhpcy5pc1BhdXNlZCgpKSB7XHJcbiAgICAgICAgX3RoaXMucmVzdW1lKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBwb3MgPSBHYW1lLnRlbXBvc2NhbGUuaW5kZXhPZihfdGhpcy5zcGVlZCk7XHJcbiAgICAgIHBvcysrO1xyXG4gICAgICBpZiAocG9zID49IEdhbWUudGVtcG9zY2FsZS5sZW5ndGgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm1heFwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgX3RoaXMuc3BlZWQgPSBHYW1lLnRlbXBvc2NhbGVbcG9zXTtcclxuICAgICAgX3RoaXMucGF1c2UoKTtcclxuICAgICAgX3RoaXMucmVzdW1lKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmVzdW1lKCkge1xyXG4gICAgaWYgKHRoaXMudGltZXIgPT09IDApXHJcbiAgICAgIHRoaXMubmV2ZXJjYWxsdGhpc2Z1bmN0aW9uKCk7XHJcbiAgfVxyXG4gIGlzUGF1c2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudGltZXIgPT09IDA7XHJcbiAgfVxyXG4gIHBhdXNlKCkge1xyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG4gICAgdGhpcy50aW1lciA9IDA7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgdGhpcy53b3JsZC5kZXN0cm95KCk7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdGVzdCgpIHtcclxuXHJcbn1cclxuIl19