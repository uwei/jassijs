<<<<<<< HEAD
{"version":3,"file":"jassijs_report-server.js","sourceRoot":"","sources":["../jassijs_report/registry.js","../jassijs_report/remote/pdfmakejassi.ts","../jassijs_report/remote/ServerReport.ts","../jassijs_report/server/DoServerreport.ts","../jassijs_report/server/TestServerreport.ts","../jassijs_report/modul.ts"],"names":[],"mappings":"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","sourcesContent":["//this file is autogenerated don't modify\ndefine(\"jassijs_report/registry\",[\"require\"], function(require) {\n return {\n  default: {\n\t\"jassijs_report/remote/pdfmakejassi.ts\": {\n\t\t\"date\": 1634336644000\n\t},\n\t\"jassijs_report/remote/ServerReport.ts\": {\n\t\t\"date\": 1750088189565.3828,\n\t\t\"jassijs_report.remote.ServerReport\": {\n\t\t\t\"@members\": {\n\t\t\t\t\"getDesign\": {\n\t\t\t\t\t\"ValidateFunctionParameter\": []\n\t\t\t\t},\n\t\t\t\t\"getBase64\": {\n\t\t\t\t\t\"ValidateFunctionParameter\": []\n\t\t\t\t},\n\t\t\t\t\"getBase64FromFile\": {\n\t\t\t\t\t\"UseServer\": []\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"jassijs_report/server/DoServerreport.ts\": {\n\t\t\"date\": 1684441098000\n\t},\n\t\"jassijs_report/server/TestServerreport.ts\": {\n\t\t\"date\": 1684501452000\n\t}\n}\n }\n});","//templating is slow so we chache\r\nvar funccache: any = {};\r\n//https://github.com/Mottie/javascript-number-formatter/blob/master/src/format.js\r\n//license https://github.com/Mottie/javascript-number-formatter/blob/master/LICENSE\r\nconst maskRegex = /[0-9\\-+#]/;\r\nconst notMaskRegex = /[^\\d\\-+#]/g;\r\n\r\nfunction getIndex(mask) {\r\n\treturn mask.search(maskRegex);\r\n}\r\n\r\nfunction processMask(mask = \"#.##\") {\r\n\tconst maskObj: any = {};\r\n\tconst len = mask.length;\r\n\tconst start = getIndex(mask);\r\n\tmaskObj.prefix = start > 0 ? mask.substring(0, start) : \"\";\r\n\r\n\t// Reverse string: not an ideal method if there are surrogate pairs\r\n\tconst end = getIndex(mask.split(\"\").reverse().join(\"\"));\r\n\tconst offset = len - end;\r\n\tconst substr = mask.substring(offset, offset + 1);\r\n\t// Add 1 to offset if mask has a trailing decimal/comma\r\n\tconst indx = offset + ((substr === \".\" || (substr === \",\")) ? 1 : 0);\r\n\tmaskObj.suffix = end > 0 ? mask.substring(indx, len) : \"\";\r\n\r\n\tmaskObj.mask = mask.substring(start, indx);\r\n\tmaskObj.maskHasNegativeSign = maskObj.mask.charAt(0) === \"-\";\r\n\tmaskObj.maskHasPositiveSign = maskObj.mask.charAt(0) === \"+\";\r\n\r\n\t// Search for group separator & decimal; anything not digit,\r\n\t// not +/- sign, and not #\r\n\tlet result = maskObj.mask.match(notMaskRegex);\r\n\t// Treat the right most symbol as decimal\r\n\tmaskObj.decimal = (result && result[result.length - 1]) || \".\";\r\n\t// Treat the left most symbol as group separator\r\n\tmaskObj.separator = (result && result[1] && result[0]) || \",\";\r\n\r\n\t// Split the decimal for the format string if any\r\n\tresult = maskObj.mask.split(maskObj.decimal);\r\n\tmaskObj.integer = result[0];\r\n\tmaskObj.fraction = result[1];\r\n\treturn maskObj;\r\n}\r\n\r\nfunction processValue(value, maskObj, options) {\r\n\tlet isNegative = false;\r\n\tconst valObj: any = {\r\n\t\tvalue\r\n\t};\r\n\tif (value < 0) {\r\n\t\tisNegative = true;\r\n\t\t// Process only abs(), and turn on flag.\r\n\t\tvalObj.value = -valObj.value;\r\n\t}\r\n\r\n\tvalObj.sign = isNegative ? \"-\" : \"\";\r\n\r\n\t// Fix the decimal first, toFixed will auto fill trailing zero.\r\n\tvalObj.value = Number(valObj.value).toFixed(maskObj.fraction && maskObj.fraction.length);\r\n\t// Convert number to string to trim off *all* trailing decimal zero(es)\r\n\tvalObj.value = Number(valObj.value).toString();\r\n\r\n\t// Fill back any trailing zero according to format\r\n\t// look for last zero in format\r\n\tconst posTrailZero = maskObj.fraction && maskObj.fraction.lastIndexOf(\"0\");\r\n\tlet [valInteger = \"0\", valFraction = \"\"] = valObj.value.split(\".\");\r\n\tif (!valFraction || (valFraction && valFraction.length <= posTrailZero)) {\r\n\t\tvalFraction = posTrailZero < 0\r\n\t\t\t? \"\"\r\n\t\t\t: (Number(\"0.\" + valFraction).toFixed(posTrailZero + 1)).replace(\"0.\", \"\");\r\n\t}\r\n\r\n\tvalObj.integer = valInteger;\r\n\tvalObj.fraction = valFraction;\r\n\taddSeparators(valObj, maskObj);\r\n\r\n\t// Remove negative sign if result is zero\r\n\tif (valObj.result === \"0\" || valObj.result === \"\") {\r\n\t\t// Remove negative sign if result is zero\r\n\t\tisNegative = false;\r\n\t\tvalObj.sign = \"\";\r\n\t}\r\n\r\n\tif (!isNegative && maskObj.maskHasPositiveSign) {\r\n\t\tvalObj.sign = \"+\";\r\n\t} else if (isNegative && maskObj.maskHasPositiveSign) {\r\n\t\tvalObj.sign = \"-\";\r\n\t} else if (isNegative) {\r\n\t\tvalObj.sign = options && options.enforceMaskSign && !maskObj.maskHasNegativeSign\r\n\t\t\t? \"\"\r\n\t\t\t: \"-\";\r\n\t}\r\n\r\n\treturn valObj;\r\n}\r\n\r\nfunction addSeparators(valObj, maskObj) {\r\n\tvalObj.result = \"\";\r\n\t// Look for separator\r\n\tconst szSep = maskObj.integer.split(maskObj.separator);\r\n\t// Join back without separator for counting the pos of any leading 0\r\n\tconst maskInteger = szSep.join(\"\");\r\n\r\n\tconst posLeadZero = maskInteger && maskInteger.indexOf(\"0\");\r\n\tif (posLeadZero > -1) {\r\n\t\twhile (valObj.integer.length < (maskInteger.length - posLeadZero)) {\r\n\t\t\tvalObj.integer = \"0\" + valObj.integer;\r\n\t\t}\r\n\t} else if (Number(valObj.integer) === 0) {\r\n\t\tvalObj.integer = \"\";\r\n\t}\r\n\r\n\t// Process the first group separator from decimal (.) only, the rest ignore.\r\n\t// get the length of the last slice of split result.\r\n\tconst posSeparator = (szSep[1] && szSep[szSep.length - 1].length);\r\n\tif (posSeparator) {\r\n\t\tconst len = valObj.integer.length;\r\n\t\tconst offset = len % posSeparator;\r\n\t\tfor (let indx = 0; indx < len; indx++) {\r\n\t\t\tvalObj.result += valObj.integer.charAt(indx);\r\n\t\t\t// -posSeparator so that won't trail separator on full length\r\n\t\t\tif (!((indx - offset + 1) % posSeparator) && indx < len - posSeparator) {\r\n\t\t\t\tvalObj.result += maskObj.separator;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tvalObj.result = valObj.integer;\r\n\t}\r\n\r\n\tvalObj.result += (maskObj.fraction && valObj.fraction)\r\n\t\t? maskObj.decimal + valObj.fraction\r\n\t\t: \"\";\r\n\treturn valObj;\r\n}\r\n\r\nfunction _format(mask, value, options = {}) {\r\n\tif (!mask || isNaN(Number(value))) {\r\n\t\t// Invalid inputs\r\n\t\treturn value;\r\n\t}\r\n\r\n\tconst maskObj: any = processMask(mask);\r\n\tconst valObj = processValue(value, maskObj, options);\r\n\treturn maskObj.prefix + valObj.sign + valObj.result + maskObj.suffix;\r\n};\r\n///////////////////////////////////END https://github.com/Mottie/javascript-number-formatter/blob/master/src/format.js\r\n//add 0 before\r\nfunction v(str,num){\r\n\tstr=str.toString();\r\n\twhile(str.length<num){\r\n\t\tstr=\"0\"+str;\r\n\t}\r\n\treturn str;\r\n}\r\n\r\n//simple dateformat perhaps we should use moments\r\n//now we do something basics\r\nfunction formatDate(format:string,date:Date){\r\n\treturn format.\r\n\t\t\treplace(\"DD\",v(date.getDate(),2)).\r\n\t\t\treplace(\"D\",date.getDate().toString()).\r\n\t\t\treplace(\"MM\",v(date.getMonth(),2)).\r\n\t\t\treplace(\"YYYY\",date.getFullYear().toString()).\r\n\t\t\treplace(\"YY\",(date.getFullYear()%100).toString()).\r\n\t\t\treplace(\"A\",date.getHours()>12?\"PM\":\"AM\").\r\n\t\t\treplace(\"hh\",v(date.getHours(),2)).\r\n\t\t\treplace(\"h\",(date.getHours() % 12).toString()).\r\n\t\t\treplace(\"mm\",v(date.getMinutes(),2)).\r\n\t\t\treplace(\"ss\",v(date.getSeconds(),2));\r\n}\r\n\r\n//clone the obj depp\r\nfunction clone(obj) {\r\n\tif (obj === null || typeof (obj) !== 'object' || 'isActiveClone' in obj)\r\n\t\treturn obj;\r\n\r\n\tif (obj instanceof Date || typeof obj === \"object\")\r\n\t\tvar temp = new obj.constructor(); //or new Date(obj);\r\n\telse\r\n\t\tvar temp = obj.constructor();\r\n\r\n\tfor (var key in obj) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n\t\t\tobj['isActiveClone'] = null;\r\n\t\t\ttemp[key] = clone(obj[key]);\r\n\t\t\tdelete obj['isActiveClone'];\r\n\t\t}\r\n\t}\r\n\treturn temp;\r\n}\r\n\r\ndeclare global {\r\n\tinterface String {\r\n\t\t//@ts-ignore\r\n\t\treplaceTemplate: any;\r\n\t}\r\n}\r\n//replace the params in the string\r\n//@param {boolean} returnValues - if true the templatevalues would be returned not the replaces string\r\n//@ts-ignore\r\nString.prototype.replaceTemplate = function (params, returnValues) {\r\n\tconst names = Object.keys(params);\r\n\tconst vals = Object.values(params);\r\n\taddGroupFuncions(names, vals);\r\n\tfor (let x = 0; x < vals.length; x++) {\r\n\t\tif (typeof vals[x] === \"function\") {\r\n\t\t\tvals[x] = (<any>vals[x]).bind(params);\r\n\t\t}\r\n\t}\r\n\tlet stag = \"\";\r\n\tif (returnValues) {\r\n\t\tnames.push(\"tag\");\r\n\t\tstag = \"tag\";\r\n\t\tvals.push(function tag(strings, values) {\r\n\t\t\treturn values;\r\n\t\t});\r\n\t}\r\n\tvar func = funccache[names.join(\",\") + this];\r\n\tif (func === undefined) {//create functions is slow so cache\r\n\t\tfunc = new Function(...names, `return ${stag}\\`${this}\\`;`);\r\n\t\tfunccache[names.join(\",\") + this] = func;\r\n\t}\r\n\treturn func(...vals);\r\n}\r\n//get the member of the data\r\nfunction getVar(data, member: string) {\r\n\tvar ergebnis = member.toString().match(/\\$\\{(\\w||\\.)*\\}/g);\r\n\tif (!ergebnis)\r\n\t\tmember = \"${\" + member + \"}\";\r\n\tvar ob = member.replaceTemplate(data, true);\r\n\treturn ob;\r\n}\r\n//replace {{currentPage}} {{pageWidth}} {{pageHeight}} {{pageCount}} in header,footer, background\r\nfunction replacePageInformation(def) {\r\n\r\n\tif (def.background && typeof def.background !== \"function\") {\r\n\t\tlet d = JSON.stringify(def.background);\r\n\t\tdef.background = function (currentPage, pageSize) {\r\n\t\t\tlet sret = d.replaceAll(\"{{currentPage}}\", currentPage);\r\n\t\t\tsret = sret.replaceAll(\"{{pageWidth}}\", pageSize.width);\r\n\t\t\tsret = sret.replaceAll(\"{{pageHeight}}\", pageSize.height);\r\n\t\t\treturn JSON.parse(sret);\r\n\t\t}\r\n\t}\r\n\tif (def.header && typeof def.header !== \"function\") {\r\n\t\tlet d = JSON.stringify(def.header);\r\n\t\tdef.header = function (currentPage, pageCount) {\r\n\t\t\tlet sret = d.replaceAll(\"{{currentPage}}\", currentPage);\r\n\t\t\tsret = sret.replaceAll(\"{{pageCount}}\", pageCount);\r\n\t\t\treturn JSON.parse(sret);\r\n\t\t}\r\n\t}\r\n\tif (def.footer && typeof def.footer !== \"function\") {\r\n\t\tlet d = JSON.stringify(def.footer);\r\n\r\n\t\tdef.footer = function (currentPage, pageCount, pageSize) {\r\n\t\t\tlet sret = d.replaceAll(\"{{currentPage}}\", currentPage);\r\n\t\t\tsret = sret.replaceAll(\"{{pageCount}}\", pageCount);\r\n\t\t\tsret = sret.replaceAll(\"{{pageWidth}}\", pageSize.width);\r\n\t\t\tsret = sret.replaceAll(\"{{pageHeight}}\", pageSize.height);\r\n\t\t\treturn JSON.parse(sret);\r\n\t\t}\r\n\t}\r\n}\r\n//sort the group with groupfields\r\nfunction groupSort(group, name, groupfields, groupid = 0) {\r\n\tvar ret = { entries: [], name: name };\r\n\tif (groupid > 0)\r\n\t\tret[\"groupfield\"] = groupfields[groupid - 1];\r\n\tif (Array.isArray(group)) {\r\n\t\tgroup.forEach((neu) => ret.entries.push(neu));\r\n\r\n\t} else {\r\n\t\tfor (var key in group) {\r\n\t\t\tvar neu = group[key];\r\n\t\t\tret.entries.push(groupSort(neu, key, groupfields, groupid + 1));\r\n\t\t}\r\n\t\tret.entries = ret.entries.sort((a, b) => {\r\n\t\t\treturn a.name.localeCompare(b.name);\r\n\t\t});\r\n\r\n\t}\r\n\treturn ret;\r\n}\r\n/**\r\n * groups and sort the entries\r\n * @param {any[]} entries - the entries to group\r\n * @param {string[]} groupfields - the fields where the entries are grouped  \r\n */\r\nexport function doGroup(entries, groupfields: string[]) {\r\n\tvar ret: any = {};\r\n\tfor (var e = 0; e < entries.length; e++) {\r\n\t\tvar entry = entries[e];\r\n\t\tlet parent = ret;\r\n\t\tfor (var x = 0; x < groupfields.length; x++) {\r\n\t\t\tvar groupname = entry[groupfields[x]];\r\n\t\t\tif (x < groupfields.length - 1) {//undergroups does exists\r\n\t\t\t\tif (!parent[groupname])\r\n\t\t\t\t\tparent[groupname] = {};\r\n\t\t\t} else { //last group contaons the data\r\n\t\t\t\tif (!parent[groupname])\r\n\t\t\t\t\tparent[groupname] = [];\r\n\t\t\t\tparent[groupname].push(entry);\r\n\t\t\t}\r\n\t\t\tparent = parent[groupname];\r\n\t\t}\r\n\t}\r\n\t//sort\r\n\tvar sorted = groupSort(ret, \"main\", groupfields);\r\n\r\n\treturn sorted;\r\n}\r\n//replace the datatable {datable:...} to table:{}\r\nfunction replaceDatatable(def, data) {\r\n\tvar header = def.datatable.header;\r\n\tvar footer = def.datatable.footer;\r\n\tvar dataexpr = def.datatable.dataforeach;\r\n\tvar groups = def.datatable.groups;\r\n\tvar body = def.datatable.body;\r\n\tvar groupexpr: string[] = [];\r\n\tdef.table = clone(def.datatable);\r\n\tdef.table.body = []\r\n\tdelete def.table.header;\r\n\tdelete def.table.footer;\r\n\tdelete def.table.dataforeach;\r\n\tdelete def.table.groups;\r\n\r\n\tif (header)\r\n\t\tdef.table.body.push(header);\r\n\tif (groups === undefined || groups.length === 0) {\r\n\t\tdef.table.body.push({\r\n\t\t\tforeach: dataexpr,\r\n\t\t\tdo: body\r\n\t\t});\r\n\t} else {\r\n\t\tvar parent: any = {};\r\n\t\tvar toadd = {\r\n\t\t\tforeach: \"group1 in datatablegroups.entries\",\r\n\t\t\tdo: parent\r\n\t\t}\r\n\t\tdef.table.body.push(toadd);\r\n\t\tfor (var x = 0; x < groups.length; x++) {\r\n\t\t\tgroupexpr.push(groups[x].expression);\r\n\t\t\tif (x < groups.length - 1) {\r\n\t\t\t\tparent.foreach = \"group\" + (x + 2).toString() + \" in group\" + (x + 1).toString() + \".entries\";\r\n\t\t\t} else {\r\n\t\t\t\tparent.foreach = dataexpr.split(\" \")[0] + \" in group\" + (x + 1).toString() + \".entries\";\r\n\t\t\t}\r\n\t\t\tif (groups[x].header && groups[x].header.length > 0) {\r\n\t\t\t\tparent.dofirst = groups[x].header;\r\n\t\t\t}\r\n\t\t\tif (groups[x].footer && groups[x].footer.length > 0) {\r\n\t\t\t\tparent.dolast = groups[x].footer;\r\n\t\t\t}\r\n\t\t\tif (x < groups.length - 1) {\r\n\t\t\t\tparent.do = {};\r\n\t\t\t\tparent = parent.do;\r\n\t\t\t} else {\r\n\t\t\t\tparent.do = body;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar arr = getArrayFromForEach(def.datatable.dataforeach, data);\r\n\t\tdata.datatablegroups = doGroup(arr, groupexpr);\r\n\t}\r\n\r\n\tdelete def.datatable.dataforeach;\r\n\r\n\tif (footer)\r\n\t\tdef.table.body.push(footer);\r\n\t//delete data[variable];\r\n\tdelete def.datatable.header;\r\n\tdelete def.datatable.footer;\r\n\tdelete def.datatable.foreach;\r\n\tdelete def.datatable.groups;\r\n\tdelete def.datatable.body;\r\n\r\n\tfor (var key in def.datatable) {\r\n\t\tdef.table[key] = def.datatable[key];\r\n\t}\r\n\tdelete def.datatable;\r\n}\r\n\r\n//get the array for the foreach statement in the data\r\nfunction getArrayFromForEach(foreach, data) {\r\n\tvar sarr = foreach.split(\" in \")[1];\r\n\tvar arr;\r\n\tif (sarr === undefined) {\r\n\t\tarr = data?.items;//we get the main array\r\n\t} else {\r\n\t\tarr = getVar(data, sarr);\r\n\t}\r\n\treturn arr;\r\n}\r\n//replace templates e.g. ${name} with the data\r\nfunction replaceTemplates(def, data, param = undefined) {\r\n\tif (def === undefined)\r\n\t\treturn;\r\n\tif (def.datatable !== undefined) {\r\n\t\treplaceDatatable(def, data);\r\n\r\n\t}\r\n\tif(def.format){\r\n\t\tvar val = def.text.replaceTemplate(data,true);\r\n\t\tif(val===undefined)\r\n\t\t    return \"\";\r\n\t\telse if(typeof val == 'number'){\r\n\t\t\tdef.text=_format(def.format,val,{});\r\n\t\t}else if(val.getMonth){\r\n\t\t\tdef.text=formatDate(def.format,val);\r\n\t\t}\r\n\t\tdelete def.format;\r\n\t}\r\n\tif (def.foreach !== undefined) {\r\n\t\t//resolve foreach\r\n\t\t//\t{ foreach: \"line in invoice.lines\", do: ['{{line.text}}', '{{line.price}}', 'OK?']\t\r\n\t\tif (param?.parentArray === undefined) {\r\n\t\t\tthrow \"foreach is not surounded by an Array\";\r\n\t\t}\r\n\t\tvar variable = def.foreach.split(\" in \")[0];\r\n\t\tvar arr: any[] = getArrayFromForEach(def.foreach, data);\r\n\r\n\t\tif (param?.parentArrayPos === undefined) {\r\n\t\t\tparam.parentArrayPos = param?.parentArray.indexOf(def);\r\n\t\t\tparam?.parentArray.splice(param.parentArrayPos, 1);\r\n\t\t}\r\n\r\n\t\tfor (let x = 0; x < arr.length; x++) {\r\n\t\t\tdata[variable] = arr[x];\r\n\t\t\tdelete def.foreach;\r\n\t\t\tvar copy;\r\n\t\t\tif (def.dofirst && x === 0) {//render only forfirst\r\n\t\t\t\tcopy = clone(def.dofirst);\r\n\t\t\t\tcopy = replaceTemplates(copy, data, param);\r\n\t\t\t\tif (copy !== undefined)\r\n\t\t\t\t\tparam.parentArray.splice(param.parentArrayPos++, 0, copy);\r\n\t\t\t}\r\n\t\t\tif (def.do)\r\n\t\t\t\tcopy = clone(def.do);\r\n\t\t\telse\r\n\t\t\t\tcopy = clone(def);\r\n\r\n\t\t\tcopy = replaceTemplates(copy, data, param);\r\n\t\t\tif (copy !== undefined)\r\n\t\t\t\tparam.parentArray.splice(param.parentArrayPos++, 0, copy);\r\n\r\n\t\t\tif (def.dolast && x === arr.length - 1) {//render only forlast\r\n\t\t\t\tcopy = clone(def.dolast);\r\n\t\t\t\tcopy = replaceTemplates(copy, data, param);\r\n\t\t\t\tif (copy !== undefined)\r\n\t\t\t\t\tparam.parentArray.splice(param.parentArrayPos++, 0, copy);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete data[variable];\r\n\t\treturn undefined;\r\n\t} else if (Array.isArray(def)) {\r\n\t\tfor (var a = 0; a < def.length; a++) {\r\n\t\t\tif (def[a].foreach !== undefined) {\r\n\t\t\t\treplaceTemplates(def[a], data, { parentArray: def });\r\n\t\t\t\ta--;\r\n\t\t\t} else\r\n\t\t\t\tdef[a] = replaceTemplates(def[a], data, { parentArray: def });\r\n\t\t}\r\n\t\treturn def;\r\n\t} else if (typeof def === \"string\") {\r\n\t\tvar ergebnis = def.toString().match(/\\$\\{/g);\r\n\t\tif (ergebnis !== null) {\r\n\t\t\tdef = def.replaceTemplate(data);\r\n\t\t\t//\tfor (var e = 0; e < ergebnis.length; e++) {\r\n\t\t\t//\t\tdef = replace(def, data, ergebnis[e].substring(2, ergebnis[e].length - 2));\r\n\t\t\t//\t}\r\n\t\t}\r\n\t\treturn def;\r\n\t} else {//object\t\r\n\t\tfor (var key in def) {\r\n\t\t\tdef[key] = replaceTemplates(def[key], data);\r\n\r\n\t\t}\r\n\t\tdelete def.editTogether;//RText is only used for editing report\r\n\t}\r\n\treturn def;\r\n}\r\n\r\n/**\r\n * create an pdfmake-definition from an jassijs-report-definition, fills data and parameter in the report\r\n * @param {string} definition - the jassijs-report definition\r\n * @param {any} [data] - the data which are filled in the report (optional)\r\n * @param {any} [parameter] - the parameter which are filled in the report (otional)\r\n */\r\nexport function createReportDefinition(definition, data, parameter) {\r\n\tdefinition = clone(definition);//this would be modified\r\n\tif (data !== undefined)\r\n\t\tdata = clone(data);//this would be modified\r\n\r\n\tif (data === undefined && definition.data !== undefined) {\r\n\t\tdata = definition.data;\r\n\t}\r\n\t//parameter could be in data\r\n\tif (data !== undefined && data.parameter !== undefined && parameter !== undefined) {\r\n\t\tthrow new Error(\"parameter would override data.parameter\");\r\n\t}\r\n\tif (Array.isArray(data)) {\r\n\t\tdata = { items: data };//so we can do data.parameter\r\n\t}\r\n\tif (parameter !== undefined) {\r\n\r\n\t\tdata.parameter = parameter;\r\n\t}\r\n\t//parameter could be in definition\r\n\tif (data !== undefined && data.parameter !== undefined && definition.parameter !== undefined) {\r\n\t\tthrow new Error(\"definition.parameter would override data.parameter\");\r\n\t}\r\n\tif (definition.parameter !== undefined) {\r\n\t\tdata.parameter = definition.parameter;\r\n\t}\r\n\tdefinition.content = replaceTemplates(definition.content, data);\r\n\tif (definition.background)\r\n\t\tdefinition.background = replaceTemplates(definition.background, data);\r\n\tif (definition.header)\r\n\t\tdefinition.header = replaceTemplates(definition.header, data);\r\n\tif (definition.footer)\r\n\t\tdefinition.footer = replaceTemplates(definition.footer, data);\r\n\r\n\treplacePageInformation(definition);\r\n\tdelete definition.data;\r\n\treturn definition;\r\n\t// delete definition.parameter;\r\n}\r\n\r\n//add aggregate functions for grouping\r\nfunction addGroupFuncions(names, values) {\r\n\tnames.push(\"sum\");\r\n\tvalues.push(sum);\r\n\tnames.push(\"count\");\r\n\tvalues.push(count);\r\n\tnames.push(\"max\");\r\n\tvalues.push(max);\r\n\tnames.push(\"min\");\r\n\tvalues.push(min);\r\n\tnames.push(\"avg\");\r\n\tvalues.push(avg);\r\n}\r\nfunction aggr(group, field,data) {\r\n\tvar ret = 0;\r\n\tif (!Array.isArray(group) && group.entries === undefined)\r\n\t\tthrow new Error(\"sum is valid only in arrays and groups\");\r\n\tvar sfield: string = field;\r\n\tif (field.indexOf(\"${\") === -1) {\r\n\t\tsfield = \"${\" + sfield + \"}\";\r\n\t}\r\n\tif(Array.isArray(group)){\r\n\t\tfor (var x = 0; x < group.length; x++) {\r\n\t\t\tvar ob = group[x];\r\n\t\t\tif(ob.entries!==undefined)\r\n\t\t\t\taggr(ob.entries,field,data);\r\n\t\t\telse{\r\n\t\t\t\tvar val = sfield.replaceTemplate(ob, true);\r\n\t\t\t\tdata.func(data,val===undefined?0: Number.parseFloat(val));\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\taggr(group.entries,field,data);//group\r\n\t} \r\n\treturn data;\r\n}\r\n\r\n//sum the field in the group\r\nfunction sum(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:0,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tdata.ret=data.ret+num;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//count the field in the group\r\nfunction count(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:0,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tdata.ret=data.ret+1;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//get the maximum of the field in the group\r\nfunction max(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:Number.MIN_VALUE,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tif(num>data.ret)\r\n\t\t\t\tdata.ret=num;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//get the minimum of the field in the group\r\nfunction min(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:Number.MAX_VALUE,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tif(num<data.ret)\r\n\t\t\t\tdata.ret=num;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//get the minimum of the field in the group\r\nfunction avg(group, field) {\r\n\tvar ret= aggr(group,field,{\r\n\t\tret:0,\r\n\t\tcount:0,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tdata.ret=data.ret+num;\r\n\t\t\tdata.count++;\r\n\r\n\t\t}\r\n\t});\r\n\treturn ret.ret/ret.count;\r\n}\r\n\r\nexport function test() {\r\n\tvar ff= _format(\"####,##\", 50.22, {});\r\n\tvar hh=formatDate(\"DD.MM.YYYY hh:mm:ss\",new Date());\r\n\tvar hh=formatDate(\"YY-MM-DD h:mm:ss A\",new Date());\r\n\tvar sampleData = [\r\n\t\t{ id: 1, customer: \"Fred\", city: \"Frankfurt\", age: 51 },\r\n\t\t{ id: 8, customer: \"Alma\", city: \"Dresden\", age: 70 },\r\n\t\t{ id: 3, customer: \"Heinz\", city: \"Frankfurt\", age: 33 },\r\n\t\t{ id: 2, customer: \"Fred\", city: \"Frankfurt\", age: 88 },\r\n\t\t{ id: 6, customer: \"Max\", city: \"Dresden\", age: 3 },\r\n\t\t{ id: 4, customer: \"Heinz\", city: \"Frankfurt\", age: 64 },\r\n\t\t{ id: 5, customer: \"Max\", city: \"Dresden\", age: 54 },\r\n\t\t{ id: 7, customer: \"Alma\", city: \"Dresden\", age: 33 },\r\n\t\t{ id: 9, customer: \"Otto\", city: \"Berlin\", age: 21 }\r\n\t];\r\n\r\n\tvar h = {\r\n\t\tall: doGroup(sampleData, [\"city\",\"customer\"]),\r\n\t\tk: 5,\r\n\t\tho() {\r\n\t\t\treturn this.k + 1;\r\n\t\t}\r\n\t}\r\n\t//@ts-ignore\r\n\tvar s = \"${Math.round(avg(all,'age'),2)}\".replaceTemplate(h, true);\r\n\ts = \"${k}\".replaceTemplate(h, true);\r\n\ts = \"${ho()}\".replaceTemplate(h, true);\r\n\r\n\t\r\n}\r\n","import { $Class } from \"jassijs/remote/Registry\";\nimport { Context, RemoteObject, UseServer } from \"jassijs/remote/RemoteObject\";\nimport { Server } from \"jassijs/remote/Server\";\nimport { ValidateFunctionParameter, ValidateIsString } from \"jassijs/remote/Validator\";\n\n@$Class(\"jassijs_report.remote.ServerReport\")\nexport class ServerReport{\n    static cacheLastParameter={};\n    @UseServer()\n    @ValidateFunctionParameter()\n    public static async getDesign(@ValidateIsString() path:string,parameter: any) {\n            //@ts-ignore\n            var DoServerreport=(await import(\"jassijs_report/server/DoServerreport\")).DoServerreport;\n            ServerReport.cacheLastParameter[path]=parameter;\n            return await new DoServerreport().getDesign(path,parameter);\n    }\n    @UseServer()\n    @ValidateFunctionParameter()\n    public static async getBase64(@ValidateIsString() path:string,parameter: any) {\n            //@ts-ignore\n            var DoServerreport=(await import(\"jassijs_report/server/DoServerreport\")).DoServerreport;\n            if(parameter==\"useLastCachedParameter\")\n                parameter=ServerReport.cacheLastParameter[path];\n            return await new DoServerreport().getBase64(path,parameter); \n    }\n    @UseServer()\n    public static async getBase64FromFile(file:string,context: Context = undefined) {\n            var res = await new Server().testServersideFile(file.substring(0, file.length - 3),context);\n        \n            //@ts-ignore \n            var DoServerreport=(await import(\"jassijs_report/server/DoServerreport\")).DoServerreport;\n            return await new DoServerreport().getBase64FromData(res);\n    }\n  \n}\nexport async function test(){\n  \n    var ret=await ServerReport.getBase64(\"jassijs_report/server/TestServerreport\",{sort:\"name\"});\n   return ret;\n//    console.log(await new ServerReport().sayHello(\"Kurt\"));\n}\n","\r\nimport { config } from \"jassijs/remote/Config\";\r\nimport { Server } from \"jassijs/remote/Server\";\r\nimport { createReportDefinition } from \"jassijs_report/remote/pdfmakejassi\";\r\n\r\nexport class DoServerreport {\r\n\r\n    async getDesign(path: string, parameter) {\r\n        var fill = (await import(path)).fill;\r\n        var content = await fill(parameter);\r\n        return content;\r\n    }\r\n    async download(url, dest) {\r\n      \r\n    }\r\n\r\n    async getBase64(file: string, parameter) {\r\n        var data = await this.getDesign(file, parameter);\r\n        return await this.getBase64FromData(data);\r\n    }\r\n    async getBase64FromData(data) {\r\n        var PDFReport = <any>await new Promise((resolve) => {\r\n            config.clientrequire([\"jassijs_report/PDFReport\"], (rep) => {\r\n                resolve(rep.PDFReport);\r\n            });\r\n        });\r\n        var rep=new PDFReport();\r\n        rep.data=data.data;\r\n        rep.value=data.reportdesign;\r\n        rep.parameter=data.parameter;\r\n        await rep.fill();\r\n        return await rep.getBase64();\r\n    }\r\n}\r\n\r\n","//synchronize-server-client\r\n\r\nvar reportdesign = {\r\n\tcontent: [\r\n\t\t{\r\n\t\t\tdatatable: {\r\n\t\t\t\twidths: [\"auto\",\"auto\",140],\r\n\t\t\t\theader: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbold: true,\r\n\t\t\t\t\t\titalics: true,\r\n\t\t\t\t\t\tfont: \"Asap\",\r\n\t\t\t\t\t\ttext: \"name\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"lastname\",\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t],\r\n\t\t\t\tfooter: [\"\",\"\",\"\\n\"],\r\n\t\t\t\tdataforeach: \"person\",\r\n\t\t\t\tbody: [\r\n\t\t\t\t\t\"${person.name}\",\r\n\t\t\t\t\t\"${person.lastname}\",\r\n\t\t\t\t\t\"${person.fullname()}\"\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n};\r\n \r\nexport async function fill(parameter) {\r\n    var data = [\r\n        { name: \"Aoron\", lastname: \"Mllera\" ,fullname(){ return this.name+\", \"+this.lastname}},\r\n        { name: \"Heino\", lastname: \"Brechtp\",fullname(){ return this.name+\", \"+this.lastname}}\r\n    ]\r\n    if (parameter?.sort === \"name\")\r\n        data = data.sort((a, b) => { return a.name.localeCompare(b.name) });\r\n    if (parameter?.sort === \"lastname\")\r\n        data = data.sort((a, b) => { return a.lastname.localeCompare(b.lastname) });\r\n    return {\r\n        reportdesign,\r\n        data\r\n    }\r\n}\r\n\r\nexport async function test(){ \r\n    return await fill(undefined); \r\n}\r\n//ok","export default {\r\n    \"css\":{\"jassijs_report.css\":\"jassijs_report.css\"},\r\n    \"require\": {\r\n        paths: {\r\n            'pdfjs-dist/build/pdf': '//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min',\r\n            'pdfjs-dist/build/pdf.worker': '//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min',\r\n       //     'vfs_fonts': '//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.3.0-beta.2/vfs_fonts',// '../../lib/vfs_fonts',\r\n            'pdfMakelib': '//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.3.0-beta.2/pdfmake'  //'../../lib/pdfmake'\r\n        },\r\n        shim: {\r\n            'pdfjs-dist/build/pdf': ['pdfjs-dist/build/pdf.worker']\r\n          //  \"vfs_fonts\":[\"pdfMakelib\"]\r\n        },\r\n\r\n    }\r\n}"]}
=======
{"version":3,"file":"jassijs_report-server.js","sourceRoot":"","sources":["../jassijs_report/registry.js","../jassijs_report/remote/pdfmakejassi.ts","../jassijs_report/remote/ServerReport.ts","../jassijs_report/server/DoServerreport.ts","../jassijs_report/server/TestServerreport.ts","../jassijs_report/modul.ts"],"names":[],"mappings":"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","sourcesContent":["//this file is autogenerated don't modify\ndefine(\"jassijs_report/registry\",[\"require\"], function(require) {\n return {\n  default: {\n\t\"jassijs_report/remote/pdfmakejassi.ts\": {\n\t\t\"date\": 1634336644000\n\t},\n\t\"jassijs_report/remote/ServerReport.ts\": {\n\t\t\"date\": 1684441134000,\n\t\t\"jassijs_report.remote.ServerReport\": {\n\t\t\t\"@members\": {\n\t\t\t\t\"getDesign\": {\n\t\t\t\t\t\"ValidateFunctionParameter\": []\n\t\t\t\t},\n\t\t\t\t\"getBase64\": {\n\t\t\t\t\t\"ValidateFunctionParameter\": []\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"jassijs_report/server/DoServerreport.ts\": {\n\t\t\"date\": 1684441098000\n\t},\n\t\"jassijs_report/server/TestServerreport.ts\": {\n\t\t\"date\": 1684501452000\n\t}\n}\n }\n});","//templating is slow so we chache\r\nvar funccache: any = {};\r\n//https://github.com/Mottie/javascript-number-formatter/blob/master/src/format.js\r\n//license https://github.com/Mottie/javascript-number-formatter/blob/master/LICENSE\r\nconst maskRegex = /[0-9\\-+#]/;\r\nconst notMaskRegex = /[^\\d\\-+#]/g;\r\n\r\nfunction getIndex(mask) {\r\n\treturn mask.search(maskRegex);\r\n}\r\n\r\nfunction processMask(mask = \"#.##\") {\r\n\tconst maskObj: any = {};\r\n\tconst len = mask.length;\r\n\tconst start = getIndex(mask);\r\n\tmaskObj.prefix = start > 0 ? mask.substring(0, start) : \"\";\r\n\r\n\t// Reverse string: not an ideal method if there are surrogate pairs\r\n\tconst end = getIndex(mask.split(\"\").reverse().join(\"\"));\r\n\tconst offset = len - end;\r\n\tconst substr = mask.substring(offset, offset + 1);\r\n\t// Add 1 to offset if mask has a trailing decimal/comma\r\n\tconst indx = offset + ((substr === \".\" || (substr === \",\")) ? 1 : 0);\r\n\tmaskObj.suffix = end > 0 ? mask.substring(indx, len) : \"\";\r\n\r\n\tmaskObj.mask = mask.substring(start, indx);\r\n\tmaskObj.maskHasNegativeSign = maskObj.mask.charAt(0) === \"-\";\r\n\tmaskObj.maskHasPositiveSign = maskObj.mask.charAt(0) === \"+\";\r\n\r\n\t// Search for group separator & decimal; anything not digit,\r\n\t// not +/- sign, and not #\r\n\tlet result = maskObj.mask.match(notMaskRegex);\r\n\t// Treat the right most symbol as decimal\r\n\tmaskObj.decimal = (result && result[result.length - 1]) || \".\";\r\n\t// Treat the left most symbol as group separator\r\n\tmaskObj.separator = (result && result[1] && result[0]) || \",\";\r\n\r\n\t// Split the decimal for the format string if any\r\n\tresult = maskObj.mask.split(maskObj.decimal);\r\n\tmaskObj.integer = result[0];\r\n\tmaskObj.fraction = result[1];\r\n\treturn maskObj;\r\n}\r\n\r\nfunction processValue(value, maskObj, options) {\r\n\tlet isNegative = false;\r\n\tconst valObj: any = {\r\n\t\tvalue\r\n\t};\r\n\tif (value < 0) {\r\n\t\tisNegative = true;\r\n\t\t// Process only abs(), and turn on flag.\r\n\t\tvalObj.value = -valObj.value;\r\n\t}\r\n\r\n\tvalObj.sign = isNegative ? \"-\" : \"\";\r\n\r\n\t// Fix the decimal first, toFixed will auto fill trailing zero.\r\n\tvalObj.value = Number(valObj.value).toFixed(maskObj.fraction && maskObj.fraction.length);\r\n\t// Convert number to string to trim off *all* trailing decimal zero(es)\r\n\tvalObj.value = Number(valObj.value).toString();\r\n\r\n\t// Fill back any trailing zero according to format\r\n\t// look for last zero in format\r\n\tconst posTrailZero = maskObj.fraction && maskObj.fraction.lastIndexOf(\"0\");\r\n\tlet [valInteger = \"0\", valFraction = \"\"] = valObj.value.split(\".\");\r\n\tif (!valFraction || (valFraction && valFraction.length <= posTrailZero)) {\r\n\t\tvalFraction = posTrailZero < 0\r\n\t\t\t? \"\"\r\n\t\t\t: (Number(\"0.\" + valFraction).toFixed(posTrailZero + 1)).replace(\"0.\", \"\");\r\n\t}\r\n\r\n\tvalObj.integer = valInteger;\r\n\tvalObj.fraction = valFraction;\r\n\taddSeparators(valObj, maskObj);\r\n\r\n\t// Remove negative sign if result is zero\r\n\tif (valObj.result === \"0\" || valObj.result === \"\") {\r\n\t\t// Remove negative sign if result is zero\r\n\t\tisNegative = false;\r\n\t\tvalObj.sign = \"\";\r\n\t}\r\n\r\n\tif (!isNegative && maskObj.maskHasPositiveSign) {\r\n\t\tvalObj.sign = \"+\";\r\n\t} else if (isNegative && maskObj.maskHasPositiveSign) {\r\n\t\tvalObj.sign = \"-\";\r\n\t} else if (isNegative) {\r\n\t\tvalObj.sign = options && options.enforceMaskSign && !maskObj.maskHasNegativeSign\r\n\t\t\t? \"\"\r\n\t\t\t: \"-\";\r\n\t}\r\n\r\n\treturn valObj;\r\n}\r\n\r\nfunction addSeparators(valObj, maskObj) {\r\n\tvalObj.result = \"\";\r\n\t// Look for separator\r\n\tconst szSep = maskObj.integer.split(maskObj.separator);\r\n\t// Join back without separator for counting the pos of any leading 0\r\n\tconst maskInteger = szSep.join(\"\");\r\n\r\n\tconst posLeadZero = maskInteger && maskInteger.indexOf(\"0\");\r\n\tif (posLeadZero > -1) {\r\n\t\twhile (valObj.integer.length < (maskInteger.length - posLeadZero)) {\r\n\t\t\tvalObj.integer = \"0\" + valObj.integer;\r\n\t\t}\r\n\t} else if (Number(valObj.integer) === 0) {\r\n\t\tvalObj.integer = \"\";\r\n\t}\r\n\r\n\t// Process the first group separator from decimal (.) only, the rest ignore.\r\n\t// get the length of the last slice of split result.\r\n\tconst posSeparator = (szSep[1] && szSep[szSep.length - 1].length);\r\n\tif (posSeparator) {\r\n\t\tconst len = valObj.integer.length;\r\n\t\tconst offset = len % posSeparator;\r\n\t\tfor (let indx = 0; indx < len; indx++) {\r\n\t\t\tvalObj.result += valObj.integer.charAt(indx);\r\n\t\t\t// -posSeparator so that won't trail separator on full length\r\n\t\t\tif (!((indx - offset + 1) % posSeparator) && indx < len - posSeparator) {\r\n\t\t\t\tvalObj.result += maskObj.separator;\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tvalObj.result = valObj.integer;\r\n\t}\r\n\r\n\tvalObj.result += (maskObj.fraction && valObj.fraction)\r\n\t\t? maskObj.decimal + valObj.fraction\r\n\t\t: \"\";\r\n\treturn valObj;\r\n}\r\n\r\nfunction _format(mask, value, options = {}) {\r\n\tif (!mask || isNaN(Number(value))) {\r\n\t\t// Invalid inputs\r\n\t\treturn value;\r\n\t}\r\n\r\n\tconst maskObj: any = processMask(mask);\r\n\tconst valObj = processValue(value, maskObj, options);\r\n\treturn maskObj.prefix + valObj.sign + valObj.result + maskObj.suffix;\r\n};\r\n///////////////////////////////////END https://github.com/Mottie/javascript-number-formatter/blob/master/src/format.js\r\n//add 0 before\r\nfunction v(str,num){\r\n\tstr=str.toString();\r\n\twhile(str.length<num){\r\n\t\tstr=\"0\"+str;\r\n\t}\r\n\treturn str;\r\n}\r\n\r\n//simple dateformat perhaps we should use moments\r\n//now we do something basics\r\nfunction formatDate(format:string,date:Date){\r\n\treturn format.\r\n\t\t\treplace(\"DD\",v(date.getDate(),2)).\r\n\t\t\treplace(\"D\",date.getDate().toString()).\r\n\t\t\treplace(\"MM\",v(date.getMonth(),2)).\r\n\t\t\treplace(\"YYYY\",date.getFullYear().toString()).\r\n\t\t\treplace(\"YY\",(date.getFullYear()%100).toString()).\r\n\t\t\treplace(\"A\",date.getHours()>12?\"PM\":\"AM\").\r\n\t\t\treplace(\"hh\",v(date.getHours(),2)).\r\n\t\t\treplace(\"h\",(date.getHours() % 12).toString()).\r\n\t\t\treplace(\"mm\",v(date.getMinutes(),2)).\r\n\t\t\treplace(\"ss\",v(date.getSeconds(),2));\r\n}\r\n\r\n//clone the obj depp\r\nfunction clone(obj) {\r\n\tif (obj === null || typeof (obj) !== 'object' || 'isActiveClone' in obj)\r\n\t\treturn obj;\r\n\r\n\tif (obj instanceof Date || typeof obj === \"object\")\r\n\t\tvar temp = new obj.constructor(); //or new Date(obj);\r\n\telse\r\n\t\tvar temp = obj.constructor();\r\n\r\n\tfor (var key in obj) {\r\n\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n\t\t\tobj['isActiveClone'] = null;\r\n\t\t\ttemp[key] = clone(obj[key]);\r\n\t\t\tdelete obj['isActiveClone'];\r\n\t\t}\r\n\t}\r\n\treturn temp;\r\n}\r\n\r\ndeclare global {\r\n\tinterface String {\r\n\t\t//@ts-ignore\r\n\t\treplaceTemplate: any;\r\n\t}\r\n}\r\n//replace the params in the string\r\n//@param {boolean} returnValues - if true the templatevalues would be returned not the replaces string\r\n//@ts-ignore\r\nString.prototype.replaceTemplate = function (params, returnValues) {\r\n\tconst names = Object.keys(params);\r\n\tconst vals = Object.values(params);\r\n\taddGroupFuncions(names, vals);\r\n\tfor (let x = 0; x < vals.length; x++) {\r\n\t\tif (typeof vals[x] === \"function\") {\r\n\t\t\tvals[x] = (<any>vals[x]).bind(params);\r\n\t\t}\r\n\t}\r\n\tlet stag = \"\";\r\n\tif (returnValues) {\r\n\t\tnames.push(\"tag\");\r\n\t\tstag = \"tag\";\r\n\t\tvals.push(function tag(strings, values) {\r\n\t\t\treturn values;\r\n\t\t});\r\n\t}\r\n\tvar func = funccache[names.join(\",\") + this];\r\n\tif (func === undefined) {//create functions is slow so cache\r\n\t\tfunc = new Function(...names, `return ${stag}\\`${this}\\`;`);\r\n\t\tfunccache[names.join(\",\") + this] = func;\r\n\t}\r\n\treturn func(...vals);\r\n}\r\n//get the member of the data\r\nfunction getVar(data, member: string) {\r\n\tvar ergebnis = member.toString().match(/\\$\\{(\\w||\\.)*\\}/g);\r\n\tif (!ergebnis)\r\n\t\tmember = \"${\" + member + \"}\";\r\n\tvar ob = member.replaceTemplate(data, true);\r\n\treturn ob;\r\n}\r\n//replace {{currentPage}} {{pageWidth}} {{pageHeight}} {{pageCount}} in header,footer, background\r\nfunction replacePageInformation(def) {\r\n\r\n\tif (def.background && typeof def.background !== \"function\") {\r\n\t\tlet d = JSON.stringify(def.background);\r\n\t\tdef.background = function (currentPage, pageSize) {\r\n\t\t\tlet sret = d.replaceAll(\"{{currentPage}}\", currentPage);\r\n\t\t\tsret = sret.replaceAll(\"{{pageWidth}}\", pageSize.width);\r\n\t\t\tsret = sret.replaceAll(\"{{pageHeight}}\", pageSize.height);\r\n\t\t\treturn JSON.parse(sret);\r\n\t\t}\r\n\t}\r\n\tif (def.header && typeof def.header !== \"function\") {\r\n\t\tlet d = JSON.stringify(def.header);\r\n\t\tdef.header = function (currentPage, pageCount) {\r\n\t\t\tlet sret = d.replaceAll(\"{{currentPage}}\", currentPage);\r\n\t\t\tsret = sret.replaceAll(\"{{pageCount}}\", pageCount);\r\n\t\t\treturn JSON.parse(sret);\r\n\t\t}\r\n\t}\r\n\tif (def.footer && typeof def.footer !== \"function\") {\r\n\t\tlet d = JSON.stringify(def.footer);\r\n\r\n\t\tdef.footer = function (currentPage, pageCount, pageSize) {\r\n\t\t\tlet sret = d.replaceAll(\"{{currentPage}}\", currentPage);\r\n\t\t\tsret = sret.replaceAll(\"{{pageCount}}\", pageCount);\r\n\t\t\tsret = sret.replaceAll(\"{{pageWidth}}\", pageSize.width);\r\n\t\t\tsret = sret.replaceAll(\"{{pageHeight}}\", pageSize.height);\r\n\t\t\treturn JSON.parse(sret);\r\n\t\t}\r\n\t}\r\n}\r\n//sort the group with groupfields\r\nfunction groupSort(group, name, groupfields, groupid = 0) {\r\n\tvar ret = { entries: [], name: name };\r\n\tif (groupid > 0)\r\n\t\tret[\"groupfield\"] = groupfields[groupid - 1];\r\n\tif (Array.isArray(group)) {\r\n\t\tgroup.forEach((neu) => ret.entries.push(neu));\r\n\r\n\t} else {\r\n\t\tfor (var key in group) {\r\n\t\t\tvar neu = group[key];\r\n\t\t\tret.entries.push(groupSort(neu, key, groupfields, groupid + 1));\r\n\t\t}\r\n\t\tret.entries = ret.entries.sort((a, b) => {\r\n\t\t\treturn a.name.localeCompare(b.name);\r\n\t\t});\r\n\r\n\t}\r\n\treturn ret;\r\n}\r\n/**\r\n * groups and sort the entries\r\n * @param {any[]} entries - the entries to group\r\n * @param {string[]} groupfields - the fields where the entries are grouped  \r\n */\r\nexport function doGroup(entries, groupfields: string[]) {\r\n\tvar ret: any = {};\r\n\tfor (var e = 0; e < entries.length; e++) {\r\n\t\tvar entry = entries[e];\r\n\t\tlet parent = ret;\r\n\t\tfor (var x = 0; x < groupfields.length; x++) {\r\n\t\t\tvar groupname = entry[groupfields[x]];\r\n\t\t\tif (x < groupfields.length - 1) {//undergroups does exists\r\n\t\t\t\tif (!parent[groupname])\r\n\t\t\t\t\tparent[groupname] = {};\r\n\t\t\t} else { //last group contaons the data\r\n\t\t\t\tif (!parent[groupname])\r\n\t\t\t\t\tparent[groupname] = [];\r\n\t\t\t\tparent[groupname].push(entry);\r\n\t\t\t}\r\n\t\t\tparent = parent[groupname];\r\n\t\t}\r\n\t}\r\n\t//sort\r\n\tvar sorted = groupSort(ret, \"main\", groupfields);\r\n\r\n\treturn sorted;\r\n}\r\n//replace the datatable {datable:...} to table:{}\r\nfunction replaceDatatable(def, data) {\r\n\tvar header = def.datatable.header;\r\n\tvar footer = def.datatable.footer;\r\n\tvar dataexpr = def.datatable.dataforeach;\r\n\tvar groups = def.datatable.groups;\r\n\tvar body = def.datatable.body;\r\n\tvar groupexpr: string[] = [];\r\n\tdef.table = clone(def.datatable);\r\n\tdef.table.body = []\r\n\tdelete def.table.header;\r\n\tdelete def.table.footer;\r\n\tdelete def.table.dataforeach;\r\n\tdelete def.table.groups;\r\n\r\n\tif (header)\r\n\t\tdef.table.body.push(header);\r\n\tif (groups === undefined || groups.length === 0) {\r\n\t\tdef.table.body.push({\r\n\t\t\tforeach: dataexpr,\r\n\t\t\tdo: body\r\n\t\t});\r\n\t} else {\r\n\t\tvar parent: any = {};\r\n\t\tvar toadd = {\r\n\t\t\tforeach: \"group1 in datatablegroups.entries\",\r\n\t\t\tdo: parent\r\n\t\t}\r\n\t\tdef.table.body.push(toadd);\r\n\t\tfor (var x = 0; x < groups.length; x++) {\r\n\t\t\tgroupexpr.push(groups[x].expression);\r\n\t\t\tif (x < groups.length - 1) {\r\n\t\t\t\tparent.foreach = \"group\" + (x + 2).toString() + \" in group\" + (x + 1).toString() + \".entries\";\r\n\t\t\t} else {\r\n\t\t\t\tparent.foreach = dataexpr.split(\" \")[0] + \" in group\" + (x + 1).toString() + \".entries\";\r\n\t\t\t}\r\n\t\t\tif (groups[x].header && groups[x].header.length > 0) {\r\n\t\t\t\tparent.dofirst = groups[x].header;\r\n\t\t\t}\r\n\t\t\tif (groups[x].footer && groups[x].footer.length > 0) {\r\n\t\t\t\tparent.dolast = groups[x].footer;\r\n\t\t\t}\r\n\t\t\tif (x < groups.length - 1) {\r\n\t\t\t\tparent.do = {};\r\n\t\t\t\tparent = parent.do;\r\n\t\t\t} else {\r\n\t\t\t\tparent.do = body;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar arr = getArrayFromForEach(def.datatable.dataforeach, data);\r\n\t\tdata.datatablegroups = doGroup(arr, groupexpr);\r\n\t}\r\n\r\n\tdelete def.datatable.dataforeach;\r\n\r\n\tif (footer)\r\n\t\tdef.table.body.push(footer);\r\n\t//delete data[variable];\r\n\tdelete def.datatable.header;\r\n\tdelete def.datatable.footer;\r\n\tdelete def.datatable.foreach;\r\n\tdelete def.datatable.groups;\r\n\tdelete def.datatable.body;\r\n\r\n\tfor (var key in def.datatable) {\r\n\t\tdef.table[key] = def.datatable[key];\r\n\t}\r\n\tdelete def.datatable;\r\n}\r\n\r\n//get the array for the foreach statement in the data\r\nfunction getArrayFromForEach(foreach, data) {\r\n\tvar sarr = foreach.split(\" in \")[1];\r\n\tvar arr;\r\n\tif (sarr === undefined) {\r\n\t\tarr = data?.items;//we get the main array\r\n\t} else {\r\n\t\tarr = getVar(data, sarr);\r\n\t}\r\n\treturn arr;\r\n}\r\n//replace templates e.g. ${name} with the data\r\nfunction replaceTemplates(def, data, param = undefined) {\r\n\tif (def === undefined)\r\n\t\treturn;\r\n\tif (def.datatable !== undefined) {\r\n\t\treplaceDatatable(def, data);\r\n\r\n\t}\r\n\tif(def.format){\r\n\t\tvar val = def.text.replaceTemplate(data,true);\r\n\t\tif(val===undefined)\r\n\t\t    return \"\";\r\n\t\telse if(typeof val == 'number'){\r\n\t\t\tdef.text=_format(def.format,val,{});\r\n\t\t}else if(val.getMonth){\r\n\t\t\tdef.text=formatDate(def.format,val);\r\n\t\t}\r\n\t\tdelete def.format;\r\n\t}\r\n\tif (def.foreach !== undefined) {\r\n\t\t//resolve foreach\r\n\t\t//\t{ foreach: \"line in invoice.lines\", do: ['{{line.text}}', '{{line.price}}', 'OK?']\t\r\n\t\tif (param?.parentArray === undefined) {\r\n\t\t\tthrow \"foreach is not surounded by an Array\";\r\n\t\t}\r\n\t\tvar variable = def.foreach.split(\" in \")[0];\r\n\t\tvar arr: any[] = getArrayFromForEach(def.foreach, data);\r\n\r\n\t\tif (param?.parentArrayPos === undefined) {\r\n\t\t\tparam.parentArrayPos = param?.parentArray.indexOf(def);\r\n\t\t\tparam?.parentArray.splice(param.parentArrayPos, 1);\r\n\t\t}\r\n\r\n\t\tfor (let x = 0; x < arr.length; x++) {\r\n\t\t\tdata[variable] = arr[x];\r\n\t\t\tdelete def.foreach;\r\n\t\t\tvar copy;\r\n\t\t\tif (def.dofirst && x === 0) {//render only forfirst\r\n\t\t\t\tcopy = clone(def.dofirst);\r\n\t\t\t\tcopy = replaceTemplates(copy, data, param);\r\n\t\t\t\tif (copy !== undefined)\r\n\t\t\t\t\tparam.parentArray.splice(param.parentArrayPos++, 0, copy);\r\n\t\t\t}\r\n\t\t\tif (def.do)\r\n\t\t\t\tcopy = clone(def.do);\r\n\t\t\telse\r\n\t\t\t\tcopy = clone(def);\r\n\r\n\t\t\tcopy = replaceTemplates(copy, data, param);\r\n\t\t\tif (copy !== undefined)\r\n\t\t\t\tparam.parentArray.splice(param.parentArrayPos++, 0, copy);\r\n\r\n\t\t\tif (def.dolast && x === arr.length - 1) {//render only forlast\r\n\t\t\t\tcopy = clone(def.dolast);\r\n\t\t\t\tcopy = replaceTemplates(copy, data, param);\r\n\t\t\t\tif (copy !== undefined)\r\n\t\t\t\t\tparam.parentArray.splice(param.parentArrayPos++, 0, copy);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdelete data[variable];\r\n\t\treturn undefined;\r\n\t} else if (Array.isArray(def)) {\r\n\t\tfor (var a = 0; a < def.length; a++) {\r\n\t\t\tif (def[a].foreach !== undefined) {\r\n\t\t\t\treplaceTemplates(def[a], data, { parentArray: def });\r\n\t\t\t\ta--;\r\n\t\t\t} else\r\n\t\t\t\tdef[a] = replaceTemplates(def[a], data, { parentArray: def });\r\n\t\t}\r\n\t\treturn def;\r\n\t} else if (typeof def === \"string\") {\r\n\t\tvar ergebnis = def.toString().match(/\\$\\{/g);\r\n\t\tif (ergebnis !== null) {\r\n\t\t\tdef = def.replaceTemplate(data);\r\n\t\t\t//\tfor (var e = 0; e < ergebnis.length; e++) {\r\n\t\t\t//\t\tdef = replace(def, data, ergebnis[e].substring(2, ergebnis[e].length - 2));\r\n\t\t\t//\t}\r\n\t\t}\r\n\t\treturn def;\r\n\t} else {//object\t\r\n\t\tfor (var key in def) {\r\n\t\t\tdef[key] = replaceTemplates(def[key], data);\r\n\r\n\t\t}\r\n\t\tdelete def.editTogether;//RText is only used for editing report\r\n\t}\r\n\treturn def;\r\n}\r\n\r\n/**\r\n * create an pdfmake-definition from an jassijs-report-definition, fills data and parameter in the report\r\n * @param {string} definition - the jassijs-report definition\r\n * @param {any} [data] - the data which are filled in the report (optional)\r\n * @param {any} [parameter] - the parameter which are filled in the report (otional)\r\n */\r\nexport function createReportDefinition(definition, data, parameter) {\r\n\tdefinition = clone(definition);//this would be modified\r\n\tif (data !== undefined)\r\n\t\tdata = clone(data);//this would be modified\r\n\r\n\tif (data === undefined && definition.data !== undefined) {\r\n\t\tdata = definition.data;\r\n\t}\r\n\t//parameter could be in data\r\n\tif (data !== undefined && data.parameter !== undefined && parameter !== undefined) {\r\n\t\tthrow new Error(\"parameter would override data.parameter\");\r\n\t}\r\n\tif (Array.isArray(data)) {\r\n\t\tdata = { items: data };//so we can do data.parameter\r\n\t}\r\n\tif (parameter !== undefined) {\r\n\r\n\t\tdata.parameter = parameter;\r\n\t}\r\n\t//parameter could be in definition\r\n\tif (data !== undefined && data.parameter !== undefined && definition.parameter !== undefined) {\r\n\t\tthrow new Error(\"definition.parameter would override data.parameter\");\r\n\t}\r\n\tif (definition.parameter !== undefined) {\r\n\t\tdata.parameter = definition.parameter;\r\n\t}\r\n\tdefinition.content = replaceTemplates(definition.content, data);\r\n\tif (definition.background)\r\n\t\tdefinition.background = replaceTemplates(definition.background, data);\r\n\tif (definition.header)\r\n\t\tdefinition.header = replaceTemplates(definition.header, data);\r\n\tif (definition.footer)\r\n\t\tdefinition.footer = replaceTemplates(definition.footer, data);\r\n\r\n\treplacePageInformation(definition);\r\n\tdelete definition.data;\r\n\treturn definition;\r\n\t// delete definition.parameter;\r\n}\r\n\r\n//add aggregate functions for grouping\r\nfunction addGroupFuncions(names, values) {\r\n\tnames.push(\"sum\");\r\n\tvalues.push(sum);\r\n\tnames.push(\"count\");\r\n\tvalues.push(count);\r\n\tnames.push(\"max\");\r\n\tvalues.push(max);\r\n\tnames.push(\"min\");\r\n\tvalues.push(min);\r\n\tnames.push(\"avg\");\r\n\tvalues.push(avg);\r\n}\r\nfunction aggr(group, field,data) {\r\n\tvar ret = 0;\r\n\tif (!Array.isArray(group) && group.entries === undefined)\r\n\t\tthrow new Error(\"sum is valid only in arrays and groups\");\r\n\tvar sfield: string = field;\r\n\tif (field.indexOf(\"${\") === -1) {\r\n\t\tsfield = \"${\" + sfield + \"}\";\r\n\t}\r\n\tif(Array.isArray(group)){\r\n\t\tfor (var x = 0; x < group.length; x++) {\r\n\t\t\tvar ob = group[x];\r\n\t\t\tif(ob.entries!==undefined)\r\n\t\t\t\taggr(ob.entries,field,data);\r\n\t\t\telse{\r\n\t\t\t\tvar val = sfield.replaceTemplate(ob, true);\r\n\t\t\t\tdata.func(data,val===undefined?0: Number.parseFloat(val));\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\taggr(group.entries,field,data);//group\r\n\t} \r\n\treturn data;\r\n}\r\n\r\n//sum the field in the group\r\nfunction sum(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:0,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tdata.ret=data.ret+num;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//count the field in the group\r\nfunction count(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:0,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tdata.ret=data.ret+1;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//get the maximum of the field in the group\r\nfunction max(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:Number.MIN_VALUE,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tif(num>data.ret)\r\n\t\t\t\tdata.ret=num;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//get the minimum of the field in the group\r\nfunction min(group, field) {\r\n\treturn aggr(group,field,{\r\n\t\tret:Number.MAX_VALUE,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tif(num<data.ret)\r\n\t\t\t\tdata.ret=num;\r\n\t\t}\r\n\t}).ret;\r\n}\r\n//get the minimum of the field in the group\r\nfunction avg(group, field) {\r\n\tvar ret= aggr(group,field,{\r\n\t\tret:0,\r\n\t\tcount:0,\r\n\t\tfunc:(data,num)=>{\r\n\t\t\tdata.ret=data.ret+num;\r\n\t\t\tdata.count++;\r\n\r\n\t\t}\r\n\t});\r\n\treturn ret.ret/ret.count;\r\n}\r\n\r\nexport function test() {\r\n\tvar ff= _format(\"####,##\", 50.22, {});\r\n\tvar hh=formatDate(\"DD.MM.YYYY hh:mm:ss\",new Date());\r\n\tvar hh=formatDate(\"YY-MM-DD h:mm:ss A\",new Date());\r\n\tvar sampleData = [\r\n\t\t{ id: 1, customer: \"Fred\", city: \"Frankfurt\", age: 51 },\r\n\t\t{ id: 8, customer: \"Alma\", city: \"Dresden\", age: 70 },\r\n\t\t{ id: 3, customer: \"Heinz\", city: \"Frankfurt\", age: 33 },\r\n\t\t{ id: 2, customer: \"Fred\", city: \"Frankfurt\", age: 88 },\r\n\t\t{ id: 6, customer: \"Max\", city: \"Dresden\", age: 3 },\r\n\t\t{ id: 4, customer: \"Heinz\", city: \"Frankfurt\", age: 64 },\r\n\t\t{ id: 5, customer: \"Max\", city: \"Dresden\", age: 54 },\r\n\t\t{ id: 7, customer: \"Alma\", city: \"Dresden\", age: 33 },\r\n\t\t{ id: 9, customer: \"Otto\", city: \"Berlin\", age: 21 }\r\n\t];\r\n\r\n\tvar h = {\r\n\t\tall: doGroup(sampleData, [\"city\",\"customer\"]),\r\n\t\tk: 5,\r\n\t\tho() {\r\n\t\t\treturn this.k + 1;\r\n\t\t}\r\n\t}\r\n\t//@ts-ignore\r\n\tvar s = \"${Math.round(avg(all,'age'),2)}\".replaceTemplate(h, true);\r\n\ts = \"${k}\".replaceTemplate(h, true);\r\n\ts = \"${ho()}\".replaceTemplate(h, true);\r\n\r\n\t\r\n}\r\n","import { $Class } from \"jassijs/remote/Registry\";\nimport { Context, RemoteObject } from \"jassijs/remote/RemoteObject\";\nimport { Server } from \"jassijs/remote/Server\";\nimport { ValidateFunctionParameter, ValidateIsString } from \"jassijs/remote/Validator\";\n\n@$Class(\"jassijs_report.remote.ServerReport\")\nexport class ServerReport extends RemoteObject{\n    static cacheLastParameter={};\n    @ValidateFunctionParameter()\n    public static async getDesign(@ValidateIsString() path:string,parameter: any,context: Context = undefined) {\n        if (!context?.isServer) {\n            return await ServerReport.call(this.getDesign, path,parameter,context);\n        } else {\n            //@ts-ignore\n            var DoServerreport=(await import(\"jassijs_report/server/DoServerreport\")).DoServerreport;\n            ServerReport.cacheLastParameter[path]=parameter;\n            return await new DoServerreport().getDesign(path,parameter);\n        }\n    }\n    @ValidateFunctionParameter()\n    public static async getBase64(@ValidateIsString() path:string,parameter: any,context: Context = undefined) {\n        if (!context?.isServer) {\n            return await ServerReport.call(this.getBase64, path,parameter,context);\n        } else {\n            //@ts-ignore\n            var DoServerreport=(await import(\"jassijs_report/server/DoServerreport\")).DoServerreport;\n            if(parameter==\"useLastCachedParameter\")\n                parameter=ServerReport.cacheLastParameter[path];\n            return await new DoServerreport().getBase64(path,parameter); \n        }\n    }\n    public static async getBase64FromFile(file:string,context: Context = undefined) {\n        if (!context?.isServer) {\n            return await ServerReport.call(this.getBase64FromFile,file,context);\n        } else {\n            var res = await new Server().testServersideFile(file.substring(0, file.length - 3),context);\n        \n            //@ts-ignore \n            var DoServerreport=(await import(\"jassijs_report/server/DoServerreport\")).DoServerreport;\n            return await new DoServerreport().getBase64FromData(res);\n        }\n    }\n  \n}\nexport async function test(){\n  \n    var ret=await ServerReport.getBase64(\"jassijs_report/server/TestServerreport\",{sort:\"name\"});\n   \n   return ret;\n//    console.log(await new ServerReport().sayHello(\"Kurt\"));\n}\n","\r\nimport { config } from \"jassijs/remote/Config\";\r\nimport { Server } from \"jassijs/remote/Server\";\r\nimport { createReportDefinition } from \"jassijs_report/remote/pdfmakejassi\";\r\n\r\nexport class DoServerreport {\r\n\r\n    async getDesign(path: string, parameter) {\r\n        var fill = (await import(path)).fill;\r\n        var content = await fill(parameter);\r\n        return content;\r\n    }\r\n    async download(url, dest) {\r\n      \r\n    }\r\n\r\n    async getBase64(file: string, parameter) {\r\n        var data = await this.getDesign(file, parameter);\r\n        return await this.getBase64FromData(data);\r\n    }\r\n    async getBase64FromData(data) {\r\n        var PDFReport = <any>await new Promise((resolve) => {\r\n            config.clientrequire([\"jassijs_report/PDFReport\"], (rep) => {\r\n                resolve(rep.PDFReport);\r\n            });\r\n        });\r\n        var rep=new PDFReport();\r\n        rep.data=data.data;\r\n        rep.value=data.reportdesign;\r\n        rep.parameter=data.parameter;\r\n        await rep.fill();\r\n        return await rep.getBase64();\r\n    }\r\n}\r\n\r\n","//synchronize-server-client\r\n\r\nvar reportdesign = {\r\n\tcontent: [\r\n\t\t{\r\n\t\t\tdatatable: {\r\n\t\t\t\twidths: [\"auto\",\"auto\",140],\r\n\t\t\t\theader: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbold: true,\r\n\t\t\t\t\t\titalics: true,\r\n\t\t\t\t\t\tfont: \"Asap\",\r\n\t\t\t\t\t\ttext: \"name\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"lastname\",\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t],\r\n\t\t\t\tfooter: [\"\",\"\",\"\\n\"],\r\n\t\t\t\tdataforeach: \"person\",\r\n\t\t\t\tbody: [\r\n\t\t\t\t\t\"${person.name}\",\r\n\t\t\t\t\t\"${person.lastname}\",\r\n\t\t\t\t\t\"${person.fullname()}\"\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n};\r\n \r\nexport async function fill(parameter) {\r\n    var data = [\r\n        { name: \"Aoron\", lastname: \"Mllera\" ,fullname(){ return this.name+\", \"+this.lastname}},\r\n        { name: \"Heino\", lastname: \"Brechtp\",fullname(){ return this.name+\", \"+this.lastname}}\r\n    ]\r\n    if (parameter?.sort === \"name\")\r\n        data = data.sort((a, b) => { return a.name.localeCompare(b.name) });\r\n    if (parameter?.sort === \"lastname\")\r\n        data = data.sort((a, b) => { return a.lastname.localeCompare(b.lastname) });\r\n    return {\r\n        reportdesign,\r\n        data\r\n    }\r\n}\r\n\r\nexport async function test(){ \r\n    return await fill(undefined); \r\n}\r\n//ok","export default {\r\n    \"css\":{\"jassijs_report.css\":\"jassijs_report.css\"},\r\n    \"require\": {\r\n        paths: {\r\n            'pdfjs-dist/build/pdf': '//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min',\r\n            'pdfjs-dist/build/pdf.worker': '//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min',\r\n            'vfs_fonts': '//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.3.0-beta.2/vfs_fonts',// '../../lib/vfs_fonts',\r\n            'pdfMakelib': '//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.3.0-beta.2/pdfmake'  //'../../lib/pdfmake'\r\n        },\r\n        shim: {\r\n            'pdfjs-dist/build/pdf': ['pdfjs-dist/build/pdf.worker'],\r\n            \"vfs_fonts\":[\"pdfMakelib\"]\r\n            //\"pdfMake\":[\"vfs_fonts\"]\r\n        },\r\n\r\n    }\r\n}"]}
>>>>>>> d240df83ceb960d653afe75fc93bccd1c67e9279
